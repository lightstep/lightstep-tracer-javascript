!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lightstep=t():e.lightstep=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var o=n(24),i=r(o),s=n(4),a={Tracer:i["default"]};s.Platform.initLibrary(a),e.exports=a},function(e,t){"use strict";function n(e,t){if(e)for(var n in e)hasOwnProperty.call(e,n)&&t(e[n],n)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),a=n(8),u=r(a),l=function(){function e(){i(this,e)}return s(e,[{key:"context",value:function(){return this._context()}},{key:"tracer",value:function(){return this._tracer()}},{key:"setOperationName",value:function(e){return this._setOperationName(e),this}},{key:"setBaggageItem",value:function(e,t){return this._setBaggageItem(e,t),this}},{key:"getBaggageItem",value:function(e){return this._getBaggageItem(e)}},{key:"setTag",value:function(e,t){return this._addTags(o({},e,t)),this}},{key:"addTags",value:function(e){return this._addTags(e),this}},{key:"log",value:function(e,t){return this._log(e,t),this}},{key:"logEvent",value:function(e,t){return this._log({event:e,payload:t})}},{key:"finish",value:function(e){this._finish(e)}},{key:"_context",value:function(){return u.spanContext}},{key:"_tracer",value:function(){return u.tracer}},{key:"_setOperationName",value:function(e){}},{key:"_setBaggageItem",value:function(e,t){}},{key:"_getBaggageItem",value:function(e){}},{key:"_addTags",value:function(e){}},{key:"_log",value:function(e,t){}},{key:"_finish",value:function(e){}}]),e}();t["default"]=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.LOG_INFO=0,r=t.LOG_WARN=1,o=t.LOG_ERROR=2,i=t.LOG_FATAL=3;t.LOG_LEVEL_TO_STRING={LOG_INFO:"I",LOG_WARN:"W",LOG_ERROR:"E",LOG_FATAL:"F"},t.LOG_STRING_TO_LEVEL={I:n,W:r,E:o,F:i},t.CLOCK_STATE_REFRESH_INTERVAL_MS=350,t.LIGHTSTEP_APP_URL_PREFIX="https://app.lightstep.com",t.JOIN_ID_PREFIX="join:"},function(e,t,n){"use strict";e.exports={Platform:n(18),Transport:n(20),thrift:n(19),crouton_thrift:n(16)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function o(){n(this,o)};t["default"]=r},function(e,t){"use strict";function n(e){return""+e}function r(e){return Number(e)}function o(e){return!!e}Object.defineProperty(t,"__esModule",{value:!0}),t.toString=n,t.toNumber=r,t.toBoolean=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FORMAT_BINARY="binary",t.FORMAT_TEXT_MAP="text_map",t.FORMAT_HTTP_HEADERS="http_headers",t.REFERENCE_CHILD_OF="child_of",t.REFERENCE_FOLLOWS_FROM="follows_from"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){t.tracer=p=new s["default"],t.span=_=new c["default"],t.spanContext=f=new u["default"]}Object.defineProperty(t,"__esModule",{value:!0}),t.span=t.spanContext=t.tracer=void 0,t.initialize=o;var i=n(9),s=r(i),a=n(5),u=r(a),l=n(2),c=r(l),p=t.tracer=null,f=t.spanContext=null,_=t.span=null},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),a=n(2),u=o(a),l=n(5),c=(o(l),n(7)),p=(r(c),n(11)),f=r(p),_=n(8),d=r(_),h=function(){function e(){i(this,e)}return s(e,[{key:"startSpan",value:function(e,t){if(t=t||{},t.childOf){var n=f.childOf(t.childOf);t.references?t.references.push(n):t.references=[n],delete t.childOf}return this._startSpan(e,t)}},{key:"inject",value:function(e,t,n){return e instanceof u["default"]&&(e=e.context()),this._inject(e,t,n)}},{key:"extract",value:function(e,t){return this._extract(e,t)}},{key:"_startSpan",value:function(e,t){return d.span}},{key:"_inject",value:function(e,t,n){}},{key:"_extract",value:function(e,t){return d.spanContext}}]),e}();t["default"]=h},function(e,t){"use strict";!function(){var t={},n={};"undefined"==typeof n&&(n={}),n.KeyValue=function(e){if(this.Key=null,this.Value=null,e){if(void 0===e.Key)throw new t.TProtocolException(t.TProtocolExceptionType.UNKNOWN,"Required field Key is unset!");if(this.Key=e.Key,void 0===e.Value)throw new t.TProtocolException(t.TProtocolExceptionType.UNKNOWN,"Required field Value is unset!");this.Value=e.Value}},n.KeyValue.prototype={},n.KeyValue.prototype.read=!1,n.KeyValue.prototype.write=!1,n.NamedCounter=function(e){if(this.Name=null,this.Value=null,e){if(void 0===e.Name)throw new t.TProtocolException(t.TProtocolExceptionType.UNKNOWN,"Required field Name is unset!");if(this.Name=e.Name,void 0===e.Value)throw new t.TProtocolException(t.TProtocolExceptionType.UNKNOWN,"Required field Value is unset!");this.Value=e.Value}},n.NamedCounter.prototype={},n.NamedCounter.prototype.read=!1,n.NamedCounter.prototype.write=!1,n.Runtime=function(e){this.guid=null,this.start_micros=null,this.group_name=null,this.attrs=null,e&&(void 0!==e.guid&&(this.guid=e.guid),void 0!==e.start_micros&&(this.start_micros=e.start_micros),void 0!==e.group_name&&(this.group_name=e.group_name),void 0!==e.attrs&&(this.attrs=e.attrs))},n.Runtime.prototype={},n.Runtime.prototype.read=!1,n.Runtime.prototype.write=!1,n.LogRecord=function(e){this.timestamp_micros=null,this.fields=null,this.runtime_guid=null,this.span_guid=null,this.stable_name=null,this.message=null,this.level=null,this.thread_id=null,this.filename=null,this.line_number=null,this.stack_frames=null,this.payload_json=null,this.error_flag=null,e&&(void 0!==e.timestamp_micros&&(this.timestamp_micros=e.timestamp_micros),void 0!==e.fields&&(this.fields=e.fields),void 0!==e.runtime_guid&&(this.runtime_guid=e.runtime_guid),void 0!==e.span_guid&&(this.span_guid=e.span_guid),void 0!==e.stable_name&&(this.stable_name=e.stable_name),void 0!==e.message&&(this.message=e.message),void 0!==e.level&&(this.level=e.level),void 0!==e.thread_id&&(this.thread_id=e.thread_id),void 0!==e.filename&&(this.filename=e.filename),void 0!==e.line_number&&(this.line_number=e.line_number),void 0!==e.stack_frames&&(this.stack_frames=e.stack_frames),void 0!==e.payload_json&&(this.payload_json=e.payload_json),void 0!==e.error_flag&&(this.error_flag=e.error_flag))},n.LogRecord.prototype={},n.LogRecord.prototype.read=!1,n.LogRecord.prototype.write=!1,n.TraceJoinId=function(e){if(this.TraceKey=null,this.Value=null,e){if(void 0===e.TraceKey)throw new t.TProtocolException(t.TProtocolExceptionType.UNKNOWN,"Required field TraceKey is unset!");if(this.TraceKey=e.TraceKey,void 0===e.Value)throw new t.TProtocolException(t.TProtocolExceptionType.UNKNOWN,"Required field Value is unset!");this.Value=e.Value}},n.TraceJoinId.prototype={},n.TraceJoinId.prototype.read=!1,n.TraceJoinId.prototype.write=!1,n.SpanRecord=function(e){this.span_guid=null,this.trace_guid=null,this.runtime_guid=null,this.span_name=null,this.join_ids=null,this.oldest_micros=null,this.youngest_micros=null,this.attributes=null,this.error_flag=null,this.log_records=null,e&&(void 0!==e.span_guid&&(this.span_guid=e.span_guid),void 0!==e.trace_guid&&(this.trace_guid=e.trace_guid),void 0!==e.runtime_guid&&(this.runtime_guid=e.runtime_guid),void 0!==e.span_name&&(this.span_name=e.span_name),void 0!==e.join_ids&&(this.join_ids=e.join_ids),void 0!==e.oldest_micros&&(this.oldest_micros=e.oldest_micros),void 0!==e.youngest_micros&&(this.youngest_micros=e.youngest_micros),void 0!==e.attributes&&(this.attributes=e.attributes),void 0!==e.error_flag&&(this.error_flag=e.error_flag),void 0!==e.log_records&&(this.log_records=e.log_records))},n.SpanRecord.prototype={},n.SpanRecord.prototype.read=!1,n.SpanRecord.prototype.write=!1,n.Auth=function(e){this.access_token=null,e&&void 0!==e.access_token&&(this.access_token=e.access_token)},n.Auth.prototype={},n.Auth.prototype.read=!1,n.Auth.prototype.write=!1,n.Timing=function(e){this.receive_micros=null,this.transmit_micros=null,e&&(void 0!==e.receive_micros&&(this.receive_micros=e.receive_micros),void 0!==e.transmit_micros&&(this.transmit_micros=e.transmit_micros))},n.Timing.prototype={},n.Timing.prototype.read=!1,n.Timing.prototype.write=!1,n.SampleCount=function(e){this.oldest_micros=null,this.youngest_micros=null,this.count=null,e&&(void 0!==e.oldest_micros&&(this.oldest_micros=e.oldest_micros),void 0!==e.youngest_micros&&(this.youngest_micros=e.youngest_micros),void 0!==e.count&&(this.count=e.count))},n.SampleCount.prototype={},n.SampleCount.prototype.read=!1,n.SampleCount.prototype.write=!1,n.MetricsSample=function(e){if(this.name=null,this.int64_value=null,this.double_value=null,e){if(void 0===e.name)throw new t.TProtocolException(t.TProtocolExceptionType.UNKNOWN,"Required field name is unset!");this.name=e.name,void 0!==e.int64_value&&(this.int64_value=e.int64_value),void 0!==e.double_value&&(this.double_value=e.double_value)}},n.MetricsSample.prototype={},n.MetricsSample.prototype.read=!1,n.MetricsSample.prototype.write=!1,n.Metrics=function(e){this.counts=null,this.gauges=null,e&&(void 0!==e.counts&&(this.counts=e.counts),void 0!==e.gauges&&(this.gauges=e.gauges))},n.Metrics.prototype={},n.Metrics.prototype.read=!1,n.Metrics.prototype.write=!1,n.ReportRequest=function(e){this.runtime=null,this.span_records=null,this.log_records=null,this.timestamp_offset_micros=null,this.oldest_micros=null,this.youngest_micros=null,this.counters=null,this.internal_logs=null,this.internal_metrics=null,e&&(void 0!==e.runtime&&(this.runtime=e.runtime),void 0!==e.span_records&&(this.span_records=e.span_records),void 0!==e.log_records&&(this.log_records=e.log_records),void 0!==e.timestamp_offset_micros&&(this.timestamp_offset_micros=e.timestamp_offset_micros),void 0!==e.oldest_micros&&(this.oldest_micros=e.oldest_micros),void 0!==e.youngest_micros&&(this.youngest_micros=e.youngest_micros),void 0!==e.counters&&(this.counters=e.counters),void 0!==e.internal_logs&&(this.internal_logs=e.internal_logs),void 0!==e.internal_metrics&&(this.internal_metrics=e.internal_metrics))},n.ReportRequest.prototype={},n.ReportRequest.prototype.read=!1,n.ReportRequest.prototype.write=!1,n.Command=function(e){this.disable=null,e&&void 0!==e.disable&&(this.disable=e.disable)},n.Command.prototype={},n.Command.prototype.read=!1,n.Command.prototype.write=!1,n.ReportResponse=function(e){this.commands=null,this.timing=null,this.errors=null,e&&(void 0!==e.commands&&(this.commands=e.commands),void 0!==e.timing&&(this.timing=e.timing),void 0!==e.errors&&(this.errors=e.errors))},n.ReportResponse.prototype={},n.ReportResponse.prototype.read=!1,n.ReportResponse.prototype.write=!1,e.exports.crouton_thrift=n,e.exports.Thrift={}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e instanceof c["default"]&&(e=e.context()),new f["default"](u.REFERENCE_CHILD_OF,e)}function s(e){return e instanceof c["default"]&&(e=e.context()),new f["default"](u.REFERENCE_FOLLOWS_FROM,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.childOf=i,t.followsFrom=s;var a=n(7),u=o(a),l=n(2),c=r(l),p=n(13),f=r(p)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}var s=n(34),a=o(s),u=n(7),l=o(u),c=n(11),p=o(c),f=n(8),_=o(f),d=n(33),h=o(d),v=n(32),m=r(v),g=n(13),y=r(g),b=n(5),w=r(b),k=n(2),O=r(k),R=n(9),S=r(R);e.exports=i({BinaryCarrier:m["default"],Reference:y["default"],SpanContext:w["default"],Span:O["default"],Tracer:S["default"],Tags:h},l,p,a),_.initialize()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=r(s),u=n(5),l=(r(u),function(){function e(t,n){o(this,e),this._type=t,this._referencedContext=n instanceof a["default"]?n.context():n}return i(e,[{key:"type",value:function(){return this._type}},{key:"referencedContext",value:function(){return this._referencedContext}}]),e}());t["default"]=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),a=r(s),u=function(){function e(){o(this,e),this.options={}}return i(e,[{key:"setOptions",value:function(e){var t=this;(0,a["default"])(e,function(e,n){t.options[n]=e})}}]),e}();e.exports=new u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),s=n(3),a=n(6),u=function(){function e(t){r(this,e),this._runtime=t,this._record=new i.crouton_thrift.LogRecord({timestamp_micros:t._platform.nowMicros(),runtime_guid:null,span_guid:null,stable_name:null,message:null,level:null,thread_id:null,filename:null,line_number:null,stack_frames:null,payload_json:null,error_flag:null})}return o(e,[{key:"record",value:function(){return this._record}},{key:"end",value:function(){this._runtime._addLogRecord(this._record)}},{key:"timestamp",value:function(e){return this._record.timestamp_micros=a.toNumber(e),this}},{key:"message",value:function(e){return this._record.message=a.toString(e),this}},{key:"level",value:function(e){return this._record.level=s.LOG_LEVEL_TO_STRING[e]||null,e>=s.LOG_ERROR&&this.error(!0),this}},{key:"span",value:function(e){return void 0!==e&&(this._record.span_guid=a.toString(e)),this}},{key:"name",value:function(e){return this._record.stable_name=a.toString(e),this}},{key:"error",value:function(e){return this._record.error_flag=a.toBoolean(e),this}},{key:"payload",value:function(e){return void 0!==e&&(this._record.payload_json=this._encodePayload(e)),this}},{key:"_encodePayload",value:function(e){var t=null;try{t=JSON.stringify(e)}catch(n){return}return t}}]),e}();e.exports=u},function(e,t,n){"use strict";e.exports=n(10).crouton_thrift},function(e,t){"use strict";function n(e){var t={},n=window.location.href.indexOf("?");if(n<0)return t;var r=window.location.href.slice(n+1);r.indexOf("#")>=0&&(r=r.slice(0,r.indexOf("#")));for(var o=r.replace(/\+/,"%20").split("&"),i=0;i<o.length;i++){var s=o[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}var r=function(){var e=document.getElementsByTagName("SCRIPT");return e.length>0?e[e.length-1]:null}();e.exports.parseScriptElementOptions=function(e,t){if(r){var n=r.dataset,o=n.access_token;"string"==typeof o&&o.length>0&&(e.access_token=o);var i=n.component_name;"string"==typeof i&&i.length>0&&(e.component_name=i);var s=n.collector_host;"string"==typeof s&&s.length>0&&(e.collector_host=s);var a=n.collector_port;a&&(e.collector_port=parseInt(a,10));var u=n.collector_encryption;u&&(e.collector_encryption=u);var l=n.enable;"string"==typeof l&&("true"===l?e.enable=!0:"false"===l&&(e.enable=!1));var c=n.verbosity;"string"==typeof c&&(e.verbosity=parseInt(c,10));var p=n.init_global_tracer;"string"==typeof p&&("true"===p?t.init_global_tracer=!0:"false"===p&&(t.init_global_tracer=!1));var f=n.xhr_instrumentation;"string"==typeof f&&"true"===f&&(e.xhr_instrumentation=!0)}},e.exports.parseURLQueryOptions=function(e){if(window){var t=n();if(t.lightstep_verbosity)try{e.verbosity=parseInt(t.lightstep_verbosity,10)}catch(r){}t.lightstep_log_to_console&&(e.log_to_console=!0)}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(17),s=n(21),a="lightstep_guid",u="lightstep_session_id",l=604800,c=function(){if(window.performance&&window.performance.now&&window.performance.timing&&window.performance.timing.navigationStart){var e=function(){var e=performance.timing.navigationStart;return{v:function(){return Math.floor(1e3*(e+performance.now()))}}}();if("object"==typeof e)return e.v}return function(){return 1e3*Date.now()}}(),p=function(){function e(){r(this,e)}return o(e,[{key:"name",value:function(){return"browser"}},{key:"nowMicros",value:function(){return c()}},{key:"runtimeGUID",value:function(e){var t=a+"/"+e,n=s.cookie(t)||this._generateLongUUID();s.cookie(t,n,l,"/");var r=s.cookie(u)||this._generateLongUUID();return s.cookie(u,r,l,"/"),n}},{key:"generateUUID",value:function(){return this._generateLongUUID()}},{key:"_generateLongUUID",value:function(){var e=("00000000"+Math.abs(4294967295*Math.random()|0).toString(16)).substr(-8),t=("00000000"+Math.abs(4294967295*Math.random()|0).toString(16)).substr(-8);return""+e+t}},{key:"onBeforeExit",value:function(){if(window){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=window).addEventListener.apply(e,["beforeunload"].concat(n))}}},{key:"plugins",value:function(e){return[n(28),n(27)]}},{key:"options",value:function(e){var t={},n={};return i.parseScriptElementOptions(t,n),i.parseURLQueryOptions(t,n),t}},{key:"tracerTags",value:function(){return{"lightstep.tracer_platform":"browser"}}},{key:"fatal",value:function(e){throw new Error(e)}},{key:"localStoreGet",value:function(e){if(!window.sessionStorage)return null;try{return JSON.parse(sessionStorage.getItem("lightstep/"+e))}catch(t){return null}}},{key:"localStoreSet",value:function(e,t){if(window.sessionStorage)try{sessionStorage.setItem("lightstep/"+e,JSON.stringify(t))}catch(n){}}}],[{key:"initLibrary",value:function(t){var n={},r={};i.parseScriptElementOptions(n,r),r.init_global_tracer&&e.initGlobalTracer(t,n)}},{key:"initGlobalTracer",value:function(e,t){"object"==typeof window&&"object"==typeof window.opentracing&&opentracing.initGlobalTracer(new e.Tracer(t))}}]),e}();e.exports=p},function(e,t,n){"use strict";e.exports=n(10).Thrift},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this._host="",this._port=0,this._encryption=""}return r(e,[{key:"ensureConnection",value:function(e){this._host=e.collector_host,this._port=e.collector_port,this._encryption=e.collector_encryption}},{key:"report",value:function(e,t,n,r){try{e?this._reportAsyncScript(t,n,r):this._reportAJAX(t,n,r)}catch(o){return r(o,null)}}},{key:"_reportAJAX",value:function(e,t,n){var r=JSON.stringify(t),o="none"===this._encryption?"http":"https",i=o+"://"+this._host+":"+this._port+"/api/v0/reports",s=new XMLHttpRequest;s.open("POST",i),s.setRequestHeader("LightStep-Access-Token",e.access_token),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){if(4===this.readyState){var e=null,t=null;if(200!==this.status)e=new Error("status code = "+this.status);else if(this.responseText)try{t=JSON.parse(this.responseText)}catch(r){e=r}else e=new Error("unexpected empty response");return n(e,t)}},s.send(r)}},{key:"_reportAsyncScript",value:function(e,t,n){var r=JSON.stringify(e),o=JSON.stringify(t),i="none"===this._encryption?"http":"https",s=i+"://"+this._host+":"+this._port+"/_rpc/v1/reports/uri_encoded?auth="+encodeURIComponent(r)+("&report="+encodeURIComponent(o)),a=document.createElement("script");a.async=!0,a.defer=!0,a.src=s,a.type="text/javascript";var u=document.getElementsByTagName("head")[0];return u&&u.appendChild(a),n(null,null)}}]),e}();t["default"]=o,e.exports=t["default"]},function(e,t){"use strict";function n(e,t,n,r,o,i){if(arguments.length>1){var s=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString():"")+(r?"; path="+r:"")+(o?"; domain="+o:"")+(i?"; secure":"");return document.cookie=s,s}return decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}e.exports={cookie:n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),a=r(s),u=function(){function e(t,n){o(this,e),this._baggage={},this._guid=t,this._traceGUID=n}return i(e,[{key:"setBaggageItem",value:function(e,t){this._baggage[e]=t}},{key:"getBaggageItem",value:function(e){return this._baggage[e]}},{key:"forEachBaggageItem",value:function(e){(0,a["default"])(this._baggage,function(t,n){e(n,t)})}}]),e}();t["default"]=u,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(6),c=o(l),p=n(3),f=o(p),_=n(1),d=r(_),h=n(12),v=o(h),m=n(4),g=function(e){function t(e,n,r){i(this,t);var o=s(this,Object.getPrototypeOf(t).call(this));return console.assert("object"==typeof e,"Invalid runtime"),o._tracerImp=e,o._ctx=r,o._ended=!1,o._operationName=n,o._tags={},o._beginMicros=e._platform.nowMicros(),o._endMicros=0,o._errorFlag=!1,o._log_records=null,o}return a(t,e),u(t,[{key:"_tracer",value:function(){return this._tracerImp}},{key:"_context",value:function(){return this._ctx}},{key:"_setOperationName",value:function(e){this._operationName=""+e}},{key:"_addTags",value:function(e){var t=this;(0,d["default"])(e,function(e,n){t._tags[n]=e})}},{key:"_log",value:function(e,t){var n=this,r=typeof e;if("object"!==r)return void n._tracerImp._error("Span.log() expects an object as its first argument");var o=t?1e3*t:n._tracerImp._platform.nowMicros(),i=[];(0,d["default"])(e,function(e,t){if(t&&e){var r=c.toString(t),o=null;if(e instanceof Object)try{o=JSON.stringify(e,null,"  ")}catch(s){o="Could not encode value. Exception: "+s}else o=c.toString(e);r.length>n._tracerImp._options.log_field_key_hard_limit&&(n._tracerImp._counters["logs.keys.over_limit"]++,r=r.substr(0,n._tracerImp._options.log_field_key_hard_limit)+"..."),o.length>n._tracerImp._options.log_field_value_hard_limit&&(n._tracerImp._counters["logs.values.over_limit"]++,o=o.substr(0,n._tracerImp._options.log_field_value_hard_limit)+"..."),i.push(new m.crouton_thrift.KeyValue({Key:r,Value:o}))}});var s=new m.crouton_thrift.LogRecord({timestamp_micros:o,fields:i});n._log_records=n._log_records||[],n._log_records.push(s),n._tracerImp.emit("log_added",s)}},{key:"_finish",value:function(e){return this.end(e)}}]),u(t,[{key:"getOperationName",value:function(){return this._operationName}},{key:"guid",value:function(){return this._ctx._guid}},{key:"traceGUID",value:function(){return this._ctx._traceGUID}},{key:"parentGUID",value:function(){return this._tags.parent_span_guid}},{key:"setParentGUID",value:function(e){return this._tags.parent_span_guid=c.toString(e),this}},{key:"beginMicros",value:function(){return this._beginMicros}},{key:"setBeginMicros",value:function(e){return this._beginMicros=e,this}},{key:"endMicros",value:function(){return this._endMicros}},{key:"setEndMicros",value:function(e){return this._endMicros=e,this}},{key:"generateTraceURL",value:function(){var e=void 0;e=this._beginMicros>0&&this._endMicros>0?Math.floor((this._beginMicros+this._endMicros)/2):this._tracerImp._platform.nowMicros();var t=f.LIGHTSTEP_APP_URL_PREFIX,n=encodeURIComponent(this._tracerImp.options().access_token),r=encodeURIComponent(this.guid());return t+"/"+n+"/trace?span_guid="+r+"&at_micros="+e}},{key:"getTags",value:function(){return this._tags}},{key:"end",value:function(e){this._ended||(this._ended=!0,void 0!==e&&(this._endMicros=1e3*e),0===this._endMicros&&(this._endMicros=this._tracerImp._platform.nowMicros()),this._tracerImp._addSpanRecord(this._toThrift()))}},{key:"_toThrift",value:function(){var e=[];(0,d["default"])(this._tags,function(t,n){e.push(new m.crouton_thrift.KeyValue({Key:c.toString(n),Value:c.toString(t)}))});var t=new m.crouton_thrift.SpanRecord({span_guid:this.guid(),trace_guid:this.traceGUID(),runtime_guid:this._tracerImp.guid(),span_name:this._operationName,oldest_micros:this._beginMicros,youngest_micros:this._endMicros,attributes:e,error_flag:this._errorFlag,log_records:this._log_records});return t}}]),t}(v.Span);t["default"]=g,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(30),c=o(l),p=n(12),f=r(p),_=n(22),d=o(_),h=n(23),v=o(h),m=n(1),g=o(m),y=n(4),b=n(25),w=n(15),k=n(6),O=n(3),R=n(14),S=n(31),T=n(26),E="ot-tracer-",M="ot-baggage-",x="collector.lightstep.com",I=443,L=80,P=20,A=null,C=function(e){function t(e){i(this,t);var r=s(this,Object.getPrototypeOf(t).call(this));r._delegateEventEmitterMethods(),e=e||{},A||(R.setOptions(e),A=r),r._platform=new y.Platform(r),r._runtimeGUID=e.guid||r.override_runtime_guid||null,r._plugins={},r._options={},r._optionDescs=[],r._makeOptionsTable(),r._opentracing=f,e.opentracing_module&&(r._opentracing=e.opentracing_module);var o=r._platform.nowMicros();r._startMicros=o,r._thriftAuth=null,r._thriftRuntime=null;var a={warn:function(e,t){r._warn(e,t)},error:function(e,t){r._error(e,t)}};return r._transport=(e?e.override_transport:null)||new y.Transport(a),r._reportingLoopActive=!1,r._reportYoungestMicros=o,r._reportTimer=null,r._reportErrorStreak=0,r._lastVisibleErrorMillis=0,r._skippedVisibleErrors=0,r._activeRootSpanSet={},r._activeRootSpan=null,r._useClockState=!0,r._clockState=new b({nowMicros:function(){return r._platform.nowMicros()},localStoreGet:function(){var e="clock_state/"+r._options.collector_host;return r._platform.localStoreGet(e)},localStoreSet:function(e){var t="clock_state/"+r._options.collector_host;return r._platform.localStoreSet(t,e)}}),r._spanRecords=[],r._counters={"internal.errors":0,"internal.warnings":0,"spans.dropped":0,"logs.dropped":0,"logs.keys.over_limit":0,"logs.values.over_limit":0,"reports.errors.send":0},r._internalLogs=[],r._flushIsActive=!1,r.addPlugin(n(29)),r.addPlatformPlugins(e),r.setPlatformOptions(e),e&&r.options(e),r._setupReportOnExit(),r._info("Tracer created with guid "+r._runtimeGUID),r.startPlugins(),r}return a(t,e),u(t,[{key:"_delegateEventEmitterMethods",value:function(){var e=this;this._ee=new c["default"],(0,g["default"])(["addListener","emit","eventNames","getMaxListeners","listenerCount","listeners","on","once","prependListener","prependOnceListener","removeAllListeners","removeListener","setMaxListeners"],function(t){e[t]=function(){e._ee[t]&&e._ee[t].apply(e._ee,arguments)}})}},{key:"_makeOptionsTable",value:function(){this.addOption("verbosity",{type:"int",min:0,max:9,defaultValue:1}),this.addOption("access_token",{type:"string",defaultValue:""}),this.addOption("component_name",{type:"string",defaultValue:""}),this.addOption("collector_host",{type:"string",defaultValue:x}),this.addOption("collector_port",{
type:"int",defaultValue:I}),this.addOption("collector_encryption",{type:"string",defaultValue:"tls"}),this.addOption("tags",{type:"any",defaultValue:{}}),this.addOption("max_reporting_interval_millis",{type:"int",defaultValue:2500}),this.addOption("disabled",{type:"bool",defaultValue:!1}),this.addOption("max_span_records",{type:"int",defaultValue:4096}),this.addOption("default_span_tags",{type:"any",defaultValue:{}}),this.addOption("report_timeout_millis",{type:"int",defaultValue:3e4}),this.addOption("gzip_json_requests",{type:"bool",defaultValue:!0}),this.addOption("disable_reporting_loop",{type:"bool",defaultValue:!1}),this.addOption("disable_report_on_exit",{type:"bool",defaultValue:!1}),this.addOption("delay_initial_report_millis",{type:"int",defaultValue:1e3}),this.addOption("error_throttle_millis",{type:"int",defaultValue:6e4}),this.addOption("certificate_verification",{type:"bool",defaultValue:!0}),this.addOption("override_transport",{type:"any",defaultValue:null}),this.addOption("silent",{type:"bool",defaultValue:!1}),this.addOption("log_field_key_hard_limit",{type:"int",defaultValue:256}),this.addOption("log_field_value_hard_limit",{type:"int",defaultValue:1024})}},{key:"_startSpan",value:function(e,t){var n=this,r=null;if(t=t||{},t.references)for(var o=0;o<t.references.length;o++){var i=t.references[o],s=i.type();if(s===this._opentracing.REFERENCE_CHILD_OF||s===this._opentracing.REFERENCE_FOLLOWS_FROM){var a=i.referencedContext();if(!a){this._error("Span reference has an invalid context",a);continue}r=a;break}}var u=r?r._traceGUID:this.generateTraceGUIDForRootSpan(),l=new v["default"](this,e,new d["default"](this._platform.generateUUID(),u));return l.addTags(this._options.default_span_tags),(0,g["default"])(t,function(e,t){switch(t){case"references":break;case"startTime":l.setBeginMicros(1e3*e);break;case"tags":l.addTags(e);break;default:n._warn("Ignoring unknown field '"+t+"'")}}),null!==r&&l.setParentGUID(r._guid),this.emit("start_span",l),l}},{key:"_inject",value:function(e,t,n){switch(t){case this._opentracing.FORMAT_HTTP_HEADERS:case this._opentracing.FORMAT_TEXT_MAP:this._injectToTextMap(e,n);break;case this._opentracing.FORMAT_BINARY:this._error("Unsupported format: "+t);break;default:this._error("Unknown format: "+t)}}},{key:"_injectToTextMap",value:function(e,t){return t?"object"!=typeof t?void this._error("Unexpected '"+typeof t+"' FORMAT_TEXT_MAP carrier in call to inject"):(t[E+"spanid"]=e._guid,t[E+"traceid"]=e._traceGUID,e.forEachBaggageItem(function(e,n){t[""+M+e]=n}),t[E+"sampled"]="true",t):void this._error("Unexpected null FORMAT_TEXT_MAP carrier in call to inject")}},{key:"_extract",value:function(e,t){switch(e){case this._opentracing.FORMAT_HTTP_HEADERS:case this._opentracing.FORMAT_TEXT_MAP:return this._extractTextMap(e,t);case this._opentracing.FORMAT_BINARY:return this._error("Unsupported format: "+e),null;default:return this._error("Unsupported format: "+e),null}}},{key:"_extractTextMap",value:function(e,t){var n=this,r=new d["default"](null,null),o=0;return(0,g["default"])(t,function(e,t){if(t=t.toLowerCase(),t.substr(0,E.length)===E){var i=t.substr(E.length);switch(i){case"traceid":o++,r._traceGUID=e;break;case"spanid":o++,r._guid=e;break;case"sampled":break;default:n._error("Unrecognized carrier key '"+t+"' with recognized prefix. Ignoring.")}}}),0===o?null:o<2?(this._error("Only found a partial SpanContext: "+e+", "+t),null):((0,g["default"])(t,function(e,t){if(t=t.toLowerCase(),t.substr(0,M.length)===M){var n=t.substr(M.length);r.setBaggageItem(n,e)}}),r)}},{key:"flush",value:function(e){return e||(e=function(){}),this._options.disabled?(this._warn("Manual flush() called in disabled state."),e(null)):void this._flushReport(!0,!1,e)}},{key:"guid",value:function(){return this._runtimeGUID}},{key:"verbosity",value:function(){var e=this._options.verbosity;return void 0===e?1:e}},{key:"generateTraceGUIDForRootSpan",value:function(){var e=this._platform.generateUUID();return this._activeRootSpan&&(e=this._activeRootSpan.traceGUID()),e}},{key:"setPlatformOptions",value:function(e){var t=this._platform.options(this)||{};(0,g["default"])(e,function(e,n){t[n]=e}),this.options(t)}},{key:"addOption",value:function(e,t){t.name=e,this._optionDescs.push(t),this._options[t.name]=t.defaultValue}},{key:"options",value:function(e){var t=this;if(0===arguments.length)return console.assert("object"==typeof this._options,"Internal error: _options field incorrect"),this._options;if("object"!=typeof e)throw new Error("options() must be called with an object: type was "+typeof e);0===e.collector_port&&delete e.collector_port,void 0!==e.collector_encryption&&void 0===e.collector_port&&(e.collector_port="none"!==e.collector_encryption?I:L);var n={},r={};(0,g["default"])(this._optionDescs,function(o){t._setOptionInternal(n,r,e,o)});for(var o in e)if(void 0===n[o]&&void 0===r[o])throw new Error("Invalid option "+o);this._initReportingDataIfNeeded(n),this._reportingLoopActive||this._startReportingLoop(),this.verbosity()>=3&&!function(){var e="",r=0;(0,g["default"])(n,function(t,n){e+="\t"+JSON.stringify(n)+": "+JSON.stringify(t.newValue)+"\n",r++}),r>0&&t._debug("Options modified:\n"+e)}(),this.emit("options",n,this._options,this)}},{key:"_setOptionInternal",value:function(e,t,n,r){var o=r.name,i=n[o],s=typeof i;if(void 0!==i){switch(r.type){case"any":break;case"bool":if(i!==!0&&i!==!1)return void this._error("Invalid boolean option '"+o+"' '"+i+"'");break;case"int":if("number"!==s||Math.floor(i)!==i)return void this._error("Invalid int option '"+o+"' '"+i+"'");if(void 0!==r.min&&void 0!==r.max&&!(i>=r.min&&i<=r.max))return void this._error("Option '"+o+"' out of range '"+i+"' is not between "+r.min+" and "+r.max);break;case"string":switch(s){case"string":break;case"number":i=k.toString(i);break;default:return void this._error("Invalid string option "+o+" "+i)}break;case"array":if("[object Array]"!==Object.prototype.toString.call(i))return void this._error("Invalid type for array option "+o+": found '"+s+"'");break;default:return void this._error("Unknown option type '"+r.type+"'")}var a=this._options[o];if(void 0===a)throw new Error("Attempt to set unknown option "+o);if("object"!==s&&a===i)return void(t[o]=!0);e[o]={oldValue:a,newValue:i},this._options[o]=i}}},{key:"_initReportingDataIfNeeded",value:function(e){var t=this;if(null===this._thriftAuth)this._options.access_token.length>0&&this._options.component_name.length>0&&!function(){t._runtimeGUID=t._platform.runtimeGUID(t._options.component_name),t._thriftAuth=new y.crouton_thrift.Auth({access_token:t._options.access_token});var e={};(0,g["default"])(t._options.tags,function(n,r){return"string"!=typeof n?void t._error("Tracer tag value is not a string: key="+r):void(e[r]=n)}),e["lightstep.tracer_version"]=S.version;var n=t._platform.tracerTags();(0,g["default"])(n,function(t,n){e[n]=t});var r=[];(0,g["default"])(e,function(e,t){r.push(new y.crouton_thrift.KeyValue({Key:k.toString(t),Value:k.toString(e)}))}),t._thriftRuntime=new y.crouton_thrift.Runtime({guid:t._runtimeGUID,start_micros:t._startMicros,group_name:t._options.component_name,attrs:r}),t._info("Initializing thrift reporting data",{component_name:t._options.component_name,access_token:t._thriftAuth.access_token}),t.emit("reporting_initialized")}();else{if(!this._thriftRuntime)return this._error("Inconsistent state: thrift auth initialized without runtime.");if(e.access_token)throw new Error("Cannot change access_token after it has been set.");if(e.component_name)throw new Error("Cannot change component_name after it has been set.");if(e.collector_host)throw new Error("Cannot change collector_host after the connection is established");if(e.collector_port)throw new Error("Cannot change collector_port after the connection is established");if(e.collector_encryption)throw new Error("Cannot change collector_encryption after the connection is established")}}},{key:"addPlatformPlugins",value:function(e){var t=this,n=this._platform.plugins(e);(0,g["default"])(n,function(e){t.addPlugin(e)})}},{key:"addPlugin",value:function(e){var t=e.name();this._plugins[t]||(this._plugins[t]=e,e.addOptions(this))}},{key:"startPlugins",value:function(){var e=this;(0,g["default"])(this._plugins,function(t,n){e._plugins[n].start(e)})}},{key:"addActiveRootSpan",value:function(e){this._activeRootSpanSet[e._guid]=e,this._setActiveRootSpanToYoungest()}},{key:"removeActiveRootSpan",value:function(e){delete this._activeRootSpanSet[e._guid],this._setActiveRootSpanToYoungest()}},{key:"_setActiveRootSpanToYoungest",value:function(){var e=this;this._activeRootSpan=null,(0,g["default"])(this._activeRootSpanSet,function(t){(!e._activeRootSpan||t._beginMicros>e._activeRootSpan._beginMicros)&&(e._activeRootSpan=t)})}},{key:"_objectToUint8Array",value:function(e){var t=void 0;try{t=encodeURIComponent(JSON.stringify(e))}catch(n){return this._error("Could not binary encode carrier data."),null}for(var r=new ArrayBuffer(t.length),o=new Uint8Array(r),i=0;i<t.length;i++){var s=t.charCodeAt(i);if(!(s>=0&&s<=255))return this._error("Unexpected character code"),null;o[i]=s}return o}},{key:"_uint8ArrayToObject",value:function(e){if(!e)return this._error("Array is null"),null;for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);try{return JSON.parse(decodeURIComponent(t))}catch(r){return this._error("Could not decode binary data."),null}}},{key:"log",value:function(){var e=new w(this);return e}},{key:"_clearBuffers",value:function(){this._spanRecords=[],this._internalLogs=[];var e={};(0,g["default"])(this._counters,function(t,n){e[n]=0}),this._counters=e}},{key:"_buffersAreEmpty",value:function(){if(this._spanRecords.length>0)return!1;if(this._internalLogs.length>0)return!1;var e=!0;return(0,g["default"])(this._counters,function(t){t>0&&(e=!1)}),e}},{key:"_addSpanRecord",value:function(e){this._internalAddSpanRecord(e),this.emit("span_added",e)}},{key:"_internalAddSpanRecord",value:function(e){if(!e)return void this._error("Attempt to add null record to buffer");if(this._spanRecords.length>=this._options.max_span_records){var t=Math.floor(this._spanRecords.length*Math.random());this._spanRecords[t]=e,this._counters["spans.dropped"]++}else this._spanRecords.push(e)}},{key:"_restoreRecords",value:function(e,t,n){var r=this;(0,g["default"])(e,function(e){r._internalAddSpanRecord(e)});var o=this._internalLogs;this._internalLogs=[];var i=t.concat(o);(0,g["default"])(i,function(e){r._pushInternalLog(e)}),(0,g["default"])(n,function(e){r._counters[e.Name]?r._counters[e.Name]+=e.Value:r._error("Bad counter name: "+e.Name)})}},{key:"_setupReportOnExit",value:function(){var e=this;if(this._options.disable_report_on_exit)return void this._debug("report-on-exit is disabled.");var t=0,n=function(){t++>0||(e._info("Final flush before exit."),e._flushReport(!1,!0,function(t){t&&e._warn("Final report before exit failed",{error:t,unflushed_spans:e._spanRecords.length,buffer_youngest_micros:e._reportYoungestMicros})}))};this._platform.onBeforeExit(n)}},{key:"_startReportingLoop",value:function(){var e=this;if(this._options.disabled)return void this._info("Not starting reporting loop: instrumentation is disabled.");if(this._options.disable_reporting_loop)return void this._info("Not starting reporting loop: reporting loop is disabled.");if(null!==this._thriftAuth){if(this._reportingLoopActive)return void this._info("Reporting loop already started!");this._info("Starting reporting loop:",this._thriftRuntime),this._reportingLoopActive=!0;var t=0,n=function(){t++>0||e._stopReportingLoop()};this._platform.onBeforeExit(n);var r=function(){e._enqueueNextReport(function(t){e._reportingLoopActive&&r()})},o=Math.floor(Math.random()*this._options.delay_initial_report_millis);T.detachedTimeout(function(){r()},o)}}},{key:"_stopReportingLoop",value:function(){this._debug("Stopping reporting loop"),this._reportingLoopActive=!1,clearTimeout(this._reportTimer),this._reportTimer=null}},{key:"_enqueueNextReport",value:function(e){var t=this;if(!this._reportTimer){var n=this._options.max_reporting_interval_millis;0===this._reportErrorStreak&&this._useClockState&&!this._clockState.isReady()&&(n=Math.min(O.CLOCK_STATE_REFRESH_INTERVAL_MS,n));var r=1+Math.min(7,Math.max(0,this._reportErrorStreak)),o=r*n,i=1+(.5*Math.random()-.25),s=Math.floor(Math.max(0,i*o));this._debug("Delaying next flush for "+s+"ms"),this._reportTimer=T.detachedTimeout(function(){t._reportTimer=null,t._flushReport(!1,!1,e)},s)}}},{key:"_flushReport",value:function(e,t,n){var r=this;n=n||function(e){};var o=this._clockState.isReady(),i=this._clockState.offsetMicros();this._debug("time correction state",{offset_micros:i,active_samples:this._clockState.activeSampleCount(),ready:o});var s=this._spanRecords,a=this._counters,u=this._internalLogs;if(!this._useClockState||e||o||t){if(this._buffersAreEmpty())return this._debug("Skipping empty report"),n(null);this._clearBuffers(),this._debug("Flushing report ("+s.length+" spans)")}else this._debug("Flushing empty report to prime clock state"),s=[],a={},u=[];this._transport.ensureConnection(this._options),console.assert(null!==this._runtimeGUID,"No runtime GUID for Tracer"),(0,g["default"])(s,function(e){e.runtime_guid=r._runtimeGUID});var l=[];(0,g["default"])(a,function(e,t){0!==e&&l.push(new y.crouton_thrift.MetricsSample({name:k.toString(t),double_value:k.toNumber(e)}))});var c=this._useClockState?i:0,p=this._platform.nowMicros(),f=new y.crouton_thrift.ReportRequest({runtime:this._thriftRuntime,oldest_micros:this._reportYoungestMicros,youngest_micros:p,span_records:s,internal_logs:u,internal_metrics:new y.crouton_thrift.Metrics({counts:l}),timestamp_offset_micros:c});this.emit("prereport",f);var _=this._platform.nowMicros();this._transport.report(t,this._thriftAuth,f,function(e,o){var i=r._platform.nowMicros(),s=(p-f.oldest_micros)/1e6;if(e){r._reportErrorStreak++;var a=void 0;a=e.message?""+e.message:""+e,r._warn("Error in report: "+a,{last_report_seconds_ago:s}),r._restoreRecords(f.span_records,f.internal_logs,f.counters),r._counters["reports.errors.send"]++,r.emit("report_error",e,{error:e,streak:r._reportErrorStreak,detached:t})}else r.verbosity()>=4&&r._debug("Report flushed for last "+s+" seconds",{spans_reported:f.span_records.length}),r._reportErrorStreak=0,r._reportYoungestMicros=p,o?(o.timing&&o.timing.receive_micros&&o.timing.transmit_micros?r._clockState.addSample(_,o.timing.receive_micros,o.timing.transmit_micros,i):r._useClockState=!1,o.errors&&o.errors.length>0&&r._warn("Errors in report",o.errors)):r._useClockState=!1,r.emit("report",f,o);return n(e)})}},{key:"stats",value:function(){return{counters:this._counters}}},{key:"_debug",value:function(e,t){this.verbosity()<4||this._printToConsole("log","[LightStep:DEBUG] "+e,t)}},{key:"_info",value:function(e,t){this.verbosity()<3||this._printToConsole("log","[LightStep:INFO] "+e,t)}},{key:"_warn",value:function(e,t){this._counters["internal.warnings"]++,this.verbosity()<3||this._printToConsole("warn","[LightStep:WARN] "+e,t)}},{key:"_error",value:function(e,t){this._counters["internal.errors"]++;var n=this.log().level(O.LOG_ERROR).message(e).payload(t).record();this._pushInternalLog(n);var r=this.verbosity();if(0!==r){var o=Date.now();if(1===r){var i=this._lastVisibleErrorMillis+this._options.error_throttle_millis;if(o<i)return void this._skippedVisibleErrors++;if(this._skippedVisibleErrors>0){var s=this._skippedVisibleErrors+" errors masked since last logged error. Increase 'verbosity' option to see all errors.";this._printToConsole("error","[LightStep:ERROR] "+s,t)}}this._printToConsole("error","[LightStep:ERROR] "+e,t),this._lastVisibleErrorMillis=o,this._skippedVisibleErrors=0}}},{key:"_printToConsole",value:function(e,t,n){this._options.silent||(void 0!==n?console[e](t,n):console[e](t))}},{key:"_pushInternalLog",value:function(e){e&&(this._internalLogs.length>=P?(e.message="MAX_INTERNAL_LOGS limit hit. Last error: "+e.message,this._internalLogs[this._internalLogs.length-1]=e):this._internalLogs.push(e))}}]),t}(f.Tracer);t["default"]=C,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),a=r(s),u=7,l=36e8,c=function(){function e(t){o(this,e),this._nowMicros=t.nowMicros,this._localStoreGet=t.localStoreGet,this._localStoreSet=t.localStoreSet,this._samples=[],this._currentOffsetMicros=0,this._currentOffsetAge=u+1;var n=this._localStoreGet();n&&n.timestamp_micros&&n.timestamp_micros>this._nowMicros()-l&&(this._samples=n.samples.slice(-(u+1))),this.update()}return i(e,[{key:"addSample",value:function(e,t,n,r){var o=Number.MAX_VALUE,i=0;e>0&&t>0&&n>0&&r>0&&(o=r-e-(n-t),i=(t-e+(n-r))/2),this._samples.length===u+1&&this._samples.shift(),this._samples.push({delayMicros:o,offsetMicros:i}),this._currentOffsetAge++,this._localStoreSet({timestamp_micros:this._nowMicros(),samples:this._samples}),this.update()}},{key:"update",value:function(){var e=Number.MAX_VALUE,t=0;if((0,a["default"])(this._samples,function(n){n.delayMicros<e&&(e=n.delayMicros,t=n.offsetMicros)}),t!==this._currentOffsetMicros){var n=0;(0,a["default"])(this._samples,function(e){n+=Math.pow(t-e.offsetMicros,2)}),n=Math.sqrt(n/this._samples.length);var r=3;(this._currentOffsetAge>u||Math.abs(this._currentOffsetMicros-t)<r*n)&&(this._currentOffsetMicros=t,this._currentOffsetAge=0)}}},{key:"offsetMicros",value:function(){return Math.floor(this._currentOffsetMicros)}},{key:"isReady",value:function(){return this._samples.length>3}},{key:"activeSampleCount",value:function(){return this._samples.length}}]),e}();e.exports=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,[{key:"detachedTimeout",value:function(e,t){var n=setTimeout(e,t);return n.unref&&n.unref(),n}}]),e}();t["default"]=new o,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),a=r(s),u=function(){function e(){o(this,e),this._inited=!1,this._span=null}return i(e,[{key:"name",value:function(){return"instrument_page_load"}},{key:"addOptions",value:function(e){}},{key:"start",value:function(e){this._inited||(this._inited=!0,"object"==typeof window&&"object"==typeof document&&(this._ensureSpanStarted(e),document.addEventListener("readystatechange",this._handleReadyStateChange.bind(this))))}},{key:"stop",value:function(){}},{key:"_ensureSpanStarted",value:function(e){this._span||(this._span=e.startSpan("document/load"),e.addActiveRootSpan(this._span))}},{key:"_handleReadyStateChange",value:function(){if(this._span){var e=this._span,t=document.readyState,n=void 0;"complete"===t&&(n={},window.performance&&performance.timing&&(this._addTimingSpans(e,performance.timing),n["window.performance.timing"]=performance.timing)),e.logEvent("document.readystatechange "+t,n),"complete"===t&&(e.tracer()&&e.tracer().removeActiveRootSpan(e.tracer()),e.finish())}}},{key:"_copyNavigatorProperties",value:function(e){var t={};for(var n in e)try{var r=e[n];switch(n){case"plugins":for(var o=[],i=0;i<r.length;i++){var s=r.item(i);o.push({name:s.name,description:s.description})}t[n]=o;break;case"mimeTypes":for(var a=[],u=0;u<r.length;u++){var l=r.item(u);a.push({type:l.type,description:l.description,suffixes:l.suffixes})}t[n]=a;break;default:t[n]=r}}catch(c){}return t}},{key:"_addTimingSpans",value:function(e,t){var n=this;if(e){if(e.setTag("user_agent",navigator.userAgent),(0,a["default"])(t,function(t,r){if("number"==typeof t&&0!==t){var o=void 0;"navigationStart"===r&&"object"==typeof navigator&&(o={navigator:n._copyNavigatorProperties(navigator)}),e.log({message:"document "+r,payload:o},t)}}),window.chrome&&window.chrome.loadTimes){var r=window.chrome.loadTimes();r&&e.log({message:"window.chrome.loadTimes()",payload:r},t.domComplete)}e.setBeginMicros(1e3*t.navigationStart),e.tracer().startSpan("document/time_to_first_byte",{childOf:e}).setBeginMicros(1e3*t.requestStart).setEndMicros(1e3*t.responseStart).finish(),e.tracer().startSpan("document/response_transfer",{childOf:e}).setBeginMicros(1e3*t.responseStart).setEndMicros(1e3*t.responseEnd).finish(),e.tracer().startSpan("document/dom_load",{childOf:e}).setBeginMicros(1e3*t.domLoading).setEndMicros(1e3*t.domInteractive).finish()}}}]),e}();e.exports=new u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){if("undefined"==typeof document||!document.cookie)return null;for(var e=document.cookie.split(";"),t={},n=0,r=0;r<e.length;r++){var o=e[r].split("=",2);if(2===o.length){var i=o[0].replace(/^\s+/,"").replace(/\s+$/,"");t[i]=decodeURIComponent(o[1]);try{t[i]=JSON.parse(t[i])}catch(s){}n++}}return n>0?t:null}function s(e){for(var t=e.getAllResponseHeaders(),n=t.replace(/\s+$/,"").split(/\n/),r=0;r<n.length;r++)n[r]=n[r].replace(/\r/g,"").replace(/^\s+/,"").replace(/\s+$/,"");return n}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),l=r(u),c={};"object"==typeof window&&"undefined"!=typeof window.XMLHttpRequest&&(c={XMLHttpRequest:XMLHttpRequest,open:XMLHttpRequest.prototype.open,send:XMLHttpRequest.prototype.send,setRequestHeader:XMLHttpRequest.prototype.setRequestHeader});var p=function(){function e(){o(this,e),this._enabled=this._isValidContext(),this._proxyInited=!1,this._internalExclusions=[],this._tracer=null,this._handleOptions=this._handleOptions.bind(this),!this._enabled}return a(e,[{key:"name",value:function(){return"instrument_xhr"}},{key:"addOptions",value:function(e){e.addOption("xhr_instrumentation",{type:"bool",defaultValue:!1}),e.addOption("xhr_url_inclusion_patterns",{type:"array",defaultValue:[/.*/]}),e.addOption("xhr_url_exclusion_patterns",{type:"array",defaultValue:[]})}},{key:"start",value:function(e){if(this._enabled){this._tracer=e;var t=e.options();this._addServiceHostToExclusions(t),this._handleOptions({},t),e.on("options",this._handleOptions)}}},{key:"stop",value:function(){if(this._enabled){var e=c.XMLHttpRequest.prototype;e.open=c.open,e.send=c.send}}},{key:"_handleOptions",value:function(e,t){var n=e.collector_host;if(n&&this._addServiceHostToExclusions(t),!this._proxyInited&&t.xhr_instrumentation){this._proxyInited=!0;var r=c.XMLHttpRequest.prototype;r.setRequestHeader=this._instrumentSetRequestHeader(),r.open=this._instrumentOpen(),r.send=this._instrumentSend()}}},{key:"_addServiceHostToExclusions",value:function(e){function t(e){return(""+e).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}if(0!==e.collector_host.length){var n=t(e.collector_host),r=t(e.collector_port),o=[new RegExp("^https?://"+n+":"+r)];"80"===r?o.push(new RegExp("^http://"+n)):"443"===r&&o.push(new RegExp("^https://"+n)),this._internalExclusions=o}}},{key:"_isValidContext",value:function(){return"undefined"!=typeof window&&(!!window.XMLHttpRequest&&!!window.XMLHttpRequest.prototype)}},{key:"_instrumentSetRequestHeader",value:function(){return function(e,t){return this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=t,c.setRequestHeader.apply(this,arguments)}}},{key:"_instrumentOpen",value:function(){var e=this,t=this._tracer;return function(n,r,o,a,u){if(!e._shouldTrace(t,this,r))return c.open.apply(this,arguments);var p=t.startSpan("XMLHttpRequest");t.addActiveRootSpan(p),this.__tracer_span=p,this.__tracer_url=r;var f={method:n,url:r,async:o,user:a};r&&(f.url_pathname=r.split("?")[0]);var _={};(0,l["default"])(f,function(e,t){_[t]=e}),_.cookies=i();var d=void 0===o||o;d&&this.addEventListener("readystatechange",function(){if(0===this.readyState)p.log({readyState:0,event:"unsent"});else if(1===this.readyState)p.log({readyState:1,event:"sending"});else if(2===this.readyState)p.log({readyState:2,event:"headers received",method:n,url:r,openPayload:_,headers:s(this)}),p.addTags(f);else if(3===this.readyState)p.log({readyState:3,event:"loading"});else if(4===this.readyState){var e=this.responseType;p.log({readyState:4,url:r,method:n,headers:s(this),status:this.status,statusText:this.statusText,responseType:e}),t.removeActiveRootSpan(p),p.finish()}else p.log({readyState:this.readyState})});var h=c.open.apply(this,arguments);return d||(t.removeActiveRootSpan(p),p.finish()),h}}},{key:"_instrumentSend",value:function(){var e=this,t=this._tracer;return function(){if(!e._shouldTrace(t,this,this.__tracer_url))return c.send.apply(this,arguments);var n=this.__tracer_span;if(!n)return c.send.apply(this,arguments);var r=Array.prototype.slice.call(arguments),o=void 0;if(1===r.length){r[0]&&r[0].length&&(o=r[0].length);try{r=JSON.parse(r[0])}catch(i){}}var s=void 0===o?"":", data length="+o;return n.log({event:"send",data_length:s}),c.send.apply(this,arguments)}}},{key:"_shouldTrace",value:function(e,t,n){if(!e)return!1;var r=e.options();if(r.disabled)return!1;if(!n)return!1;for(var o in this._internalExclusions)if(this._internalExclusions.hasOwnProperty(o)){var i=this._internalExclusions[o];if(i.test(n))return!1}var s=!1;for(var a in r.xhr_url_inclusion_patterns)if(r.xhr_url_inclusion_patterns.hasOwnProperty(a)){var u=r.xhr_url_inclusion_patterns[a];if(u.test(n)){s=!0;break}}if(!s)return!1;for(var l in r.xhr_url_exclusion_patterns)if(r.xhr_url_exclusion_patterns.hasOwnProperty(l)){var c=r.xhr_url_exclusion_patterns[l];if(c.test(n))return!1}return!0}}]),e}();e.exports=new p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3),s=function(){function e(){r(this,e),this._enabled=!1,this._tracer=null,this._optionsCb=this._handleOptions.bind(this),this._logAddedCb=this._handleLogAdded.bind(this)}return o(e,[{key:"name",value:function(){return"log_to_console"}},{key:"addOptions",value:function(e){e.addOption("log_to_console",{type:"bool",defaultValue:!1}),e.on("options",this._optionsCb)}},{key:"start",value:function(e,t){this._tracer=e}},{key:"stop",value:function(){this._tracer.removeListener("options",this._optionsCb)}},{key:"_handleOptions",value:function(e,t,n){var r=t.log_to_console;this._enabled!==r&&(this._enabled=r,this._enabled?n.on("log_added",this._logAddedCb):n.removeListener("log_added",this._logAddedCb))}},{key:"_handleLogAdded",value:function(e){var t=i.LOG_STRING_TO_LEVEL[e.level],n=e.message;if(n){var r=e.payload_json;if(r)try{r=JSON.parse(r)}catch(o){}switch(t){case i.LOG_ERROR:case i.LOG_FATAL:void 0!==r?console.error(n,r):console.error(n);break;case i.LOG_WARN:void 0!==r?console.warn(n,r):console.warn(n);break;case i.LOG_INFO:default:void 0!==r?console.log(n,r):console.log(n)}}}}]),e}();e.exports=new s},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var i="function"!=typeof Object.create&&"~";o.prototype._events=void 0,o.prototype.listeners=function(e,t){var n=i?i+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,a=new Array(s);o<s;o++)a[o]=r[o].fn;return a},o.prototype.emit=function(e,t,n,r,o,s){var a=i?i+e:e;if(!this._events||!this._events[a])return!1;var u,l,c=this._events[a],p=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,s),!0}for(l=1,u=new Array(p-1);l<p;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var f,_=c.length;for(l=0;l<_;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),p){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;default:if(!u)for(f=1,u=new Array(p-1);f<p;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0},o.prototype.on=function(e,t,n){var o=new r(t,n||this),s=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},o.prototype.once=function(e,t,n){var o=new r(t,n||this,(!0)),s=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},o.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events||!this._events[o])return this;var s=this._events[o],a=[];if(t)if(s.fn)(s.fn!==t||r&&!s.once||n&&s.context!==n)&&a.push(s);else for(var u=0,l=s.length;u<l;u++)(s[u].fn!==t||r&&!s[u].once||n&&s[u].context!==n)&&a.push(s[u]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[i?i+e:e]:this._events=i?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=i,e.exports=o},function(e,t){e.exports={name:"lightstep-tracer",version:"0.20.2",main:"index.js",engines:{node:">=0.12.0"},scripts:{test:"rm -f test/results/*.json && node node_modules/mocha/bin/mocha -c test/unittest_node.js"},license:"MIT",repository:{type:"git",url:"http://github.com/lightstep/lightstep-tracer-javascript.git"},dependencies:{async:"1.5.0",eventemitter3:"1.1.1","source-map-support":"0.3.3",thrift:"0.9.2"},devDependencies:{"babel-cli":"6.14.0","babel-core":"6.3.26","babel-loader":"6.2.0","babel-plugin-add-module-exports":"0.1.2","babel-plugin-check-es2015-constants":"6.7.2","babel-plugin-transform-es2015-arrow-functions":"6.5.2","babel-plugin-transform-es2015-block-scoped-functions":"6.6.5","babel-plugin-transform-es2015-block-scoping":"6.7.1","babel-plugin-transform-es2015-classes":"6.6.5","babel-plugin-transform-es2015-computed-properties":"6.6.5","babel-plugin-transform-es2015-destructuring":"6.6.5","babel-plugin-transform-es2015-duplicate-keys":"6.6.4","babel-plugin-transform-es2015-literals":"6.5.0","babel-plugin-transform-es2015-modules-commonjs":"6.7.4","babel-plugin-transform-es2015-object-super":"6.6.5","babel-plugin-transform-es2015-parameters":"6.7.0","babel-plugin-transform-es2015-spread":"6.6.5","babel-plugin-transform-es2015-sticky-regex":"6.5.0","babel-plugin-transform-es2015-template-literals":"6.6.5","babel-plugin-transform-es2015-unicode-regex":"6.5.0","babel-polyfill":"6.3.14","babel-preset-es2015":"6.3.13",chai:"3.4.1",clone:"1.0.2",
colors:"1.1.2",eslint:"2.4.0","eslint-config-airbnb":"6.2.0","eslint-plugin-react":"4.2.3",istanbul:"0.4.4","json-loader":"0.5.4",mocha:"2.3.4",opentracing:"0.14.0",shelljs:"0.5.3","sprintf-js":"1.0.3",underscore:"1.8.3","watch-trigger":"0.0.5",webpack:"1.12.9"}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function o(e){n(this,o),this._buffer=e};t["default"]=r},function(e,t){"use strict";e.exports={SPAN_KIND:"span.kind",SPAN_KIND_RPC_CLIENT:"client",SPAN_KIND_RPC_SERVER:"server",ERROR:"error",COMPONENT:"component",SAMPLING_PRIORITY:"sampling.priority",PEER_SERVICE:"peer.service",PEER_HOSTNAME:"peer.hostname",PEER_HOST_IPV4:"peer.ipv4",PEER_HOST_IPV6:"peer.ipv6",PEER_PORT:"peer.port",HTTP_URL:"http.url",HTTP_METHOD:"http.method",HTTP_STATUS_CODE:"http.status_code"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){_=e}function u(){return h}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.initGlobalTracer=a,t.globalTracer=u;var c=n(9),p=r(c),f=new p["default"],_=null,d=function(e){function t(){return o(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"startSpan",value:function(){var e=_||f;return e.startSpan.apply(e,arguments)}},{key:"inject",value:function(){var e=_||f;return e.inject.apply(e,arguments)}},{key:"extract",value:function(){var e=_||f;return e.extract.apply(e,arguments)}}]),t}(p["default"]),h=new d}])});