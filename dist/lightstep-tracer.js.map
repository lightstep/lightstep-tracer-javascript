{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f9d9ffb01cc7a0d7239d","webpack:///./src/lib.js","webpack:///./src/imp/tracer_imp.js","webpack:///./~/eventemitter3/index.js","webpack:///./~/opentracing/lib/index.js","webpack:///./~/opentracing/lib/global_tracer.js","webpack:///./~/opentracing/lib/tracer.js","webpack:///./~/opentracing/lib/span.js","webpack:///./~/opentracing/lib/noop.js","webpack:///./~/opentracing/lib/span_context.js","webpack:///./~/opentracing/lib/constants.js","webpack:///./~/opentracing/lib/functions.js","webpack:///./~/opentracing/lib/reference.js","webpack:///./~/opentracing/lib/ext/tags.js","webpack:///./~/opentracing/lib/binary_carrier.js","webpack:///./src/imp/span_context_imp.js","webpack:///./src/_each.js","webpack:///./src/imp/span_imp.js","webpack:///./src/imp/coerce.js","webpack:///./src/constants.js","webpack:///./src/platform_abstraction_layer.js","webpack:///./src/imp/platform/browser/platform_browser.js","webpack:///./src/imp/platform/browser/options_parser.js","webpack:///./src/imp/platform/browser/util.js","webpack:///./src/plugins/instrument_xhr.js","webpack:///./src/plugins/instrument_document_load.js","webpack:///./src/imp/platform/browser/transport_httpjson.js","webpack:///./src/imp/platform/browser/thrift.js","webpack:///./src/imp/platform/browser/generated/thrift_all.js","webpack:///./src/imp/platform/browser/crouton_thrift.js","webpack:///./src/imp/util/clock_state.js","webpack:///./src/imp/log_builder.js","webpack:///./src/imp/globals.js","webpack:///./package.json","webpack:///./src/imp/util/util.js","webpack:///./src/plugins/log_to_console.js"],"names":["library","Tracer","initLibrary","module","exports","ClockState","require","LogBuilder","coerce","constants","globals","packageObject","util","CARRIER_TRACER_STATE_PREFIX","CARRIER_BAGGAGE_PREFIX","DEFAULT_COLLECTOR_HOSTNAME","DEFAULT_COLLECTOR_PORT_TLS","DEFAULT_COLLECTOR_PORT_PLAIN","MAX_INTERNAL_LOGS","_singleton","opts","_delegateEventEmitterMethods","setOptions","_platform","_runtimeGUID","guid","override_runtime_guid","_plugins","_options","_optionDescs","_makeOptionsTable","_opentracing","opentracing_module","now","nowMicros","_startMicros","_thriftAuth","_thriftRuntime","logger","warn","msg","payload","_warn","error","err","_error","_transport","override_transport","_reportingLoopActive","_reportYoungestMicros","_reportTimer","_reportErrorStreak","_lastVisibleErrorMillis","_skippedVisibleErrors","_activeRootSpanSet","_activeRootSpan","_useClockState","_clockState","localStoreGet","key","collector_host","localStoreSet","value","_spanRecords","_counters","_internalLogs","_flushIsActive","addPlugin","addPlatformPlugins","setPlatformOptions","options","_setupReportOnExit","_info","startPlugins","self","_ee","methodName","apply","arguments","addOption","type","min","max","defaultValue","name","fields","parentCtxImp","references","i","length","ref","REFERENCE_CHILD_OF","REFERENCE_FOLLOWS_FROM","context","referencedContext","traceGUID","_traceGUID","generateTraceGUIDForRootSpan","spanImp","generateUUID","addTags","default_span_tags","setBeginMicros","setParentGUID","_guid","emit","spanContext","format","carrier","FORMAT_HTTP_HEADERS","FORMAT_TEXT_MAP","_injectToTextMap","FORMAT_BINARY","forEachBaggageItem","_extractTextMap","foundFields","toLowerCase","substr","suffix","setBaggageItem","done","disabled","_flushReport","v","verbosity","undefined","userOptions","val","desc","push","console","assert","Error","collector_port","collector_encryption","modified","unchanged","_setOptionInternal","_initReportingDataIfNeeded","_startReportingLoop","optionsString","count","JSON","stringify","newValue","_debug","valueType","Math","floor","toString","Object","prototype","call","oldValue","access_token","component_name","runtimeGUID","Auth","tags","version","platformTags","tracerTags","thriftAttrs","KeyValue","Key","Value","Runtime","start_micros","group_name","attrs","pluginSet","plugins","plugin","addOptions","start","span","_setActiveRootSpanToYoungest","_beginMicros","obj","jsonString","encodeURIComponent","e","buffer","ArrayBuffer","view","Uint8Array","code","charCodeAt","arr","String","fromCharCode","parse","decodeURIComponent","b","counters","unused","countersAllZero","record","_internalAddSpanRecord","max_span_records","index","random","spans","internalLogs","currentInternalLogs","toAdd","concat","log","_pushInternalLog","Name","disable_report_on_exit","finalFlushOnce","finalFlush","unflushed_spans","buffer_youngest_micros","onBeforeExit","disable_reporting_loop","stopReportingOnce","stopReporting","_stopReportingLoop","loop","_enqueueNextReport","delay","delay_initial_report_millis","detachedTimeout","clearTimeout","reportInterval","max_reporting_interval_millis","isReady","CLOCK_STATE_REFRESH_INTERVAL_MS","backOff","basis","jitter","manual","detached","clockReady","clockOffsetMicros","offsetMicros","offset_micros","active_samples","activeSampleCount","ready","spanRecords","_buffersAreEmpty","_clearBuffers","ensureConnection","runtime_guid","thriftCounters","MetricsSample","double_value","toNumber","timestampOffset","report","ReportRequest","runtime","oldest_micros","youngest_micros","span_records","internal_logs","internal_metrics","Metrics","counts","timestamp_offset_micros","originMicros","res","destinationMicros","reportWindowSeconds","errString","message","last_report_seconds_ago","_restoreRecords","streak","spans_reported","timing","receive_micros","transmit_micros","addSample","errors","_printToConsole","level","LOG_ERROR","Date","nextVisible","error_throttle_millis","s","silent","SpanContextImp","_baggage","f","spanGUID","_each","cb","hasOwnProperty","SpanImp","_tracerImp","_ctx","_operationName","keyValuePairs","_tags","timestamp","argumentType","tsMicros","keyStr","valStr","log_field_key_hard_limit","log_field_value_hard_limit","LogRecord","timestamp_micros","_log_records","finishTime","end","tracer","_ended","_endMicros","_errorFlag","parent_span_guid","micros","urlPrefix","LIGHTSTEP_APP_URL_PREFIX","accessToken","_addSpanRecord","_toThrift","attributes","SpanRecord","span_guid","trace_guid","span_name","error_flag","log_records","Span","toBoolean","Number","LOG_INFO","LOG_WARN","LOG_FATAL","LOG_LEVEL_TO_STRING","LOG_STRING_TO_LEVEL","I","W","E","F","JOIN_ID_PREFIX","Platform","Transport","thrift","crouton_thrift","optionsParser","kRuntimeGUIDCookiePrefix","kSessionIDCookieKey","kCookieTimeToLiveSeconds","nowMicrosImp","window","performance","navigationStart","PlatformBrowser","groupName","cookieKey","uuid","cookie","_generateLongUUID","sessionID","p0","abs","p1","args","addEventListener","imp","tracerOpts","browserOpts","parseScriptElementOptions","parseURLQueryOptions","sessionStorage","getItem","_ignored","setItem","lib","init_global_tracer","initGlobalTracer","opentracing","hostScriptElement","scripts","document","getElementsByTagName","urlQueryParameters","defaults","vars","qi","location","href","indexOf","slice","hashes","replace","split","hash","dataset","componentName","collectorHost","collectorPort","parseInt","collectorEncryption","enable","init","xhrInstrumentation","xhr_instrumentation","params","lightstep_verbosity","lightstep_log_to_console","log_to_console","ttl","path","domain","secure","newCookie","toUTCString","proxied","XMLHttpRequest","open","send","setRequestHeader","getCookies","cookies","data","parts","getResponseHeaders","xhr","raw","getAllResponseHeaders","InstrumentXHR","_enabled","_isValidContext","_proxyInited","_internalExclusions","_tracer","_handleOptions","bind","tracerImp","currentOptions","_addServiceHostToExclusions","on","proto","current","serviceHost","_instrumentSetRequestHeader","_instrumentOpen","_instrumentSend","escapeRegExp","str","host","port","set","RegExp","header","__requestHeaders","method","url","asyncArg","user","password","_shouldTrace","startSpan","addActiveRootSpan","__tracer_span","__tracer_url","async","url_pathname","openPayload","readyState","event","headers","responseType","status","statusText","removeActiveRootSpan","finish","result","Array","len","lenStr","data_length","ex","test","include","xhr_url_inclusion_patterns","inc","xhr_url_exclusion_patterns","InstrumentPageLoad","_inited","_span","_ensureSpanStarted","_handleReadyStateChange","state","_addTimingSpans","logEvent","nav","dst","p","item","description","suffixes","parentImp","setTag","navigator","userAgent","_copyNavigatorProperties","chrome","loadTimes","chromeTimes","domComplete","childOf","requestStart","setEndMicros","responseStart","responseEnd","domLoading","domInteractive","TransportBrowser","_host","_port","_encryption","auth","_reportAJAX","_reportAsyncScript","protocol","onreadystatechange","resp","responseText","exception","authJSON","reportJSON","elem","createElement","defer","src","hostElem","appendChild","Thrift","TProtocolException","TProtocolExceptionType","UNKNOWN","read","input","readStructBegin","ret","readFieldBegin","fname","ftype","fid","Type","STOP","STRING","readString","skip","readFieldEnd","readStructEnd","write","output","writeStructBegin","writeFieldBegin","writeString","writeFieldEnd","writeFieldStop","writeStructEnd","NamedCounter","I64","readI64","writeI64","LIST","_size0","_rtmp34","_etype3","readListBegin","etype","size","_i5","elem6","readListEnd","writeListBegin","STRUCT","iter7","writeListEnd","stable_name","thread_id","filename","line_number","stack_frames","payload_json","_size8","_rtmp312","_etype11","_i13","elem14","_size15","_rtmp319","_etype18","_i20","elem21","BOOL","readBool","iter22","iter23","writeBool","TraceJoinId","TraceKey","join_ids","_size24","_rtmp328","_etype27","_i29","elem30","_size31","_rtmp335","_etype34","_i36","elem37","_size38","_rtmp342","_etype41","_i43","elem44","iter45","iter46","iter47","Timing","SampleCount","int64_value","DOUBLE","readDouble","writeDouble","gauges","_size48","_rtmp352","_etype51","_i53","elem54","_size55","_rtmp359","_etype58","_i60","elem61","iter62","iter63","_size64","_rtmp368","_etype67","_i69","elem70","_size71","_rtmp375","_etype74","_i76","elem77","_size78","_rtmp382","_etype81","_i83","elem84","_size85","_rtmp389","_etype88","_i90","elem91","iter92","iter93","iter94","iter95","Command","disable","ReportResponse","commands","_size96","_rtmp3100","_etype99","_i101","elem102","_size103","_rtmp3107","_etype106","_i108","elem109","iter110","iter111","kMaxOffsetAge","kStoredSamplesTTLMicros","_nowMicros","_localStoreGet","_localStoreSet","_samples","_currentOffsetMicros","_currentOffsetAge","storedData","samples","update","receiveMicros","transmitMicros","latestDelayMicros","MAX_VALUE","latestOffsetMicros","shift","delayMicros","minDelayMicros","bestOffsetMicros","sample","pow","sqrt","kSGATE","_runtime","_record","_addLogRecord","num","stableName","flag","_encodePayload","payloadJSON","PackageGlobals","Util","callback","timer","setTimeout","unref","LogToConsole","_optionsCb","_logAddedCb","_handleLogAdded","removeListener","enabled"],"mappings":"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E7F,kDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,OAAO;AAC1B,oBAAmB,OAAO;AAC1B;AACA,oBAAmB,YAAY;AAC/B;AACA;AACA;AACA,oBAAmB,MAAM;AACzB;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA,qBAAoB,KAAK;AACzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,YAAY;AAChC;AACA;AACA;AACA,qBAAoB,OAAO;AAC3B,qBAAoB,IAAI;AACxB;AACA;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD,oBAAoB;AAC7E;AACA,qBAAoB,OAAO;AAC3B,qBAAoB,IAAI;AACxB;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA,MAAK;AACL;AACA;;AAEA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,EAAC;;AAED;;AAEA,mC;;;;;;AC/NA;;AAEA;AACA;AACA,EAAC;;AAED,qGAAoG,mBAAmB,EAAE,mBAAmB,kGAAkG;;AAE9O,iCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB;;AAEA;;AAEA,wCAAuC,6BAA6B,YAAY,EAAE,OAAO,iBAAiB,mBAAmB,uBAAuB,4EAA4E,EAAE,EAAE,sBAAsB,eAAe,EAAE;;AAE3Q,4CAA2C,kBAAkB,kCAAkC,qEAAqE,EAAE,EAAE,OAAO,kBAAkB,EAAE,YAAY;;AAE/M,kDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB;AACpB;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,OAAO;AAC1B;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB,OAAO;AAC3B;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,IAAI;AACvB;;AAEA,MAAK;AACL;AACA;;AAEA;AACA,6CAA4C;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,OAAO;AAC3B;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA,iBAAgB;AAChB;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA,MAAK;AACL;AACA;;AAEA;;AAEA,MAAK;AACL;AACA;;AAEA;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA,EAAC;;AAED;;AAEA,iC;;;;;;ACpUA;;AAEA;AACA;AACA,EAAC;AACD;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;ACpCA;;AAEA;AACA;AACA,EAAC;;AAED,kDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,yC;;;;;;ACxBA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;A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","file":"lightstep-tracer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lightstep\"] = factory();\n\telse\n\t\troot[\"lightstep\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f9d9ffb01cc7a0d7239d\n **/","import Tracer from './imp/tracer_imp';\nimport { Platform } from './platform_abstraction_layer';\n\nconst library = {\n    Tracer : Tracer,\n};\n\nPlatform.initLibrary(library);\nmodule.exports = library;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib.js\n **/","//============================================================================//\n// Imports\n//============================================================================//\n\nimport EventEmitter from 'eventemitter3';\nimport opentracing from 'opentracing';\n\nimport SpanContextImp from './span_context_imp';\nimport SpanImp from './span_imp';\nimport _each from '../_each';\nimport { Platform, Transport, crouton_thrift } from '../platform_abstraction_layer';    // eslint-disable-line camelcase\n\nconst ClockState    = require('./util/clock_state');\nconst LogBuilder    = require('./log_builder');\nconst coerce        = require('./coerce');\nconst constants     = require('../constants');\nconst globals       = require('./globals');\nconst packageObject = require('../../package.json');\nconst util          = require('./util/util');\n\nconst CARRIER_TRACER_STATE_PREFIX = 'ot-tracer-';\nconst CARRIER_BAGGAGE_PREFIX = 'ot-baggage-';\n\nconst DEFAULT_COLLECTOR_HOSTNAME   = 'collector.lightstep.com';\nconst DEFAULT_COLLECTOR_PORT_TLS   = 443;\nconst DEFAULT_COLLECTOR_PORT_PLAIN = 80;\n\n// Internal errors should be rare. Set a low limit to ensure a cascading failure\n// does not compound an existing problem by trying to send a great deal of\n// internal error data.\nconst MAX_INTERNAL_LOGS = 20;\n\nlet _singleton = null;\n\nexport default class Tracer extends opentracing.Tracer {\n\n    constructor(opts) {\n        super();\n\n        this._delegateEventEmitterMethods();\n\n        opts = opts || {};\n\n        if (!_singleton) {\n            globals.setOptions(opts);\n            _singleton = this;\n        }\n\n        // Platform abstraction layer\n        this._platform = new Platform(this);\n        this._runtimeGUID = opts.guid || this.override_runtime_guid || null;  // Set once the group name is set\n        this._plugins = {};\n        this._options = {};\n        this._optionDescs = [];\n        this._makeOptionsTable();\n\n        this._opentracing = opentracing;\n        if (opts.opentracing_module) {\n            this._opentracing = opts.opentracing_module;\n        }\n\n        let now = this._platform.nowMicros();\n\n        // The thrift authentication and runtime struct are created as soon as\n        // the necessary initialization options are available.\n        this._startMicros = now;\n        this._thriftAuth = null;\n        this._thriftRuntime = null;\n\n        let logger = {\n            warn  : (msg, payload) => { this._warn(msg, payload); },\n            error : (err, payload) => { this._error(err, payload); },\n        };\n        this._transport = (opts ? opts.override_transport : null) || new Transport(logger);\n\n        this._reportingLoopActive = false;\n        this._reportYoungestMicros = now;\n        this._reportTimer = null;\n        this._reportErrorStreak = 0;    // Number of consecutive errors\n        this._lastVisibleErrorMillis = 0;\n        this._skippedVisibleErrors = 0;\n\n        // Set addActiveRootSpan() for detail\n        this._activeRootSpanSet = {};\n        this._activeRootSpan = null;\n\n        // For clock skew adjustment.\n        this._useClockState = true;\n        this._clockState = new ClockState({\n            nowMicros     : () => this._platform.nowMicros(),\n            localStoreGet : () => {\n                let key = `clock_state/${this._options.collector_host}`;\n                return this._platform.localStoreGet(key);\n            },\n            localStoreSet : (value) => {\n                let key = `clock_state/${this._options.collector_host}`;\n                return this._platform.localStoreSet(key, value);\n            },\n        });\n\n        // Span reporting buffer and per-report data\n        // These data are reset on every successful report.\n        this._spanRecords = [];\n\n        // The counter names need to match those accepted by the collector.\n        // These are internal counters only.\n        this._counters = {\n            'internal.errors'        : 0,\n            'internal.warnings'      : 0,\n            'spans.dropped'          : 0,\n            'logs.dropped'           : 0,\n            'logs.keys.over_limit'   : 0,\n            'logs.values.over_limit' : 0,\n            'reports.errors.send'    : 0,\n        };\n\n        // For internal (not client) logs reported to the collector\n        this._internalLogs = [];\n\n        // Current runtime state / status\n        this._flushIsActive = false;\n\n        // Built-in plugins\n        this.addPlugin(require('../plugins/log_to_console'));\n\n        // Initialize the platform options after the built-in plugins in\n        // case any of those options affect the built-ins.\n        this.addPlatformPlugins(opts);\n        this.setPlatformOptions(opts);\n\n        // Set constructor arguments\n        if (opts) {\n            this.options(opts);\n        }\n\n        // This relies on the options being set: call this last.\n        this._setupReportOnExit();\n\n        this._info(`Tracer created with guid ${this._runtimeGUID}`);\n\n        this.startPlugins();\n    }\n\n    // Morally speaking, Tracer also inherits from EventEmmiter, but we must\n    // fake it via composition.\n    //\n    // If not obvious on inspection: a hack.\n    _delegateEventEmitterMethods() {\n        let self = this;\n        this._ee = new EventEmitter();\n        // The list of methods at https://nodejs.org/api/events.html\n        _each([\n            'addListener',\n            'emit',\n            'eventNames',\n            'getMaxListeners',\n            'listenerCount',\n            'listeners',\n            'on',\n            'once',\n            'prependListener',\n            'prependOnceListener',\n            'removeAllListeners',\n            'removeListener',\n            'setMaxListeners',\n        ], (methodName) => {\n            self[methodName] = function () {\n                if (self._ee[methodName]) {\n                    self._ee[methodName].apply(self._ee, arguments);\n                }\n            };\n        });\n    }\n\n    _makeOptionsTable() {\n        /* eslint-disable key-spacing, no-multi-spaces */\n\n        // NOTE: make 'verbosity' the first option so it is processed first on\n        // options changes and takes effect as soon as possible.\n        this.addOption('verbosity',             { type : 'int', min: 0, max: 9, defaultValue: 1 });\n\n        // Core options\n        this.addOption('access_token',          { type: 'string',  defaultValue: '' });\n        this.addOption('component_name',        { type: 'string',  defaultValue: '' });\n        this.addOption('collector_host',        { type: 'string',  defaultValue: DEFAULT_COLLECTOR_HOSTNAME });\n        this.addOption('collector_port',        { type: 'int',     defaultValue: DEFAULT_COLLECTOR_PORT_TLS });\n        this.addOption('collector_encryption',  { type: 'string',  defaultValue: 'tls' });\n        this.addOption('tags',                  { type: 'any',     defaultValue: {} });\n        this.addOption('max_reporting_interval_millis',  { type: 'int',     defaultValue: 2500 });\n\n        // Non-standard, may be deprecated\n        this.addOption('disabled',              { type: 'bool',    defaultValue: false });\n        this.addOption('max_span_records',      { type: 'int',     defaultValue: 4096 });\n        this.addOption('default_span_tags',     { type: 'any',     defaultValue: {} });\n        this.addOption('report_timeout_millis', { type: 'int',     defaultValue: 30000 });\n        this.addOption('gzip_json_requests',    { type: 'bool',    defaultValue: true });\n        this.addOption('disable_reporting_loop', { type: 'bool',    defaultValue: false });\n        this.addOption('disable_report_on_exit', { type: 'bool',    defaultValue: false });\n        this.addOption('delay_initial_report_millis', { type: 'int', defaultValue: 1000 });\n        this.addOption('error_throttle_millis', { type: 'int',     defaultValue: 60000 });\n\n        // Debugging options\n        //\n        // These are not part of the supported public API.\n        //\n        // If false, SSL certificate verification is skipped. Useful for testing.\n        this.addOption('certificate_verification',      { type: 'bool',    defaultValue: true });\n        // I.e. report only on explicit calls to flush()\n\n        // Unit testing options\n        this.addOption('override_transport',            { type : 'any',    defaultValue: null });\n        this.addOption('silent',                        { type : 'bool',   defaultValue: false });\n\n        // Hard upper limits to protect against worst-case scenarios for log field sizes.\n        this.addOption('log_field_key_hard_limit',   { type: 'int',     defaultValue: 256 });\n        this.addOption('log_field_value_hard_limit', { type: 'int',     defaultValue: 1024 });\n\n        /* eslint-disable key-spacing, no-multi-spaces */\n    }\n\n    // ---------------------------------------------------------------------- //\n    // opentracing.Tracer SPI\n    // ---------------------------------------------------------------------- //\n\n    _startSpan(name, fields) {\n        // First, assemble the SpanContextImp for our SpanImp.\n        let parentCtxImp = null;\n        fields = fields || {};\n        if (fields.references) {\n            for (let i = 0; i < fields.references.length; i++) {\n                let ref = fields.references[i];\n                let type = ref.type();\n                if (type === this._opentracing.REFERENCE_CHILD_OF ||\n                    type === this._opentracing.REFERENCE_FOLLOWS_FROM) {\n                    let context = ref.referencedContext();\n                    if (!context) {\n                        this._error('Span reference has an invalid context', context);\n                        continue;\n                    }\n                    parentCtxImp = context;\n                    break;\n                }\n            }\n        }\n\n        let traceGUID = parentCtxImp ? parentCtxImp._traceGUID : this.generateTraceGUIDForRootSpan();\n        let spanImp = new SpanImp(this, name, new SpanContextImp(this._platform.generateUUID(), traceGUID));\n        spanImp.addTags(this._options.default_span_tags);\n\n        _each(fields, (value, key) => {\n            switch (key) {\n            case 'references':\n                // Ignore: handled before constructing the span\n                break;\n            case 'startTime':\n                // startTime is in milliseconds\n                spanImp.setBeginMicros(value * 1000);\n                break;\n            case 'tags':\n                spanImp.addTags(value);\n                break;\n            default:\n                this._warn(`Ignoring unknown field '${key}'`);\n                break;\n            }\n        });\n\n        if (parentCtxImp !== null) {\n            spanImp.setParentGUID(parentCtxImp._guid);\n        }\n\n        this.emit('start_span', spanImp);\n        return spanImp;\n    }\n\n    _inject(spanContext, format, carrier) {\n        switch (format) {\n        case this._opentracing.FORMAT_HTTP_HEADERS:\n        case this._opentracing.FORMAT_TEXT_MAP:\n            this._injectToTextMap(spanContext, carrier);\n            break;\n\n        case this._opentracing.FORMAT_BINARY:\n            this._error(`Unsupported format: ${format}`);\n            break;\n\n        default:\n            this._error(`Unknown format: ${format}`);\n            break;\n        }\n    }\n\n    _injectToTextMap(spanContext, carrier) {\n        if (!carrier) {\n            this._error('Unexpected null FORMAT_TEXT_MAP carrier in call to inject');\n            return;\n        }\n        if (typeof carrier !== 'object') {\n            this._error(`Unexpected '${typeof carrier}' FORMAT_TEXT_MAP carrier in call to inject`);\n            return;\n        }\n\n        carrier[`${CARRIER_TRACER_STATE_PREFIX}spanid`] = spanContext._guid;\n        carrier[`${CARRIER_TRACER_STATE_PREFIX}traceid`] = spanContext._traceGUID;\n        spanContext.forEachBaggageItem((key, value) => {\n            carrier[`${CARRIER_BAGGAGE_PREFIX}${key}`] = value;\n        });\n        carrier[`${CARRIER_TRACER_STATE_PREFIX}sampled`] = 'true';\n        return carrier;\n    }\n\n    _extract(format, carrier) {\n        switch (format) {\n        case this._opentracing.FORMAT_HTTP_HEADERS:\n        case this._opentracing.FORMAT_TEXT_MAP:\n            return this._extractTextMap(format, carrier);\n\n        case this._opentracing.FORMAT_BINARY:\n            this._error(`Unsupported format: ${format}`);\n            return null;\n\n        default:\n            this._error(`Unsupported format: ${format}`);\n            return null;\n        }\n    }\n\n    _extractTextMap(format, carrier) {\n        // Begin with the empty SpanContextImp\n        let spanContext = new SpanContextImp(null, null);\n\n        // Iterate over the contents of the carrier and set the properties\n        // accordingly.\n        let foundFields = 0;\n        _each(carrier, (value, key) => {\n            key = key.toLowerCase();\n            if (key.substr(0, CARRIER_TRACER_STATE_PREFIX.length) !== CARRIER_TRACER_STATE_PREFIX) {\n                return;\n            }\n            let suffix = key.substr(CARRIER_TRACER_STATE_PREFIX.length);\n\n            switch (suffix) {\n            case 'traceid':\n                foundFields++;\n                spanContext._traceGUID = value;\n                break;\n            case 'spanid':\n                foundFields++;\n                spanContext._guid = value;\n                break;\n            case 'sampled':\n                // Ignored. The carrier may be coming from a different client\n                // library that sends this (even though it's not used).\n                break;\n            default:\n                this._error(`Unrecognized carrier key '${key}' with recognized prefix. Ignoring.`);\n                break;\n            }\n        });\n\n        if (foundFields === 0) {\n            // This is not an error per se, there was simply no SpanContext\n            // in the carrier.\n            return null;\n        }\n        if (foundFields < 2) {\n            // A partial SpanContext suggests some sort of data corruption.\n            this._error(`Only found a partial SpanContext: ${format}, ${carrier}`);\n            return null;\n        }\n\n        _each(carrier, (value, key) => {\n            key = key.toLowerCase();\n            if (key.substr(0, CARRIER_BAGGAGE_PREFIX.length) !== CARRIER_BAGGAGE_PREFIX) {\n                return;\n            }\n            let suffix = key.substr(CARRIER_BAGGAGE_PREFIX.length);\n            spanContext.setBaggageItem(suffix, value);\n        });\n        return spanContext;\n    }\n\n\n    // ---------------------------------------------------------------------- //\n    // LightStep extensions\n    // ---------------------------------------------------------------------- //\n\n    /**\n     * Manually sends a report of all buffered data.\n     *\n     * @param  {Function} done - callback function invoked when the report\n     *         either succeeds or fails.\n     */\n    flush(done) {\n        if (!done) {\n            done = function () {};\n        }\n        if (this._options.disabled) {\n            this._warn('Manual flush() called in disabled state.');\n            return done(null);\n        }\n        this._flushReport(true, false, done);\n    }\n\n    //-----------------------------------------------------------------------//\n    // Options\n    //-----------------------------------------------------------------------//\n\n    guid() {\n        return this._runtimeGUID;\n    }\n\n    verbosity() {\n        // The 'undefined' handling below is for logs that may occur before the\n        // options are initialized.\n        let v = this._options.verbosity;\n        return (v === undefined) ? 1 : v;\n    }\n\n    // Call to generate a new Trace GUID\n    generateTraceGUIDForRootSpan() {\n        let guid = this._platform.generateUUID();\n        if (this._activeRootSpan) {\n            guid = this._activeRootSpan.traceGUID();\n        }\n        return guid;\n    }\n\n    setPlatformOptions(userOptions) {\n        let opts = this._platform.options(this) || {};\n        _each(userOptions, (val, key) => {\n            opts[key] = val;\n        });\n        this.options(opts);\n    }\n\n    // Register a new option.  Used by plug-ins.\n    addOption(name, desc) {\n        desc.name = name;\n        this._optionDescs.push(desc);\n        this._options[desc.name] = desc.defaultValue;\n    }\n\n    options(opts) {\n        if (arguments.length === 0) {\n            console.assert(typeof this._options === 'object',   // eslint-disable-line\n                'Internal error: _options field incorrect');\n            return this._options;\n        }\n        if (typeof opts !== 'object') {\n            throw new Error(`options() must be called with an object: type was ${typeof opts}`);\n        }\n\n        // \"collector_port\" 0 acts as an alias for \"use the default\".\n        if (opts.collector_port === 0) {\n            delete opts.collector_port;\n        }\n\n        // \"collector_encryption\" acts an alias for the common cases of 'collector_port'\n        if (opts.collector_encryption !== undefined && opts.collector_port === undefined) {\n            opts.collector_port = opts.collector_encryption !== 'none' ?\n                DEFAULT_COLLECTOR_PORT_TLS :\n                DEFAULT_COLLECTOR_PORT_PLAIN;\n        }\n\n        // Track what options have been modified\n        let modified = {};\n        let unchanged = {};\n        _each(this._optionDescs, (desc) => {\n            this._setOptionInternal(modified, unchanged, opts, desc);\n        });\n\n        // Check for any invalid options: is there a key in the specified operation\n        // that didn't result either in a change or a reset to the existing value?\n        for (let key in opts) {\n            if (modified[key] === undefined && unchanged[key] === undefined) {\n                throw new Error(`Invalid option ${key}`);\n            }\n        }\n\n        //\n        // Update the state information based on the changes\n        //\n        this._initReportingDataIfNeeded(modified);\n\n        if (!this._reportingLoopActive) {\n            this._startReportingLoop();\n        }\n\n        if (this.verbosity() >= 3) {\n            let optionsString = '';\n            let count = 0;\n            _each(modified, (val, key) => {\n                optionsString += `\\t${JSON.stringify(key)}: ${JSON.stringify(val.newValue)}\\n`;\n                count++;\n            });\n            if (count > 0) {\n                this._debug(`Options modified:\\n${optionsString}`);\n            }\n        }\n        this.emit('options', modified, this._options, this);\n    }\n\n    _setOptionInternal(modified, unchanged, opts, desc) {\n        let name = desc.name;\n        let value = opts[name];\n        let valueType = typeof value;\n        if (value === undefined) {\n            return;\n        }\n\n        // Parse the option (and check constraints)\n        switch (desc.type) {\n\n        case 'any':\n            break;\n\n        case 'bool':\n            if (value !== true && value !== false) {\n                this._error(`Invalid boolean option '${name}' '${value}'`);\n                return;\n            }\n            break;\n\n        case 'int':\n            if (valueType !== 'number' || Math.floor(value) !== value) {\n                this._error(`Invalid int option '${name}' '${value}'`);\n                return;\n            }\n            if (desc.min !== undefined && desc.max !== undefined) {\n                if (!(value >= desc.min && value <= desc.max)) {\n                    this._error(`Option '${name}' out of range '${value}' is not between ${desc.min} and ${desc.max}`);  // eslint-disable-line max-len\n                    return;\n                }\n            }\n            break;\n\n        case 'string':\n            switch (valueType) {\n            case 'string':\n                break;\n            case 'number':\n                value = coerce.toString(value);\n                break;\n            default:\n                this._error(`Invalid string option ${name} ${value}`);\n                return;\n            }\n            break;\n\n        case 'array':\n            // Per http://stackoverflow.com/questions/4775722/check-if-object-is-array\n            if (Object.prototype.toString.call(value) !== '[object Array]') {\n                this._error(`Invalid type for array option ${name}: found '${valueType}'`);\n                return;\n            }\n            break;\n\n        default:\n            this._error(`Unknown option type '${desc.type}'`);\n            return;\n        }\n\n        // Set the new value, recording any modifications\n        let oldValue = this._options[name];\n        if (oldValue === undefined) {\n            throw new Error(`Attempt to set unknown option ${name}`);\n        }\n\n        // Ignore no-op changes for types that can be checked quickly\n        if (valueType !== 'object' && oldValue === value) {\n            unchanged[name] = true;\n            return;\n        }\n\n        modified[name] = {\n            oldValue : oldValue,\n            newValue : value,\n        };\n        this._options[name] = value;\n    }\n\n    // The Thrift authorization and runtime information is initializaed as soon\n    // as it is available.  This allows logs and spans to be buffered before\n    // the library is initialized, which can be helpul in a complex setup with\n    // many subsystems.\n    //\n    _initReportingDataIfNeeded(modified) {\n        // Ignore redundant initialization; complaint on inconsistencies\n        if (this._thriftAuth !== null) {\n            if (!this._thriftRuntime) {\n                return this._error('Inconsistent state: thrift auth initialized without runtime.');\n            }\n            if (modified.access_token) {\n                throw new Error('Cannot change access_token after it has been set.');\n            }\n            if (modified.component_name) {\n                throw new Error('Cannot change component_name after it has been set.');\n            }\n            if (modified.collector_host) {\n                throw new Error('Cannot change collector_host after the connection is established');\n            }\n            if (modified.collector_port) {\n                throw new Error('Cannot change collector_port after the connection is established');\n            }\n            if (modified.collector_encryption) {\n                throw new Error('Cannot change collector_encryption after the connection is established');\n            }\n            return;\n        }\n\n        // See if the Thrift data can be initialized\n        if (this._options.access_token.length > 0 && this._options.component_name.length > 0) {\n            this._runtimeGUID = this._platform.runtimeGUID(this._options.component_name);\n\n            this._thriftAuth = new crouton_thrift.Auth({\n                access_token : this._options.access_token,\n            });\n\n            //\n            // Assemble the tracer tags from the user-specified and automatic,\n            // internal tags.\n            //\n            let tags = {};\n            _each(this._options.tags, (value, key) => {\n                if (typeof value !== 'string') {\n                    this._error(`Tracer tag value is not a string: key=${key}`);\n                    return;\n                }\n                tags[key] = value;\n            });\n            tags['lightstep.tracer_version'] = packageObject.version;\n            let platformTags = this._platform.tracerTags();\n            _each(platformTags, (val, key) => {\n                tags[key] = val;\n            });\n\n            let thriftAttrs = [];\n            _each(tags, (val, key) => {\n                thriftAttrs.push(new crouton_thrift.KeyValue({\n                    Key   : coerce.toString(key),\n                    Value : coerce.toString(val),\n                }));\n            });\n\n            // NOTE: for legacy reasons, the Thrift field is called \"group_name\"\n            // but is semantically equivalen to the \"component_name\"\n            this._thriftRuntime = new crouton_thrift.Runtime({\n                guid         : this._runtimeGUID,\n                start_micros : this._startMicros,\n                group_name   : this._options.component_name,\n                attrs        : thriftAttrs,\n            });\n\n            this._info('Initializing thrift reporting data', {\n                component_name : this._options.component_name,\n                access_token   : this._thriftAuth.access_token,\n            });\n            this.emit('reporting_initialized');\n        }\n    }\n\n    //-----------------------------------------------------------------------//\n    // Plugins\n    //-----------------------------------------------------------------------//\n\n    addPlatformPlugins(opts) {\n        let pluginSet = this._platform.plugins(opts);\n        _each(pluginSet, (val) => {\n            this.addPlugin(val);\n        });\n    }\n\n    addPlugin(plugin) {\n        // Don't add plug-ins twice\n        let name = plugin.name();\n        if (this._plugins[name]) {\n            return;\n        }\n\n        this._plugins[name] = plugin;\n        plugin.addOptions(this);\n    }\n\n    startPlugins() {\n        _each(this._plugins, (val, key) => {\n            this._plugins[key].start(this);\n        });\n    }\n\n    //-----------------------------------------------------------------------//\n    // Spans\n    //-----------------------------------------------------------------------//\n\n    // This is a LightStep-specific feature that should be used sparingly. It\n    // sets a \"global\" root span such that spans that would *otherwise* be root\n    // span instead inherit the trace GUID of the active root span. This is\n    // best clarified by example:\n    //\n    // On document load in the browser, an \"active root span\" is created for\n    // the page load process. Any spans started without an explicit parent\n    // will the document load trace GUID instead of starting a trace GUID.\n    // This implicit root remains active only until the page is done loading.\n    //\n    // Any span adding itself as a root span *must* remove itself along with\n    // calling finish(). This will *not* be done automatically.\n    //\n    // NOTE: currently, only the trace GUID is transferred; it may or may not\n    // make sure to make this a proper parent.\n    //\n    // NOTE: the root span tracking is handled as a set rather than a single\n    // global to avoid conflicts between libraries.\n    addActiveRootSpan(span) {\n        this._activeRootSpanSet[span._guid] = span;\n        this._setActiveRootSpanToYoungest();\n    }\n\n    removeActiveRootSpan(span) {\n        delete this._activeRootSpanSet[span._guid];\n        this._setActiveRootSpanToYoungest();\n    }\n\n    _setActiveRootSpanToYoungest() {\n        // Set the _activeRootSpan to the youngest of the roots in case of\n        // multiple.\n        this._activeRootSpan = null;\n        _each(this._activeRootSpanSet, (span) => {\n            if (!this._activeRootSpan ||\n                span._beginMicros > this._activeRootSpan._beginMicros) {\n                this._activeRootSpan = span;\n            }\n        });\n    }\n\n    //-----------------------------------------------------------------------//\n    // Encoding / decoding\n    //-----------------------------------------------------------------------//\n\n    _objectToUint8Array(obj) {\n        let jsonString;\n        try {\n            // encodeURIComponent() is a *very* inefficient, but simple and\n            // well-supported way to avoid having to think about Unicode in\n            // in the conversion to a UInt8Array.\n            //\n            // Writing multiple bytes for String.charCodeAt and\n            // String.codePointAt would be an alternate approach; again,\n            // simplicitly is being preferred over efficiency for the moment.\n            jsonString = encodeURIComponent(JSON.stringify(obj));\n        } catch (e) {\n            this._error('Could not binary encode carrier data.');\n            return null;\n        }\n\n        let buffer = new ArrayBuffer(jsonString.length);\n        let view = new Uint8Array(buffer);\n        for (let i = 0; i < jsonString.length; i++) {\n            let code = jsonString.charCodeAt(i);\n            if (!(code >= 0 && code <= 255)) {\n                this._error('Unexpected character code');\n                return null;\n            }\n            view[i] = code;\n        }\n        return view;\n    }\n\n    _uint8ArrayToObject(arr) {\n        if (!arr) {\n            this._error('Array is null');\n            return null;\n        }\n\n        let jsonString = '';\n        for (let i = 0; i < arr.length; i++) {\n            jsonString += String.fromCharCode(arr[i]);\n        }\n        try {\n            return JSON.parse(decodeURIComponent(jsonString));\n        } catch (e) {\n            this._error('Could not decode binary data.');\n            return null;\n        }\n    }\n\n    //-----------------------------------------------------------------------//\n    // Logging\n    //-----------------------------------------------------------------------//\n\n    log() {\n        let b = new LogBuilder(this);\n        return b;\n    }\n\n    //-----------------------------------------------------------------------//\n    // Buffers\n    //-----------------------------------------------------------------------//\n\n    _clearBuffers() {\n        this._spanRecords = [];\n        this._internalLogs = [];\n\n        // Create a new object to avoid overwriting the values in any references\n        // to the old object\n        let counters = {};\n        _each(this._counters, (unused, key) => {\n            counters[key] = 0;\n        });\n        this._counters = counters;\n    }\n\n    _buffersAreEmpty() {\n        if (this._spanRecords.length > 0) {\n            return false;\n        }\n        if (this._internalLogs.length > 0) {\n            return false;\n        }\n\n        let countersAllZero = true;\n        _each(this._counters, (val) => {\n            if (val > 0) {\n                countersAllZero = false;\n            }\n        });\n        return countersAllZero;\n    }\n\n    _addSpanRecord(record) {\n        this._internalAddSpanRecord(record);\n        this.emit('span_added', record);\n    }\n\n    _internalAddSpanRecord(record) {\n        if (!record) {\n            this._error('Attempt to add null record to buffer');\n            return;\n        }\n\n        if (this._spanRecords.length >= this._options.max_span_records) {\n            let index = Math.floor(this._spanRecords.length * Math.random());\n            this._spanRecords[index] = record;\n            this._counters['spans.dropped']++;\n        } else {\n            this._spanRecords.push(record);\n        }\n    }\n\n    _restoreRecords(spans, internalLogs, counters) {\n        _each(spans, (span) => {\n            this._internalAddSpanRecord(span);\n        });\n\n        let currentInternalLogs = this._internalLogs;\n        this._internalLogs = [];\n        let toAdd = internalLogs.concat(currentInternalLogs);\n        _each(toAdd, (log) => {\n            this._pushInternalLog(log);\n        });\n\n        _each(counters, (record) => {\n            if (this._counters[record.Name]) {\n                this._counters[record.Name] += record.Value;\n            } else {\n                this._error(`Bad counter name: ${record.Name}`);\n            }\n        });\n    }\n\n    //-----------------------------------------------------------------------//\n    // Reporting loop\n    //-----------------------------------------------------------------------//\n\n    _setupReportOnExit() {\n        if (this._options.disable_report_on_exit) {\n            this._debug('report-on-exit is disabled.');\n            return;\n        }\n\n        // Do a final explicit flush. Note that the final flush may enqueue\n        // asynchronous callbacks that cause the 'beforeExit' event to be\n        // re-emitted when those callbacks finish.\n        let finalFlushOnce = 0;\n        let finalFlush = () => {\n            if (finalFlushOnce++ > 0) { return; }\n            this._info('Final flush before exit.');\n            this._flushReport(false, true, (err) => {\n                if (err) {\n                    this._warn('Final report before exit failed', {\n                        error                  : err,\n                        unflushed_spans        : this._spanRecords.length,\n                        buffer_youngest_micros : this._reportYoungestMicros,\n                    });\n                }\n            });\n        };\n        this._platform.onBeforeExit(finalFlush);\n    }\n\n    _startReportingLoop() {\n        if (this._options.disabled) {\n            this._info('Not starting reporting loop: instrumentation is disabled.');\n            return;\n        }\n        if (this._options.disable_reporting_loop) {\n            this._info('Not starting reporting loop: reporting loop is disabled.');\n            return;\n        }\n        if (this._thriftAuth === null) {\n            // Don't start the loop until the thrift data necessary to do the\n            // report is set up.\n            return;\n        }\n        if (this._reportingLoopActive) {\n            this._info('Reporting loop already started!');\n            return;\n        }\n\n        this._info('Starting reporting loop:', this._thriftRuntime);\n        this._reportingLoopActive = true;\n\n        // Stop the reporting loop so the Node.js process does not become a\n        // zombie waiting for the timers.\n        let stopReportingOnce = 0;\n        let stopReporting = () => {\n            if (stopReportingOnce++ > 0) { return; }\n            this._stopReportingLoop();\n        };\n        this._platform.onBeforeExit(stopReporting);\n\n        // Begin the asynchronous reporting loop\n        let loop = () => {\n            this._enqueueNextReport((err) => {\n                if (this._reportingLoopActive) {\n                    loop();\n                }\n            });\n        };\n\n        const delay = Math.floor(Math.random() * this._options.delay_initial_report_millis);\n        util.detachedTimeout(() => {\n            loop();\n        }, delay);\n    }\n\n    _stopReportingLoop() {\n        this._debug('Stopping reporting loop');\n\n        this._reportingLoopActive = false;\n        clearTimeout(this._reportTimer);\n        this._reportTimer = null;\n    }\n\n    _enqueueNextReport(done) {\n        // If there's already a report request enqueued, ignore this new\n        // request.\n        if (this._reportTimer) {\n            return;\n        }\n\n        // If the clock state is still being primed, potentially use the\n        // shorted report interval.\n        //\n        // However, do not use the shorter interval in the case of an error.\n        // That does not provide sufficient backoff.\n        let reportInterval = this._options.max_reporting_interval_millis;\n        if (this._reportErrorStreak === 0 &&\n            this._useClockState &&\n            !this._clockState.isReady()) {\n            reportInterval = Math.min(constants.CLOCK_STATE_REFRESH_INTERVAL_MS, reportInterval);\n        }\n\n        // After 3 consecutive errors, expand the retry delay up to 8x the\n        // normal interval, jitter the delay by +/- 25%, and be sure to back off\n        // *at least* the standard reporting interval in the case of an error.\n        let backOff = 1 + Math.min(7, Math.max(0, this._reportErrorStreak));\n        let basis = backOff * reportInterval;\n        let jitter = 1.0 + (Math.random() * 0.5 - 0.25);\n        let delay = Math.floor(Math.max(0, jitter * basis));\n\n        this._debug(`Delaying next flush for ${delay}ms`);\n        this._reportTimer = util.detachedTimeout(() => {\n            this._reportTimer = null;\n            this._flushReport(false, false, done);\n        }, delay);\n    }\n\n    /**\n     * Internal worker for a flush of buffered data into a report.\n     *\n     * @param  {bool} manual - this is a manually invoked flush request. Don't\n     *         override this call with a clock state syncing flush, for example.\n     * @param  {bool} detached - this is an \"at exit\" flush that should not block\n     *         the calling process in any manner. This is specifically called\n     *         \"detached\" due to the browser use case where the report is done,\n     *         not just asynchronously, but as a script request that continues\n     *         to run even if the page is navigated away from mid-request.\n     * @param  {function} done - standard callback function called on success\n     *         or error.\n     */\n    _flushReport(manual, detached, done) {\n        done = done || function (err) {};\n\n        let clockReady = this._clockState.isReady();\n        let clockOffsetMicros = this._clockState.offsetMicros();\n\n        // Diagnostic information on the clock correction\n        this._debug('time correction state', {\n            offset_micros  : clockOffsetMicros,\n            active_samples : this._clockState.activeSampleCount(),\n            ready          : clockReady,\n        });\n\n        let spanRecords = this._spanRecords;\n        let counters = this._counters;\n        let internalLogs = this._internalLogs;\n\n        // If the clock is not ready, do an \"empty\" flush to build more clock\n        // samples before the real data is reported.\n        // A detached flush (i.e. one intended to fire at exit or other \"last\n        // ditch effort\" event) should always use the real data.\n        if (this._useClockState && !manual && !clockReady && !detached) {\n            this._debug('Flushing empty report to prime clock state');\n            spanRecords = [];\n            counters    = {};\n            internalLogs = [];\n        } else {\n            // Early out if we can.\n            if (this._buffersAreEmpty()) {\n                this._debug('Skipping empty report');\n                return done(null);\n            }\n\n            // Clear the object buffers as the data is now in the local\n            // variables\n            this._clearBuffers();\n            this._debug(`Flushing report (${spanRecords.length} spans)`);\n        }\n\n        this._transport.ensureConnection(this._options);\n\n        // Ensure the runtime GUID is set as it is possible buffer logs and\n        // spans before the GUID is necessarily set.\n        console.assert(this._runtimeGUID !== null, 'No runtime GUID for Tracer'); // eslint-disable-line no-console\n\n        _each(spanRecords, (span) => {\n            span.runtime_guid = this._runtimeGUID;\n        });\n\n        let thriftCounters = [];\n        _each(counters, (value, key) => {\n            if (value === 0) {\n                return;\n            }\n            thriftCounters.push(new crouton_thrift.MetricsSample({\n                name         : coerce.toString(key),\n                double_value : coerce.toNumber(value),\n            }));\n        });\n\n        let timestampOffset = this._useClockState ? clockOffsetMicros : 0;\n        let now = this._platform.nowMicros();\n        let report = new crouton_thrift.ReportRequest({\n            runtime                 : this._thriftRuntime,\n            oldest_micros           : this._reportYoungestMicros,\n            youngest_micros         : now,\n            span_records            : spanRecords,\n            internal_logs           : internalLogs,\n            internal_metrics        : new crouton_thrift.Metrics({\n                counts              : thriftCounters,\n            }),\n            timestamp_offset_micros : timestampOffset,\n        });\n\n        this.emit('prereport', report);\n        let originMicros = this._platform.nowMicros();\n\n        this._transport.report(detached, this._thriftAuth, report, (err, res) => {\n            let destinationMicros = this._platform.nowMicros();\n            let reportWindowSeconds = (now - report.oldest_micros) / 1e6;\n\n            if (err) {\n                // How many errors in a row? Influences the report backoff.\n                this._reportErrorStreak++;\n\n                // On a failed report, re-enqueue the data that was going to be\n                // sent.\n                let errString;\n                if (err.message) {\n                    errString = `${err.message}`;\n                } else {\n                    errString = `${err}`;\n                }\n                this._warn(`Error in report: ${errString}`, {\n                    last_report_seconds_ago : reportWindowSeconds,\n                });\n\n                this._restoreRecords(\n                    report.span_records,\n                    report.internal_logs,\n                    report.counters);\n\n                // Increment the counter *after* the counters are restored\n                this._counters['reports.errors.send']++;\n\n                this.emit('report_error', err, {\n                    error    : err,\n                    streak   : this._reportErrorStreak,\n                    detached : detached,\n                });\n            } else {\n                if (this.verbosity() >= 4) {\n                    this._debug(`Report flushed for last ${reportWindowSeconds} seconds`, {\n                        spans_reported : report.span_records.length,\n                    });\n                }\n\n                // Update internal data after the successful report\n                this._reportErrorStreak = 0;\n                this._reportYoungestMicros = now;\n\n                // Update the clock state if there's info from the report\n                if (res) {\n                    if (res.timing && res.timing.receive_micros && res.timing.transmit_micros) {\n                        this._clockState.addSample(\n                            originMicros,\n                            res.timing.receive_micros,\n                            res.timing.transmit_micros,\n                            destinationMicros);\n                    } else {\n                        // The response does not have timing information. Disable\n                        // the clock state assuming there'll never be timing data\n                        // to use.\n                        this._useClockState = false;\n                    }\n\n                    if (res.errors && res.errors.length > 0) {\n                        this._warn('Errors in report', res.errors);\n                    }\n                } else {\n                    this._useClockState = false;\n                }\n\n                this.emit('report', report, res);\n            }\n            return done(err);\n        });\n    }\n\n    //-----------------------------------------------------------------------//\n    // Stats and metrics\n    //-----------------------------------------------------------------------//\n\n    /**\n     * Internal API that returns some internal metrics.\n     */\n    stats() {\n        return {\n            counters : this._counters,\n        };\n    }\n\n    //-----------------------------------------------------------------------//\n    // Internal logging & errors\n    //-----------------------------------------------------------------------//\n    // The rules for how internal logs are processed:\n    //\n    // * Internal logs that are included in the Collector report:\n    //      - Always send errors logs along with the reports\n    //      - Never include any other logs\n    // * Internal logs that are echoed to the host application:\n    //      - See the README.md :)\n    //\n    _debug(msg, payload) {\n        if (this.verbosity() < 4) {\n            return;\n        }\n        this._printToConsole('log', `[LightStep:DEBUG] ${msg}`, payload);\n    }\n\n    _info(msg, payload) {\n        if (this.verbosity() < 3) {\n            return;\n        }\n        this._printToConsole('log', `[LightStep:INFO] ${msg}`, payload);\n    }\n\n    _warn(msg, payload) {\n        this._counters['internal.warnings']++;\n\n        if (this.verbosity() < 3) {\n            return;\n        }\n        this._printToConsole('warn', `[LightStep:WARN] ${msg}`, payload);\n    }\n\n    _error(msg, payload) {\n        this._counters['internal.errors']++;\n\n        // Internal errors are always reported to the collector\n        let record = this.log()\n            .level(constants.LOG_ERROR)\n            .message(msg)\n            .payload(payload)\n            .record();\n        this._pushInternalLog(record);\n\n        // Internal errors are reported to the host console conditionally based\n        // on the verbosity level.\n        let verbosity = this.verbosity();\n        if (verbosity === 0) {\n            return;\n        }\n\n        // Error messages are throttled in verbosity === 1 mode\n        const now = Date.now();\n        if (verbosity === 1) {\n            const nextVisible = this._lastVisibleErrorMillis + this._options.error_throttle_millis;\n            if (now < nextVisible) {\n                this._skippedVisibleErrors++;\n                return;\n            }\n            if (this._skippedVisibleErrors > 0) {\n                /* eslint-disable max-len */\n                const s = `${this._skippedVisibleErrors} errors masked since last logged error. Increase 'verbosity' option to see all errors.`;\n                /* eslint-enable max-len */\n                this._printToConsole('error', `[LightStep:ERROR] ${s}`, payload);\n            }\n        }\n\n        this._printToConsole('error', `[LightStep:ERROR] ${msg}`, payload);\n        this._lastVisibleErrorMillis = now;\n        this._skippedVisibleErrors = 0;\n    }\n\n    _printToConsole(type, msg, payload) {\n        // Internal option to silence intentional errors generated by the unit\n        // tests.\n        if (this._options.silent) {\n            return;\n        }\n\n        if (payload !== undefined) {\n            console[type](msg, payload); // eslint-disable-line no-console\n        }  else {\n            console[type](msg); // eslint-disable-line no-console\n        }\n    }\n\n    _pushInternalLog(record) {\n        if (!record) {\n            return;\n        }\n        if (this._internalLogs.length >= MAX_INTERNAL_LOGS) {\n            record.message = `MAX_INTERNAL_LOGS limit hit. Last error: ${record.message}`;\n            this._internalLogs[this._internalLogs.length - 1] = record;\n        } else {\n            this._internalLogs.push(record);\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/tracer_imp.js\n **/","'use strict';\n\n//\n// We store our EE objects in a plain object whose properties are event names.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// `~` to make sure that the built-in object properties are not overridden or\n// used as an attack vector.\n// We also assume that `Object.create(null)` is available when the event name\n// is an ES6 Symbol.\n//\nvar prefix = typeof Object.create !== 'function' ? '~' : false;\n\n/**\n * Representation of a single EventEmitter function.\n *\n * @param {Function} fn Event handler to be called.\n * @param {Mixed} context Context for function execution.\n * @param {Boolean} once Only emit once\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal EventEmitter interface that is molded against the Node.js\n * EventEmitter interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() { /* Nothing to set */ }\n\n/**\n * Holds the assigned EventEmitters by name.\n *\n * @type {Object}\n * @private\n */\nEventEmitter.prototype._events = undefined;\n\n/**\n * Return a list of assigned event listeners.\n *\n * @param {String} event The events that should be listed.\n * @param {Boolean} exists We only need to know if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events && this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Emit an event to all registered event listeners.\n *\n * @param {String} event The name of the event.\n * @returns {Boolean} Indication if we've emitted an event.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if ('function' === typeof listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Register a new EventListener for the given event.\n *\n * @param {String} event Name of the event.\n * @param {Functon} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Add an EventListener that's only called once.\n *\n * @param {String} event Name of the event.\n * @param {Function} fn Callback function.\n * @param {Mixed} context The context of the function.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events) this._events = prefix ? {} : Object.create(null);\n  if (!this._events[evt]) this._events[evt] = listener;\n  else {\n    if (!this._events[evt].fn) this._events[evt].push(listener);\n    else this._events[evt] = [\n      this._events[evt], listener\n    ];\n  }\n\n  return this;\n};\n\n/**\n * Remove event listeners.\n *\n * @param {String} event The event we want to remove.\n * @param {Function} fn The listener that we need to find.\n * @param {Mixed} context Only remove listeners matching this context.\n * @param {Boolean} once Only remove once listeners.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events || !this._events[evt]) return this;\n\n  var listeners = this._events[evt]\n    , events = [];\n\n  if (fn) {\n    if (listeners.fn) {\n      if (\n           listeners.fn !== fn\n        || (once && !listeners.once)\n        || (context && listeners.context !== context)\n      ) {\n        events.push(listeners);\n      }\n    } else {\n      for (var i = 0, length = listeners.length; i < length; i++) {\n        if (\n             listeners[i].fn !== fn\n          || (once && !listeners[i].once)\n          || (context && listeners[i].context !== context)\n        ) {\n          events.push(listeners[i]);\n        }\n      }\n    }\n  }\n\n  //\n  // Reset the array, or remove it completely if we have no more listeners.\n  //\n  if (events.length) {\n    this._events[evt] = events.length === 1 ? events[0] : events;\n  } else {\n    delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners or only the listeners for the specified event.\n *\n * @param {String} event The event want to remove all listeners for.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  if (!this._events) return this;\n\n  if (event) delete this._events[prefix ? prefix + event : event];\n  else this._events = prefix ? {} : Object.create(null);\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/eventemitter3/index.js\n ** module id = 2\n ** module chunks = 0\n **/","'use strict';\n\nvar _global_tracer = require('./global_tracer');\n\nvar GlobalTracer = _interopRequireWildcard(_global_tracer);\n\nvar _constants = require('./constants');\n\nvar Constants = _interopRequireWildcard(_constants);\n\nvar _functions = require('./functions');\n\nvar Functions = _interopRequireWildcard(_functions);\n\nvar _noop = require('./noop');\n\nvar Noop = _interopRequireWildcard(_noop);\n\nvar _tags = require('./ext/tags');\n\nvar Tags = _interopRequireWildcard(_tags);\n\nvar _binary_carrier = require('./binary_carrier');\n\nvar _binary_carrier2 = _interopRequireDefault(_binary_carrier);\n\nvar _reference = require('./reference');\n\nvar _reference2 = _interopRequireDefault(_reference);\n\nvar _span_context = require('./span_context');\n\nvar _span_context2 = _interopRequireDefault(_span_context);\n\nvar _span = require('./span');\n\nvar _span2 = _interopRequireDefault(_span);\n\nvar _tracer = require('./tracer');\n\nvar _tracer2 = _interopRequireDefault(_tracer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n// Object.assign() is not available on Node v0.12, so implement a similar\n// function here (subset of a proper polyfill).\nfunction _extend(target) {\n    for (var index = 1; index < arguments.length; index++) {\n        var source = arguments[index];\n        for (var key in source) {\n            // eslint-disable-line no-restricted-syntax\n            if (source.hasOwnProperty(key)) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\n\n// Use `module.exports` rather than `export` to avoid the need to use `.default`\n// when requiring the package in ES5 code.\nmodule.exports = _extend({\n    BinaryCarrier: _binary_carrier2.default,\n    Reference: _reference2.default,\n    SpanContext: _span_context2.default,\n    Span: _span2.default,\n    Tracer: _tracer2.default,\n    Tags: Tags\n}, Constants, Functions, GlobalTracer);\n\n// Initialize the noops last to avoid a dependecy cycle between the classes.\nNoop.initialize();\n\n//# sourceMappingURL=index.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/index.js\n ** module id = 3\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.initGlobalTracer = initGlobalTracer;\nexports.globalTracer = globalTracer;\n\nvar _tracer = require('./tracer');\n\nvar _tracer2 = _interopRequireDefault(_tracer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar noopTracer = new _tracer2.default();\nvar _globalTracer = null;\n\n// Allows direct importing/requiring of the global tracer:\n//\n// let globalTracer = require('opentracing/global');\n//      OR\n// import globalTracer from 'opentracing/global';\n//\n// Acts a bridge to the global tracer that can be safely called before the\n// global tracer is initialized. The purpose of the delegation is to avoid the\n// sometimes nearly intractible initialization order problems that can arise in\n// applications with a complex set of dependencies, while also avoiding the\n// case where\n\nvar GlobalTracerDelegate = function (_Tracer) {\n    _inherits(GlobalTracerDelegate, _Tracer);\n\n    function GlobalTracerDelegate() {\n        _classCallCheck(this, GlobalTracerDelegate);\n\n        return _possibleConstructorReturn(this, (GlobalTracerDelegate.__proto__ || Object.getPrototypeOf(GlobalTracerDelegate)).apply(this, arguments));\n    }\n\n    _createClass(GlobalTracerDelegate, [{\n        key: 'startSpan',\n        value: function startSpan() {\n            var tracer = _globalTracer || noopTracer;\n            return tracer.startSpan.apply(tracer, arguments);\n        }\n    }, {\n        key: 'inject',\n        value: function inject() {\n            var tracer = _globalTracer || noopTracer;\n            return tracer.inject.apply(tracer, arguments);\n        }\n    }, {\n        key: 'extract',\n        value: function extract() {\n            var tracer = _globalTracer || noopTracer;\n            return tracer.extract.apply(tracer, arguments);\n        }\n    }]);\n\n    return GlobalTracerDelegate;\n}(_tracer2.default);\n\nvar globalTracerDelegate = new GlobalTracerDelegate();\n\n/**\n * Set the global Tracer.\n *\n * The behavior is undefined if this function is called more than once.\n *\n * @param {Tracer} tracer - the Tracer implementation\n */\nfunction initGlobalTracer(tracer) {\n    _globalTracer = tracer;\n}\n\n/**\n * Returns the global tracer.\n */\nfunction globalTracer() {\n    // Return the delegate.  Since the global tracer is largely a convenience\n    // (the user can always create their own tracers), the delegate is used to\n    // give the added convenience of not needing to worry about initialization\n    // order.\n    return globalTracerDelegate;\n}\n\n//# sourceMappingURL=global_tracer.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/global_tracer.js\n ** module id = 4\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _span = require('./span');\n\nvar _span2 = _interopRequireDefault(_span);\n\nvar _span_context = require('./span_context');\n\nvar _span_context2 = _interopRequireDefault(_span_context);\n\nvar _constants = require('./constants');\n\nvar Constants = _interopRequireWildcard(_constants);\n\nvar _functions = require('./functions');\n\nvar Functions = _interopRequireWildcard(_functions);\n\nvar _noop = require('./noop');\n\nvar Noop = _interopRequireWildcard(_noop);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Tracer is the entry-point between the instrumentation API and the tracing\n * implementation.\n *\n * The default object acts as a no-op implementation.\n *\n * Note to implementators: derived classes can choose to directly implement the\n * methods in the \"OpenTracing API methods\" section, or optionally the subset of\n * underscore-prefixed methods to pick up the argument checking and handling\n * automatically from the base class.\n */\nvar Tracer = function () {\n    function Tracer() {\n        _classCallCheck(this, Tracer);\n    }\n\n    _createClass(Tracer, [{\n        key: 'startSpan',\n\n\n        // ---------------------------------------------------------------------- //\n        // OpenTracing API methods\n        // ---------------------------------------------------------------------- //\n\n        /**\n         * Starts and returns a new Span representing a logical unit of work.\n         *\n         * For example:\n         *\n         *     // Start a new (parentless) root Span:\n         *     var parent = Tracer.startSpan('DoWork');\n         *\n         *     // Start a new (child) Span:\n         *     var child = Tracer.startSpan('Subroutine', {\n         *         childOf: parent.context(),\n         *     });\n         *\n         * @param {string} name - the name of the operation.\n         * @param {object} [fields] - the fields to set on the newly created span.\n         * @param {string} [fields.operationName] - the name to use for the newly\n         *        created span. Required if called with a single argument.\n         * @param {SpanContext} [fields.childOf] - a parent SpanContext (or Span,\n         *        for convenience) that the newly-started span will be the child of\n         *        (per REFERENCE_CHILD_OF). If specified, `fields.references` must\n         *        be unspecified.\n         * @param {array} [fields.references] - an array of Reference instances,\n         *        each pointing to a causal parent SpanContext. If specified,\n         *        `fields.childOf` must be unspecified.\n         * @param {object} [fields.tags] - set of key-value pairs which will be set\n         *        as tags on the newly created Span. Ownership of the object is\n         *        passed to the created span for efficiency reasons (the caller\n         *        should not modify this object after calling startSpan).\n         * @param {number} [fields.startTime] - a manually specified start time for\n         *        the created Span object. The time should be specified in\n         *        milliseconds as Unix timestamp. Decimal value are supported\n         *        to represent time values with sub-millisecond accuracy.\n         * @return {Span} - a new Span object.\n         */\n        value: function startSpan(name, fields) {\n\n            // Convert fields.childOf to fields.references as needed.\n            fields = fields || {};\n            // Debug-only runtime checks on the arguments\n\n            if (fields.childOf) {\n                // Convert from a Span or a SpanContext into a Reference.\n                var childOf = Functions.childOf(fields.childOf);\n                if (fields.references) {\n                    fields.references.push(childOf);\n                } else {\n                    fields.references = [childOf];\n                }\n                delete fields.childOf;\n            }\n            return this._startSpan(name, fields);\n        }\n\n        /**\n         * Injects the given SpanContext instance for cross-process propagation\n         * within `carrier`. The expected type of `carrier` depends on the value of\n         * `format.\n         *\n         * OpenTracing defines a common set of `format` values (see\n         * FORMAT_TEXT_MAP, FORMAT_HTTP_HEADERS, and FORMAT_BINARY), and each has\n         * an expected carrier type.\n         *\n         * Consider this pseudocode example:\n         *\n         *     var clientSpan = ...;\n         *     ...\n         *     // Inject clientSpan into a text carrier.\n         *     var headersCarrier = {};\n         *     Tracer.inject(clientSpan.context(), Tracer.FORMAT_HTTP_HEADERS, headersCarrier);\n         *     // Incorporate the textCarrier into the outbound HTTP request header\n         *     // map.\n         *     Object.assign(outboundHTTPReq.headers, headersCarrier);\n         *     // ... send the httpReq\n         *\n         * @param  {SpanContext} spanContext - the SpanContext to inject into the\n         *         carrier object. As a convenience, a Span instance may be passed\n         *         in instead (in which case its .context() is used for the\n         *         inject()).\n         * @param  {string} format - the format of the carrier.\n         * @param  {any} carrier - see the documentation for the chosen `format`\n         *         for a description of the carrier object.\n         */\n\n    }, {\n        key: 'inject',\n        value: function inject(spanContext, format, carrier) {\n\n            // Allow the user to pass a Span instead of a SpanContext\n            if (spanContext instanceof _span2.default) {\n                spanContext = spanContext.context();\n            }\n            // Debug-only runtime checks on the arguments\n\n            return this._inject(spanContext, format, carrier);\n        }\n\n        /**\n         * Returns a SpanContext instance extracted from `carrier` in the given\n         * `format`.\n         *\n         * OpenTracing defines a common set of `format` values (see\n         * FORMAT_TEXT_MAP, FORMAT_HTTP_HEADERS, and FORMAT_BINARY), and each has\n         * an expected carrier type.\n         *\n         * Consider this pseudocode example:\n         *\n         *     // Use the inbound HTTP request's headers as a text map carrier.\n         *     var headersCarrier = inboundHTTPReq.headers;\n         *     var wireCtx = Tracer.extract(Tracer.FORMAT_HTTP_HEADERS, headersCarrier);\n         *     var serverSpan = Tracer.startSpan('...', { childOf : wireCtx });\n         *\n         * @param  {string} format - the format of the carrier.\n         * @param  {any} carrier - the type of the carrier object is determined by\n         *         the format.\n         * @return {SpanContext}\n         *         The extracted SpanContext, or null if no such SpanContext could\n         *         be found in `carrier`\n         */\n\n    }, {\n        key: 'extract',\n        value: function extract(format, carrier) {\n            return this._extract(format, carrier);\n            // Debug-only runtime checks on the arguments\n        }\n\n        // ---------------------------------------------------------------------- //\n        // Derived classes can choose to implement the below\n        // ---------------------------------------------------------------------- //\n\n        // NOTE: the input to this method is *always* an associative array. The\n        // public-facing startSpan() method normalizes the arguments so that\n        // all N implementations do not need to worry about variations in the call\n        // signature.\n        //\n        // The default behavior returns a no-op span.\n\n    }, {\n        key: '_startSpan',\n        value: function _startSpan(name, fields) {\n            return Noop.span;\n        }\n\n        // The default behavior is a no-op.\n\n    }, {\n        key: '_inject',\n        value: function _inject(spanContext, format, carrier) {}\n\n        // The default behavior is to return null.\n\n    }, {\n        key: '_extract',\n        value: function _extract(format, carrier) {\n            return Noop.spanContext;\n        }\n    }]);\n\n    return Tracer;\n}();\n\nexports.default = Tracer;\n\n//# sourceMappingURL=tracer.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/tracer.js\n ** module id = 5\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _noop = require('./noop');\n\nvar noop = _interopRequireWildcard(_noop);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Span represents a logical unit of work as part of a broader Trace. Examples\n * of span might include remote procedure calls or a in-process function calls\n * to sub-components. A Trace has a single, top-level \"root\" Span that in turn\n * may have zero or more child Spans, which in turn may have children.\n */\nvar Span = function () {\n    function Span() {\n        _classCallCheck(this, Span);\n    }\n\n    _createClass(Span, [{\n        key: 'context',\n\n\n        // ---------------------------------------------------------------------- //\n        // OpenTracing API methods\n        // ---------------------------------------------------------------------- //\n\n        /**\n         * Returns the SpanContext object associated with this Span.\n         *\n         * @return {SpanContext}\n         */\n        value: function context() {\n\n            return this._context();\n            // Debug-only runtime checks on the arguments\n        }\n\n        /**\n         * Returns the Tracer object used to create this Span.\n         *\n         * @return {Tracer}\n         */\n\n    }, {\n        key: 'tracer',\n        value: function tracer() {\n\n            return this._tracer();\n            // Debug-only runtime checks on the arguments\n        }\n\n        /**\n         * Sets the string name for the logical operation this span represents.\n         *\n         * @param {string} name\n         */\n\n    }, {\n        key: 'setOperationName',\n        value: function setOperationName(name) {\n\n            this._setOperationName(name);\n            // Debug-only runtime checks on the arguments\n\n            return this;\n        }\n\n        /**\n         * Sets a key:value pair on this Span that also propagates to future\n         * children of the associated Span.\n         *\n         * setBaggageItem() enables powerful functionality given a full-stack\n         * opentracing integration (e.g., arbitrary application data from a web\n         * client can make it, transparently, all the way into the depths of a\n         * storage system), and with it some powerful costs: use this feature with\n         * care.\n         *\n         * IMPORTANT NOTE #1: setBaggageItem() will only propagate baggage items to\n         * *future* causal descendants of the associated Span.\n         *\n         * IMPORTANT NOTE #2: Use this thoughtfully and with care. Every key and\n         * value is copied into every local *and remote* child of the associated\n         * Span, and that can add up to a lot of network and cpu overhead.\n         *\n         * @param {string} key\n         * @param {string} value\n         */\n\n    }, {\n        key: 'setBaggageItem',\n        value: function setBaggageItem(key, value) {\n\n            this._setBaggageItem(key, value);\n            // Debug-only runtime checks on the arguments\n\n            return this;\n        }\n\n        /**\n         * Returns the value for a baggage item given its key.\n         *\n         * @param  {string} key\n         *         The key for the given trace attribute.\n         * @return {string}\n         *         String value for the given key, or undefined if the key does not\n         *         correspond to a set trace attribute.\n         */\n\n    }, {\n        key: 'getBaggageItem',\n        value: function getBaggageItem(key) {\n\n            return this._getBaggageItem(key);\n            // Debug-only runtime checks on the arguments\n        }\n\n        /**\n         * Adds a single tag to the span.  See `addTags()` for details.\n         *\n         * @param {string} key\n         * @param {any} value\n         */\n\n    }, {\n        key: 'setTag',\n        value: function setTag(key, value) {\n\n            // NOTE: the call is normalized to a call to _addTags()\n            this._addTags(_defineProperty({}, key, value));\n            // Debug-only runtime checks on the arguments\n\n            return this;\n        }\n\n        /**\n         * Adds the given key value pairs to the set of span tags.\n         *\n         * Multiple calls to addTags() results in the tags being the superset of\n         * all calls.\n         *\n         * The behavior of setting the same key multiple times on the same span\n         * is undefined.\n         *\n         * The supported type of the values is implementation-dependent.\n         * Implementations are expected to safely handle all types of values but\n         * may choose to ignore unrecognized / unhandle-able values (e.g. objects\n         * with cyclic references, function objects).\n         *\n         * @return {[type]} [description]\n         */\n\n    }, {\n        key: 'addTags',\n        value: function addTags(keyValueMap) {\n\n            this._addTags(keyValueMap);\n            // Debug-only runtime checks on the arguments\n\n            return this;\n        }\n\n        /**\n         * Add a log record to this Span, optionally at a user-provided timestamp.\n         *\n         * For example:\n         *\n         *     span.log({\n         *         size: rpc.size(),  // numeric value\n         *         URI: rpc.URI(),  // string value\n         *         payload: rpc.payload(),  // Object value\n         *         \"keys can be arbitrary strings\": rpc.foo(),\n         *     });\n         *\n         *     span.log({\n         *         \"error.description\": error.description(),  // numeric value\n         *     }, error.timestampMillis());\n         *\n         * @param {object} keyValuePairs\n         *        An object mapping string keys to arbitrary value types. All\n         *        Tracer implementations should support bool, string, and numeric\n         *        value types, and some may also support Object values.\n         * @param {number} timestamp\n         *        An optional parameter specifying the timestamp in milliseconds\n         *        since the Unix epoch. Fractional values are allowed so that\n         *        timestamps with sub-millisecond accuracy can be represented. If\n         *        not specified, the implementation is expected to use its notion\n         *        of the current time of the call.\n         */\n\n    }, {\n        key: 'log',\n        value: function log(keyValuePairs, timestamp) {\n\n            this._log(keyValuePairs, timestamp);\n            // Debug-only runtime checks on the arguments\n\n            return this;\n        }\n\n        /**\n         * DEPRECATED\n         */\n\n    }, {\n        key: 'logEvent',\n        value: function logEvent(eventName, payload) {\n\n            return this._log({\n                event: eventName,\n                payload: payload\n            });\n            // Debug-only runtime checks on the arguments\n        }\n\n        /**\n         * Sets the end timestamp and finalizes Span state.\n         *\n         * With the exception of calls to Span.context() (which are always allowed),\n         * finish() must be the last call made to any span instance, and to do\n         * otherwise leads to undefined behavior.\n         *\n         * @param  {number} finishTime\n         *         Optional finish time in milliseconds as a Unix timestamp. Decimal\n         *         values are supported for timestamps with sub-millisecond accuracy.\n         *         If not specified, the current time (as defined by the\n         *         implementation) will be used.\n         */\n\n    }, {\n        key: 'finish',\n        value: function finish(finishTime) {\n\n            this._finish(finishTime);\n\n            // Do not return `this`. The Span generally should not be used after it\n            // is finished so chaining is not desired in this context.\n\n            // Debug-only runtime checks on the arguments\n        }\n\n        // ---------------------------------------------------------------------- //\n        // Derived classes can choose to implement the below\n        // ---------------------------------------------------------------------- //\n\n        // By default returns a no-op SpanContext.\n\n    }, {\n        key: '_context',\n        value: function _context() {\n            return noop.spanContext;\n        }\n\n        // By default returns a no-op tracer.\n        //\n        // The base class could store the tracer that created it, but it does not\n        // in order to ensure the no-op span implementation has zero members,\n        // which allows V8 to aggressively optimize calls to such objects.\n\n    }, {\n        key: '_tracer',\n        value: function _tracer() {\n            return noop.tracer;\n        }\n\n        // By default does nothing\n\n    }, {\n        key: '_setOperationName',\n        value: function _setOperationName(name) {}\n\n        // By default does nothing\n\n    }, {\n        key: '_setBaggageItem',\n        value: function _setBaggageItem(key, value) {}\n\n        // By default does nothing\n\n    }, {\n        key: '_getBaggageItem',\n        value: function _getBaggageItem(key) {}\n\n        // By default does nothing\n        //\n        // NOTE: both setTag() and addTags() map to this function. keyValuePairs\n        // will always be an associative array.\n\n    }, {\n        key: '_addTags',\n        value: function _addTags(keyValuePairs) {}\n\n        // By default does nothing\n\n    }, {\n        key: '_log',\n        value: function _log(keyValuePairs, timestamp) {}\n\n        // By default does nothing\n        //\n        // finishTime is expected to be either a number or undefined.\n\n    }, {\n        key: '_finish',\n        value: function _finish(finishTime) {}\n    }]);\n\n    return Span;\n}();\n\nexports.default = Span;\n\n//# sourceMappingURL=span.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/span.js\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.span = exports.spanContext = exports.tracer = undefined;\nexports.initialize = initialize;\n\nvar _tracer = require('./tracer');\n\nvar _tracer2 = _interopRequireDefault(_tracer);\n\nvar _span_context = require('./span_context');\n\nvar _span_context2 = _interopRequireDefault(_span_context);\n\nvar _span = require('./span');\n\nvar _span2 = _interopRequireDefault(_span);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-mutable-exports */\nvar tracer = exports.tracer = null;\nvar spanContext = exports.spanContext = null;\nvar span = exports.span = null;\n/* eslint-enable import/no-mutable-exports */\n\n// Deferred initialization to avoid a dependency cycle where Tracer depends on\n// Span which depends on the noop tracer.\nfunction initialize() {\n    exports.tracer = tracer = new _tracer2.default();\n    exports.span = span = new _span2.default();\n    exports.spanContext = spanContext = new _span_context2.default();\n}\n\n//# sourceMappingURL=noop.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/noop.js\n ** module id = 7\n ** module chunks = 0\n **/","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * SpanContext represents Span state that must propagate to descendant Spans\n * and across process boundaries.\n *\n * SpanContext is logically divided into two pieces: the user-level \"Baggage\"\n * (see setBaggageItem and getBaggageItem) that propagates across Span\n * boundaries and any Tracer-implementation-specific fields that are needed to\n * identify or otherwise contextualize the associated Span instance (e.g., a\n * <trace_id, span_id, sampled> tuple).\n */\nvar SpanContext = function SpanContext() {\n  _classCallCheck(this, SpanContext);\n};\n\nexports.default = SpanContext;\n\n//# sourceMappingURL=span_context.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/span_context.js\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * The FORMAT_BINARY format represents SpanContexts in an opaque binary\n * carrier.\n *\n * Tracer.inject() will set the buffer field to an Array-like (Array,\n * ArrayBuffer, or TypedBuffer) object containing the injected binary data.\n * Any valid Object can be used as long as the buffer field of the object\n * can be set.\n *\n * Tracer.extract() will look for `carrier.buffer`, and that field is\n * expected to be an Array-like object (Array, ArrayBuffer, or\n * TypedBuffer).\n */\nvar FORMAT_BINARY = exports.FORMAT_BINARY = 'binary';\n\n/**\n * The FORMAT_TEXT_MAP format represents SpanContexts using a\n * string->string map (backed by a Javascript Object) as a carrier.\n *\n * NOTE: Unlike FORMAT_HTTP_HEADERS, FORMAT_TEXT_MAP places no restrictions\n * on the characters used in either the keys or the values of the map\n * entries.\n *\n * The FORMAT_TEXT_MAP carrier map may contain unrelated data (e.g.,\n * arbitrary gRPC metadata); as such, the Tracer implementation should use\n * a prefix or other convention to distinguish Tracer-specific key:value\n * pairs.\n */\nvar FORMAT_TEXT_MAP = exports.FORMAT_TEXT_MAP = 'text_map';\n\n/**\n * The FORMAT_HTTP_HEADERS format represents SpanContexts using a\n * character-restricted string->string map (backed by a Javascript Object)\n * as a carrier.\n *\n * Keys and values in the FORMAT_HTTP_HEADERS carrier must be suitable for\n * use as HTTP headers (without modification or further escaping). That is,\n * the keys have a greatly restricted character set, casing for the keys\n * may not be preserved by various intermediaries, and the values should be\n * URL-escaped.\n *\n * The FORMAT_HTTP_HEADERS carrier map may contain unrelated data (e.g.,\n * arbitrary HTTP headers); as such, the Tracer implementation should use a\n * prefix or other convention to distinguish Tracer-specific key:value\n * pairs.\n */\nvar FORMAT_HTTP_HEADERS = exports.FORMAT_HTTP_HEADERS = 'http_headers';\n\n/**\n * A Span may be the \"child of\" a parent Span. In a “child of” reference,\n * the parent Span depends on the child Span in some capacity.\n *\n * See more about reference types at http://opentracing.io/spec/\n */\nvar REFERENCE_CHILD_OF = exports.REFERENCE_CHILD_OF = 'child_of';\n\n/**\n * Some parent Spans do not depend in any way on the result of their child\n * Spans. In these cases, we say merely that the child Span “follows from”\n * the parent Span in a causal sense.\n *\n * See more about reference types at http://opentracing.io/spec/\n */\nvar REFERENCE_FOLLOWS_FROM = exports.REFERENCE_FOLLOWS_FROM = 'follows_from';\n\n//# sourceMappingURL=constants.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/constants.js\n ** module id = 9\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.childOf = childOf;\nexports.followsFrom = followsFrom;\n\nvar _constants = require('./constants');\n\nvar Constants = _interopRequireWildcard(_constants);\n\nvar _span = require('./span');\n\nvar _span2 = _interopRequireDefault(_span);\n\nvar _reference = require('./reference');\n\nvar _reference2 = _interopRequireDefault(_reference);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * Return a new REFERENCE_CHILD_OF reference.\n *\n * @param {SpanContext} spanContext - the parent SpanContext instance to\n *        reference.\n * @return a REFERENCE_CHILD_OF reference pointing to `spanContext`\n */\nfunction childOf(spanContext) {\n    // Allow the user to pass a Span instead of a SpanContext\n    if (spanContext instanceof _span2.default) {\n        spanContext = spanContext.context();\n    }\n    return new _reference2.default(Constants.REFERENCE_CHILD_OF, spanContext);\n}\n\n/**\n * Return a new REFERENCE_FOLLOWS_FROM reference.\n *\n * @param {SpanContext} spanContext - the parent SpanContext instance to\n *        reference.\n * @return a REFERENCE_FOLLOWS_FROM reference pointing to `spanContext`\n */\nfunction followsFrom(spanContext) {\n    // Allow the user to pass a Span instead of a SpanContext\n    if (spanContext instanceof _span2.default) {\n        spanContext = spanContext.context();\n    }\n    return new _reference2.default(Constants.REFERENCE_FOLLOWS_FROM, spanContext);\n}\n\n//# sourceMappingURL=functions.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/functions.js\n ** module id = 10\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _span = require('./span');\n\nvar _span2 = _interopRequireDefault(_span);\n\nvar _span_context = require('./span_context');\n\nvar _span_context2 = _interopRequireDefault(_span_context);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Reference pairs a reference type constant (e.g., REFERENCE_CHILD_OF or\n * REFERENCE_FOLLOWS_FROM) with the SpanContext it points to.\n *\n * See the exported childOf() and followsFrom() functions at the package level.\n */\nvar Reference = function () {\n    _createClass(Reference, [{\n        key: 'type',\n\n\n        /**\n         * @return {string} The Reference type (e.g., REFERENCE_CHILD_OF or\n         *         REFERENCE_FOLLOWS_FROM).\n         */\n        value: function type() {\n            return this._type;\n        }\n\n        /**\n         * @return {SpanContext} The SpanContext being referred to (e.g., the\n         *         parent in a REFERENCE_CHILD_OF Reference).\n         */\n\n    }, {\n        key: 'referencedContext',\n        value: function referencedContext() {\n            return this._referencedContext;\n        }\n\n        /**\n         * Initialize a new Reference instance.\n         *\n         * @param {string} type - the Reference type constant (e.g.,\n         *        REFERENCE_CHILD_OF or REFERENCE_FOLLOWS_FROM).\n         * @param {SpanContext} referencedContext - the SpanContext being referred\n         *        to. As a convenience, a Span instance may be passed in instead\n         *        (in which case its .context() is used here).\n         */\n\n    }]);\n\n    function Reference(type, referencedContext) {\n        _classCallCheck(this, Reference);\n\n        this._type = type;\n        this._referencedContext = referencedContext instanceof _span2.default ? referencedContext.context() : referencedContext;\n    }\n\n    return Reference;\n}();\n\nexports.default = Reference;\n\n//# sourceMappingURL=reference.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/reference.js\n ** module id = 11\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = {\n\n    /** ------------------------------------------------------------------------\n    * SPAN_KIND hints at relationship between spans, e.g. client/server\n    * --------------------------------------------------------------------------*/\n    SPAN_KIND: 'span.kind',\n\n    // Marks a span representing the client-side of an RPC or other remote call\n    SPAN_KIND_RPC_CLIENT: 'client',\n\n    // Marks a span representing the server-side of an RPC or other remote call\n    SPAN_KIND_RPC_SERVER: 'server',\n\n    /** ------------------------------------------------------------------------\n    * ERROR (boolean) indicates whether a Span ended in an error state.\n    * --------------------------------------------------------------------------*/\n    ERROR: 'error',\n\n    /** ------------------------------------------------------------------------\n    * COMPONENT (string) ia s low-cardinality identifier of the module, library,\n    * or package that is generating a span.\n    * --------------------------------------------------------------------------*/\n    COMPONENT: 'component',\n\n    /** ------------------------------------------------------------------------\n    * SAMPLING_PRIORITY (number) determines the priority of sampling this Span.\n    * --------------------------------------------------------------------------*/\n    SAMPLING_PRIORITY: 'sampling.priority',\n\n    /** ------------------------------------------------------------------------\n    * PEER_* tags can be emitted by either client-side of server-side to describe\n    * the other side/service in a peer-to-peer communications, like an RPC call.\n    * ---------------------------------------------------------------------------*/\n\n    // PEER_SERVICE (string) records the service name of the peer\n    PEER_SERVICE: 'peer.service',\n\n    // PEER_HOSTNAME records the host name of the peer\n    PEER_HOSTNAME: 'peer.hostname',\n\n    // PEER_HOST_IPV4 (number) records IP v4 host address of the peer\n    PEER_HOST_IPV4: 'peer.ipv4',\n\n    // PEER_HOST_IPV6 (string) records IP v6 host address of the peer\n    PEER_HOST_IPV6: 'peer.ipv6',\n\n    // PEER_PORT (number) records port number of the peer\n    PEER_PORT: 'peer.port',\n\n    /** ------------------------------------------------------------------------\n    * HTTP tags\n    * ---------------------------------------------------------------------------*/\n\n    // HTTP_URL (string) should be the URL of the request being handled in this\n    // segment of the trace, in standard URI format. The protocol is optional.\n    HTTP_URL: 'http.url',\n\n    // HTTP_METHOD (string) is the HTTP method of the request.\n    // Both upper/lower case values are allowed.\n    HTTP_METHOD: 'http.method',\n\n    // HTTP_STATUS_CODE (number) is the numeric HTTP status code (200, 404, etc)\n    // of the HTTP response.\n    HTTP_STATUS_CODE: 'http.status_code'\n};\n\n//# sourceMappingURL=tags.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/ext/tags.js\n ** module id = 12\n ** module chunks = 0\n **/","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Convenience class to use as a binary carrier.\n *\n * Any valid Object with a field named `buffer` may be used as a binary carrier;\n * this class is only one such type of object that can be used.\n */\nvar BinaryCarrier = function BinaryCarrier(binaryData) {\n    _classCallCheck(this, BinaryCarrier);\n\n    this._buffer = binaryData;\n};\n\nexports.default = BinaryCarrier;\n\n//# sourceMappingURL=binary_carrier.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/opentracing/lib/binary_carrier.js\n ** module id = 13\n ** module chunks = 0\n **/","import _each from '../_each';\n\nexport default class SpanContextImp {\n\n    // ---------------------------------------------------------------------- //\n    // OpenTracing Implementation\n    // ---------------------------------------------------------------------- //\n\n    setBaggageItem(key, value) {\n        this._baggage[key] = value;\n    }\n\n    getBaggageItem(key) {\n        return this._baggage[key];\n    }\n\n    // ---------------------------------------------------------------------- //\n    // LightStep Extensions\n    // ---------------------------------------------------------------------- //\n\n    // This is part of the formal OT API in Go; and will likely be supported\n    // across platforms.\n    //\n    // https://github.com/opentracing/opentracing.github.io/issues/103\n    forEachBaggageItem(f) {\n        _each(this._baggage, (val, key) => {\n            f(key, val);\n        });\n    }\n\n    // ---------------------------------------------------------------------- //\n    // Private methods\n    // ---------------------------------------------------------------------- //\n\n    constructor(spanGUID, traceGUID) {\n        this._baggage = {};\n        this._guid        = spanGUID;\n        this._traceGUID   = traceGUID;\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/span_context_imp.js\n **/","// Underscore.js-like wrapper to iterate object key-values. Note that even for completely\n// internal objects, packages may modify default Object prototypes and properties\n// (e.g. Ember.js) so it's almost never safe to assume a particular object can\n// iterated with for-in.\nexport default function _each(obj, cb) {\n    if (!obj) {\n        return;\n    }\n    for (let key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            cb(obj[key], key);\n        }\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/_each.js\n **/","import * as coerce from './coerce.js';\nimport * as constants from '../constants';\nimport _each from '../_each';\nimport opentracing from 'opentracing';\nimport { crouton_thrift } from '../platform_abstraction_layer'; // eslint-disable-line camelcase\n\nexport default class SpanImp extends opentracing.Span {\n\n    // ---------------------------------------------------------------------- //\n    // opentracing.Span SPI\n    // ---------------------------------------------------------------------- //\n\n    _tracer() {\n        return this._tracerImp;\n    }\n\n    _context() {\n        return this._ctx;\n    }\n\n    _setOperationName(name) {\n        this._operationName = `${name}`;\n    }\n\n    _addTags(keyValuePairs) {\n        let self = this;\n        _each(keyValuePairs, (value, key) => {\n            self._tags[key] = value;\n        });\n    }\n\n    _log(keyValuePairs, timestamp) {\n        let self = this;\n        const argumentType = typeof keyValuePairs;\n        if (argumentType !== 'object') {\n            self._tracerImp._error('Span.log() expects an object as its first argument');\n            return;\n        }\n\n        let tsMicros = null;\n        if (timestamp) {\n            tsMicros = timestamp * 1000;\n        } else {\n            tsMicros = self._tracerImp._platform.nowMicros();\n        }\n        let fields = [];\n        _each(keyValuePairs, (value, key) => {\n            if (!key || !value) {\n                return;\n            }\n            let keyStr = coerce.toString(key);\n            let valStr = null;\n            if (value instanceof Object) {\n                try {\n                    valStr = JSON.stringify(value, null, '  ');\n                } catch (e) {\n                    valStr = `Could not encode value. Exception: ${e}`;\n                }\n            } else {\n                valStr = coerce.toString(value);\n            }\n            if (keyStr.length > self._tracerImp._options.log_field_key_hard_limit) {\n                self._tracerImp._counters['logs.keys.over_limit']++;\n                keyStr = `${keyStr.substr(0, self._tracerImp._options.log_field_key_hard_limit)}...`;\n            }\n            if (valStr.length > self._tracerImp._options.log_field_value_hard_limit) {\n                self._tracerImp._counters['logs.values.over_limit']++;\n                valStr = `${valStr.substr(0, self._tracerImp._options.log_field_value_hard_limit)}...`;\n            }\n            fields.push(new crouton_thrift.KeyValue({\n                Key   : keyStr,\n                Value : valStr,\n            }));\n        });\n        let record = new crouton_thrift.LogRecord({\n            timestamp_micros : tsMicros,\n            fields           : fields,\n        });\n        self._log_records = self._log_records || [];\n        self._log_records.push(record);\n        self._tracerImp.emit('log_added', record);\n    }\n\n    _finish(finishTime) {\n        return this.end(finishTime);\n    }\n\n    // ---------------------------------------------------------------------- //\n    // Private methods\n    // ---------------------------------------------------------------------- //\n\n    constructor(tracer, name, spanContext) {\n        super();\n\n        console.assert(typeof tracer === 'object', 'Invalid runtime');  // eslint-disable-line no-console\n\n        this._tracerImp = tracer;\n        this._ctx = spanContext;\n        this._ended  = false;\n\n        this._operationName = name;\n        this._tags          = {};\n        this._beginMicros   = tracer._platform.nowMicros();\n        this._endMicros     = 0;\n        this._errorFlag     = false;\n        this._log_records   = null;\n    }\n\n    // ---------------------------------------------------------------------- //\n    // LightStep Extensions\n    // ---------------------------------------------------------------------- //\n\n    getOperationName() {\n        return this._operationName;\n    }\n\n    // Getter only. The GUID is immutable once set internally.\n    guid() {\n        return this._ctx._guid;\n    }\n\n    traceGUID() {\n        return this._ctx._traceGUID;\n    }\n\n    parentGUID() {\n        return this._tags.parent_span_guid;\n    }\n\n    setParentGUID(guid) {\n        this._tags.parent_span_guid = coerce.toString(guid);\n        return this;\n    }\n\n    beginMicros() {\n        return this._beginMicros;\n    }\n\n    setBeginMicros(micros) {\n        this._beginMicros = micros;\n        return this;\n    }\n\n    endMicros() {\n        return this._endMicros;\n    }\n\n    setEndMicros(micros) {\n        this._endMicros = micros;\n        return this;\n    }\n\n    /**\n     * Returns a URL to the trace containing this span.\n     *\n     * Unlike most methods, it *is* safe to call this method after `finish()`.\n     *\n     * @return {string} the absolute URL for the span\n     */\n    generateTraceURL() {\n        let micros;\n        if (this._beginMicros > 0 && this._endMicros > 0) {\n            micros = Math.floor((this._beginMicros + this._endMicros) / 2);\n        } else {\n            micros = this._tracerImp._platform.nowMicros();\n        }\n\n        let urlPrefix = constants.LIGHTSTEP_APP_URL_PREFIX;\n        let accessToken = encodeURIComponent(this._tracerImp.options().access_token);\n        let guid = encodeURIComponent(this.guid());\n        return `${urlPrefix}/${accessToken}/trace?span_guid=${guid}&at_micros=${micros}`;\n    }\n\n    getTags() {\n        return this._tags;\n    }\n\n    /**\n     * Finishes the span.\n     *\n     * @param  {Number} finishTime\n     *         \tOptional Unix timestamp in milliseconds setting an explicit\n     *         \tfinish time for the span.\n     */\n    end(finishTime) {\n        // Ensure a single span is not recorded multiple times\n        if (this._ended) {\n            return;\n        }\n        this._ended = true;\n\n        if (finishTime !== undefined) {\n            this._endMicros = finishTime * 1000;\n        }\n\n        // Do not set endMicros if it has already been set. This accounts for\n        // the case of a span that has had it's times set manually (i.e. allows\n        // for retroactively created spans that might not be possible to create\n        // in real-time).\n        if (this._endMicros === 0) {\n            this._endMicros = this._tracerImp._platform.nowMicros();\n        }\n        this._tracerImp._addSpanRecord(this._toThrift());\n    }\n\n    _toThrift() {\n        let attributes = [];\n        _each(this._tags, (value, key) => {\n            attributes.push(new crouton_thrift.KeyValue({\n                Key   : coerce.toString(key),\n                Value : coerce.toString(value),\n            }));\n        });\n\n        let record = new crouton_thrift.SpanRecord({\n            span_guid       : this.guid(),\n            trace_guid      : this.traceGUID(),\n            runtime_guid    : this._tracerImp.guid(),\n            span_name       : this._operationName,\n            oldest_micros   : this._beginMicros,\n            youngest_micros : this._endMicros,\n            attributes      : attributes,\n            error_flag      : this._errorFlag,\n            log_records     : this._log_records,\n        });\n        return record;\n    }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/span_imp.js\n **/","\nexport function toString(value) {\n    return '' + value;  // eslint-disable-line prefer-template\n}\n\nexport function toNumber(value) {\n    return Number(value);\n}\n\nexport function toBoolean(value) {\n    return !!value;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/coerce.js\n **/","\nexport const LOG_INFO = 0;\nexport const LOG_WARN = 1;\nexport const LOG_ERROR = 2;\nexport const LOG_FATAL = 3;\n\nexport const LOG_LEVEL_TO_STRING = {\n    LOG_INFO  : 'I',\n    LOG_WARN  : 'W',\n    LOG_ERROR : 'E',\n    LOG_FATAL : 'F',\n};\nexport const LOG_STRING_TO_LEVEL = {\n    I : LOG_INFO,\n    W : LOG_WARN,\n    E : LOG_ERROR,\n    F : LOG_FATAL,\n};\n\n// The report interval for empty reports used to sample the clock skew\nexport const CLOCK_STATE_REFRESH_INTERVAL_MS = 350;\n\nexport const LIGHTSTEP_APP_URL_PREFIX = 'https://app.lightstep.com';\n\nexport const JOIN_ID_PREFIX = 'join:';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants.js\n **/","/* global PLATFORM_BROWSER */\n\n// Hide the differences in how the Thrift compiler generates code for the\n// different platforms as well as expose a Platform class to abstract a few\n// general differences in the platforms.\nif ((typeof PLATFORM_BROWSER !== 'undefined') && PLATFORM_BROWSER) {\n    module.exports = {\n        Platform       : require('./imp/platform/browser/platform_browser.js'),\n        Transport      : require('./imp/platform/browser/transport_httpjson.js'),\n        thrift         : require('./imp/platform/browser/thrift.js'),\n        crouton_thrift : require('./imp/platform/browser/crouton_thrift.js'),\n    };\n} else {\n    module.exports = {\n        Platform       : require('./imp/platform/node/platform_node.js'),\n        Transport      : require('./imp/platform/node/transport_httpjson.js'),\n        thrift         : require('thrift'),\n        crouton_thrift : require('./imp/platform/node/crouton_thrift.js'),\n    };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/platform_abstraction_layer.js\n **/","const optionsParser = require('./options_parser.js');\nconst util = require('./util');\n\nconst kRuntimeGUIDCookiePrefix = 'lightstep_guid';\nconst kSessionIDCookieKey = 'lightstep_session_id';\nconst kCookieTimeToLiveSeconds = 7 * 24 * 60 * 60;\n\nlet nowMicrosImp = (function () {\n    // Is a hi-res timer available?\n    if (window.performance &&\n        window.performance.now &&\n        window.performance.timing &&\n        window.performance.timing.navigationStart) {\n        let start = performance.timing.navigationStart;\n        return function () {\n            return Math.floor((start + performance.now()) * 1000.0);\n        };\n    }\n    // The low-res timer is the best we can do\n    return function () {\n        return Date.now() * 1000.0;\n    };\n}());\n\nclass PlatformBrowser {\n\n    name() {\n        return 'browser';\n    }\n\n    nowMicros() {\n        return nowMicrosImp();\n    }\n\n    // Return the GUID to use for the runtime. The intention is to reuse the\n    // GUID so that logically a single browser session looks like a single\n    // runtime.\n    runtimeGUID(groupName) {\n        // Account for the groupName in the same that multiple apps or services\n        // are running on the same domain (and should not share the same\n        // runtime GUID).\n        let cookieKey = `${kRuntimeGUIDCookiePrefix}/${groupName}`;\n        let uuid = util.cookie(cookieKey) || this._generateLongUUID();\n        util.cookie(cookieKey, uuid, kCookieTimeToLiveSeconds, '/');\n\n        // Also create a session ID as well to give the server more information\n        // to coordinate with.\n        let sessionID = util.cookie(kSessionIDCookieKey) || this._generateLongUUID();\n        util.cookie(kSessionIDCookieKey, sessionID, kCookieTimeToLiveSeconds, '/');\n\n        return uuid;\n    }\n\n    generateUUID() {\n        return this._generateLongUUID();\n    }\n\n    _generateLongUUID() {\n        let p0 = `00000000${Math.abs((Math.random() * 0xFFFFFFFF) | 0).toString(16)}`.substr(-8);\n        let p1 = `00000000${Math.abs((Math.random() * 0xFFFFFFFF) | 0).toString(16)}`.substr(-8);\n        return `${p0}${p1}`;\n    }\n\n    onBeforeExit(...args) {\n        if (window) {\n            window.addEventListener('beforeunload', ...args);\n        }\n    }\n\n    plugins(opts) {\n        return [\n            require('../../../plugins/instrument_xhr'),\n            require('../../../plugins/instrument_document_load'),\n        ];\n    }\n\n    options(imp) {\n        let tracerOpts = {};\n        let browserOpts = {};\n        optionsParser.parseScriptElementOptions(tracerOpts, browserOpts);\n        optionsParser.parseURLQueryOptions(tracerOpts, browserOpts);\n        return tracerOpts;\n    }\n\n    static initLibrary(lib) {\n        let tracerOpts = {};\n        let browserOpts = {};\n        optionsParser.parseScriptElementOptions(tracerOpts, browserOpts);\n\n        if (browserOpts.init_global_tracer) {\n            PlatformBrowser.initGlobalTracer(lib, tracerOpts);\n        }\n    }\n    static initGlobalTracer(lib, opts) {\n        if (typeof window !== 'object') {\n            return;\n        }\n        if (typeof window.opentracing !== 'object') {\n            return;\n        }\n        opentracing.initGlobalTracer(new lib.Tracer(opts));  // eslint-disable-line no-undef\n    }\n\n    tracerTags() {\n        return {\n            'lightstep.tracer_platform' : 'browser',\n        };\n    }\n\n    // There's no way to truly \"fatal\" on the browser; the best approximation\n    // is an Error exception.\n    fatal(message) {\n        throw new Error(message);\n    }\n\n    localStoreGet(key) {\n        if (!window.sessionStorage) {\n            return null;\n        }\n        try {\n            return JSON.parse(sessionStorage.getItem(`lightstep/${key}`));\n        } catch (_ignored) {\n            return null;\n        }\n    }\n\n    localStoreSet(key, value) {\n        if (!window.sessionStorage) {\n            return;\n        }\n        try {\n            sessionStorage.setItem(`lightstep/${key}`, JSON.stringify(value));\n        } catch (_ignored) { /* Ignored */ }\n    }\n}\n\nmodule.exports = PlatformBrowser;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/platform/browser/platform_browser.js\n **/","// Find the HTML element that included the tracing library (if there is one).\n// This relies on the fact that scripts are executed as soon as they are\n// included -- thus 'this' script is the last one in the array at the time\n// this is run.\nlet hostScriptElement = (function () {\n    let scripts = document.getElementsByTagName('SCRIPT');\n    if (!(scripts.length > 0)) {\n        return null;\n    }\n    return scripts[scripts.length - 1];\n}());\n\nfunction urlQueryParameters(defaults) {\n    let vars = {};\n    let qi = window.location.href.indexOf('?');\n    if (qi < 0) {\n        return vars;\n    }\n    let slice = window.location.href.slice(qi + 1);\n    if (slice.indexOf('#') >= 0) {\n        slice = slice.slice(0, slice.indexOf('#'));\n    }\n    let hashes = slice.replace(/\\+/, '%20').split('&');\n    for (let i = 0; i < hashes.length; i++) {\n        let hash = hashes[i].split('=');\n        vars[decodeURIComponent(hash[0])] = decodeURIComponent(hash[1]);\n    }\n    return vars;\n}\n\n// Parses options out of the host <script> element. Allows for easy configuration\n// via the HTML element. Example:\n//\n// <script src='lightstep.min.js'\n//      data-access_token='{my_access_token}'\n//      data-component_name='my_component'></script>\n//\n// Note: relies on the global hostScriptElement variable defined above.\n//\nmodule.exports.parseScriptElementOptions = function (opts, browserOpts) {\n    if (!hostScriptElement) {\n        return;\n    }\n\n    let dataset = hostScriptElement.dataset;\n\n    let accessToken = dataset.access_token;\n    if (typeof accessToken === 'string' && accessToken.length > 0) {\n        opts.access_token = accessToken;\n    }\n\n    let componentName = dataset.component_name;\n    if (typeof componentName === 'string' && componentName.length > 0) {\n        opts.component_name = componentName;\n    }\n\n    let collectorHost = dataset.collector_host;\n    if (typeof collectorHost === 'string' && collectorHost.length > 0) {\n        opts.collector_host = collectorHost;\n    }\n    let collectorPort = dataset.collector_port;\n    if (collectorPort) {\n        opts.collector_port = parseInt(collectorPort, 10);\n    }\n    let collectorEncryption = dataset.collector_encryption;\n    if (collectorEncryption) {\n        opts.collector_encryption = collectorEncryption;\n    }\n\n    let enable = dataset.enable;\n    if (typeof enable === 'string') {\n        if (enable === 'true') {\n            opts.enable = true;\n        } else if (enable === 'false') {\n            opts.enable = false;\n        }\n    }\n    let verbosity = dataset.verbosity;\n    if (typeof verbosity === 'string') {\n        opts.verbosity = parseInt(verbosity, 10);\n    }\n\n    let init = dataset.init_global_tracer;\n    if (typeof init === 'string') {\n        if (init === 'true') {\n            browserOpts.init_global_tracer = true;\n        } else if (init === 'false') {\n            browserOpts.init_global_tracer = false;\n        }\n    }\n\n    // NOTE: this is a little inelegant as this is hard-coding support for a\n    // \"plug-in\" option.\n    let xhrInstrumentation = dataset.xhr_instrumentation;\n    if (typeof xhrInstrumentation === 'string' && xhrInstrumentation === 'true') {\n        opts.xhr_instrumentation = true;\n    }\n};\n\n// Parses options out of the current URL query string. The query parameters use\n// the 'lightstep_' prefix to reduce the chance of collision with\n// application-specific query parameters.\n//\n// This mechanism is particularly useful for debugging purposes as it does not\n// require any code or configuration changes.\n//\nmodule.exports.parseURLQueryOptions = function (opts) {\n    if (!window) {\n        return;\n    }\n\n    let params = urlQueryParameters();\n    if (params.lightstep_verbosity) {\n        try {\n            opts.verbosity = parseInt(params.lightstep_verbosity, 10);\n        } catch (_ignored) { /* Ignored */ }\n    }\n    if (params.lightstep_log_to_console) {\n        opts.log_to_console = true;\n    }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/platform/browser/options_parser.js\n **/","/* eslint-disable */\n\n// This function is copied directly from https://github.com/litejs/browser-cookie-lite.\n// It is licensed under the MIT License and authored by Lauri Rooden.\nfunction cookie(name, value, ttl, path, domain, secure) {\n    if (arguments.length > 1) {\n        let newCookie = name + '=' + encodeURIComponent(value) +\n            (ttl ? \"; expires=\" + new Date(+new Date()+(ttl*1000)).toUTCString() : '') +\n            (path   ? \"; path=\" + path : '') +\n            (domain ? \"; domain=\" + domain : '') +\n            (secure ? \"; secure\" : '');\n        document.cookie = newCookie;\n        return newCookie;\n    }\n    return decodeURIComponent(((\"; \"+document.cookie).split(\"; \"+name+\"=\")[1]||\"\").split(\";\")[0]);\n}\n\n/* eslint-enable */\n\nmodule.exports = {\n    cookie : cookie,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/platform/browser/util.js\n **/","import _each from '../_each';\n\n// Capture the proxied values on script load (i.e. ASAP) in case there are\n// multiple layers of instrumentation.\nlet proxied = {};\nif (typeof window === 'object' && typeof window.XMLHttpRequest !== 'undefined') {\n    proxied = {\n        XMLHttpRequest   : XMLHttpRequest,\n        open             : XMLHttpRequest.prototype.open,\n        send             : XMLHttpRequest.prototype.send,\n        setRequestHeader : XMLHttpRequest.prototype.setRequestHeader,\n    };\n}\n\nfunction getCookies() {\n    if (typeof document === 'undefined' || !document.cookie) {\n        return null;\n    }\n    let cookies = document.cookie.split(';');\n    let data = {};\n    let count = 0;\n    for (let i = 0; i < cookies.length; i++) {\n        let parts = cookies[i].split('=', 2);\n        if (parts.length === 2) {\n            let key = parts[0].replace(/^\\s+/, '').replace(/\\s+$/, '');\n            data[key] = decodeURIComponent(parts[1]);\n            try {\n                data[key] = JSON.parse(data[key]);\n            } catch (_ignored) { /* Ignored */ }\n            count++;\n        }\n    }\n    if (count > 0) {\n        return data;\n    }\n    return null;\n}\n\n// Normalize the getAllResponseHeaders output\nfunction getResponseHeaders(xhr) {\n    let raw = xhr.getAllResponseHeaders();\n    let parts = raw.replace(/\\s+$/, '').split(/\\n/);\n    for (let i = 0; i < parts.length; i++) {\n        parts[i] = parts[i].replace(/\\r/g, '').replace(/^\\s+/, '').replace(/\\s+$/, '');\n    }\n    return parts;\n}\n\n// Automatically create spans for all XMLHttpRequest objects.\n//\n// NOTE: this code currently works only with a single Tracer.\n//\nclass InstrumentXHR {\n    constructor() {\n        this._enabled = this._isValidContext();\n        this._proxyInited = false;\n        this._internalExclusions = [];\n        this._tracer = null;\n        this._handleOptions = this._handleOptions.bind(this);\n\n        if (!this._enabled) {\n            return;\n        }\n    }\n\n    name() {\n        return 'instrument_xhr';\n    }\n\n    addOptions(tracerImp) {\n        tracerImp.addOption('xhr_instrumentation', { type : 'bool', defaultValue : false });\n        tracerImp.addOption('xhr_url_inclusion_patterns', { type : 'array', defaultValue : [/.*/] });\n        tracerImp.addOption('xhr_url_exclusion_patterns', { type : 'array', defaultValue : [] });\n    }\n\n    start(tracerImp) {\n        if (!this._enabled) {\n            return;\n        }\n        this._tracer = tracerImp;\n\n        let currentOptions = tracerImp.options();\n        this._addServiceHostToExclusions(currentOptions);\n        this._handleOptions({}, currentOptions);\n        tracerImp.on('options', this._handleOptions);\n    }\n\n    stop() {\n        if (!this._enabled) {\n            return;\n        }\n        let proto = proxied.XMLHttpRequest.prototype;\n        proto.open = proxied.open;\n        proto.send = proxied.send;\n    }\n\n    /**\n     * Respond to options changes on the Tracer.\n     *\n     * Note that `modified` is the options that have changed in this call,\n     * along with their previous and new values. `current` is the full set of\n     * current options *including* the newly modified values.\n     */\n    _handleOptions(modified, current) {\n        // Automatically add the service host itself to the list of exclusions\n        // to avoid reporting on the reports themselves\n        let serviceHost = modified.collector_host;\n        if (serviceHost) {\n            this._addServiceHostToExclusions(current);\n        }\n\n        // Set up the proxied XHR calls unless disabled\n        if (!this._proxyInited && current.xhr_instrumentation) {\n            this._proxyInited = true;\n            let proto = proxied.XMLHttpRequest.prototype;\n            proto.setRequestHeader = this._instrumentSetRequestHeader();\n            proto.open = this._instrumentOpen();\n            proto.send = this._instrumentSend();\n        }\n    }\n\n    /**\n     * Ensure that the reports to the collector don't get instrumented as well,\n     * as that recursive instrumentation is more confusing than valuable!\n     */\n    _addServiceHostToExclusions(opts) {\n        if (opts.collector_host.length === 0) {\n            return;\n        }\n\n        // http://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\n        function escapeRegExp(str) {\n            return (`${str}`).replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n        }\n\n        // Check against the hostname without the port as well as the canonicalized\n        // URL may drop the standard port.\n        let host = escapeRegExp(opts.collector_host);\n        let port = escapeRegExp(opts.collector_port);\n        let set = [new RegExp(`^https?://${host}:${port}`)];\n        if (port === '80') {\n            set.push(new RegExp(`^http://${host}`));\n        } else if (port === '443') {\n            set.push(new RegExp(`^https://${host}`));\n        }\n        this._internalExclusions = set;\n    }\n\n    /**\n     * Check preconditions for the auto-instrumentation of XHRs to work properly.\n     * There are a lot of potential JavaScript platforms.\n     */\n    _isValidContext() {\n        if (typeof window === 'undefined') {\n            return false;\n        }\n        if (!window.XMLHttpRequest) {\n            return false;\n        }\n        if (!window.XMLHttpRequest.prototype) {\n            return false;\n        }\n        return true;\n    }\n\n    _instrumentSetRequestHeader() {\n        return function (header, value) {\n            this.__requestHeaders = this.__requestHeaders || {};\n            this.__requestHeaders[header] = value;\n            return proxied.setRequestHeader.apply(this, arguments);\n        };\n    }\n\n    _instrumentOpen() {\n        let self = this;\n        let tracer = this._tracer;\n\n        return function (method, url, asyncArg, user, password) {\n            if (!self._shouldTrace(tracer, this, url)) {\n                return proxied.open.apply(this, arguments);\n            }\n\n            let span = tracer.startSpan('XMLHttpRequest');\n            tracer.addActiveRootSpan(span);\n            this.__tracer_span = span;\n            this.__tracer_url = url;\n\n            let tags = {\n                method : method,\n                url    : url,\n                async  : asyncArg,\n                user   : user,\n            };\n            if (url) {\n                tags.url_pathname = url.split('?')[0];\n            }\n\n            let openPayload = {};\n            _each(tags, (val, key) => {\n                openPayload[key] = val;\n            });\n            openPayload.cookies = getCookies();\n\n            // Note: async defaults to true\n            let async = (asyncArg === undefined ? true : asyncArg);\n            if (async) {\n                this.addEventListener('readystatechange', function () {\n                    if (this.readyState === 0) {\n                        span.log({\n                            readyState : 0,\n                            event      : 'unsent',\n                        });\n                    } else if (this.readyState === 1) {\n                        span.log({\n                            readyState : 1,\n                            event      : 'sending',\n                        });\n                    } else if (this.readyState === 2) {\n                        span.log({\n                            readyState  : 2,\n                            event       : 'headers received',\n                            method      : method,\n                            url         : url,\n                            openPayload : openPayload,\n                            headers     : getResponseHeaders(this),\n                        });\n                        span.addTags(tags);\n                    } else if (this.readyState === 3) {\n                        span.log({\n                            readyState : 3,\n                            event      : 'loading',\n                        });\n                    } else if (this.readyState === 4) {\n                        let responseType = this.responseType;\n                        span.log({\n                            readyState   : 4,\n                            url          : url,\n                            method       : method,\n                            headers      : getResponseHeaders(this),\n                            status       : this.status,\n                            statusText   : this.statusText,\n                            responseType : responseType,\n                        });\n                        tracer.removeActiveRootSpan(span);\n                        span.finish();\n                    } else {\n                        span.log({\n                            readyState : this.readyState,\n                        });\n                    }\n                });\n            }\n\n            let result = proxied.open.apply(this, arguments);\n            if (!async) {\n                tracer.removeActiveRootSpan(span);\n                span.finish();\n            }\n            return result;\n        };\n    }\n\n    _instrumentSend() {\n        let self = this;\n        let tracer = this._tracer;\n        return function () {\n            if (!self._shouldTrace(tracer, this, this.__tracer_url)) {\n                return proxied.send.apply(this, arguments);\n            }\n\n            let span = this.__tracer_span;\n            if (!span) {\n                return proxied.send.apply(this, arguments);\n            }\n\n            let data = Array.prototype.slice.call(arguments);\n            let len = undefined;\n            if (data.length === 1) {\n                if (data[0] && data[0].length) {\n                    len = data[0].length;\n                }\n                try {\n                    data = JSON.parse(data[0]);\n                } catch (e) {\n                    // Ignore the error\n                }\n            }\n            let lenStr = (len === undefined) ? '' : `, data length=${len}`;\n            span.log({\n                event       : 'send',\n                data_length : lenStr,\n            });\n            return proxied.send.apply(this, arguments);\n        };\n    }\n\n    _shouldTrace(tracer, xhr, url) {\n        // This shouldn't be possible, but let's be paranoid\n        if (!tracer) {\n            return false;\n        }\n\n        let opts = tracer.options();\n        if (opts.disabled) {\n            return false;\n        }\n        if (!url) {\n            return false;\n        }\n        for (let key in this._internalExclusions) {\n            if (!this._internalExclusions.hasOwnProperty(key)) {\n                continue;\n            }\n            const ex = this._internalExclusions[key];\n            if (ex.test(url)) {\n                return false;\n            }\n        }\n        let include = false;\n        for (let key in opts.xhr_url_inclusion_patterns) {\n            if (!opts.xhr_url_inclusion_patterns.hasOwnProperty(key)) {\n                continue;\n            }\n            const inc = opts.xhr_url_inclusion_patterns[key];\n            if (inc.test(url)) {\n                include = true;\n                break;\n            }\n        }\n        if (!include) {\n            return false;\n        }\n        for (let key in opts.xhr_url_exclusion_patterns) {\n            if (!opts.xhr_url_exclusion_patterns.hasOwnProperty(key)) {\n                continue;\n            }\n            const ex = opts.xhr_url_exclusion_patterns[key];\n            if (ex.test(url)) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\nmodule.exports = new InstrumentXHR();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/plugins/instrument_xhr.js\n **/","import _each from '../_each';\n\nclass InstrumentPageLoad {\n    constructor() {\n        this._inited = false;\n        this._span = null;\n    }\n\n    name() {\n        return 'instrument_page_load';\n    }\n\n    addOptions(tracerImp) {\n    }\n\n    start(tracerImp) {\n        if (this._inited) {\n            return;\n        }\n        this._inited = true;\n\n        if (typeof window !== 'object' || typeof document !== 'object') {\n            return;\n        }\n        this._ensureSpanStarted(tracerImp);\n        document.addEventListener('readystatechange', this._handleReadyStateChange.bind(this));\n    }\n\n    stop() {\n    }\n\n    _ensureSpanStarted(tracerImp) {\n        if (!this._span) {\n            this._span = tracerImp.startSpan('document/load');\n            tracerImp.addActiveRootSpan(this._span);\n        }\n    }\n\n    _handleReadyStateChange() {\n        if (!this._span) {\n            return;\n        }\n\n        let span = this._span;\n        let state = document.readyState;\n        let payload = undefined;\n        if (state === 'complete') {\n            payload = {};\n            if (window.performance && performance.timing) {\n                this._addTimingSpans(span, performance.timing);\n                payload['window.performance.timing'] = performance.timing;\n            }\n        }\n\n        span.logEvent(`document.readystatechange ${state}`, payload);\n\n        if (state === 'complete') {\n            if (span.tracer()) {\n                span.tracer().removeActiveRootSpan(span.tracer());\n            }\n            span.finish();\n        }\n    }\n\n    _copyNavigatorProperties(nav) {\n        let dst = {};\n        for (let key in nav) { // eslint-disable-line guard-for-in\n            try {\n                let value = nav[key];\n                switch (key) {\n\n                case 'plugins': {\n                    let p = [];\n                    for (let i = 0; i < value.length; i++) {\n                        let item = value.item(i);\n                        p.push({\n                            name        : item.name,\n                            description : item.description,\n                        });\n                    }\n                    dst[key] = p;\n                } break;\n\n                case 'mimeTypes': {\n                    let p = [];\n                    for (let i = 0; i < value.length; i++) {\n                        let item = value.item(i);\n                        p.push({\n                            type        : item.type,\n                            description : item.description,\n                            suffixes    : item.suffixes,\n                        });\n                    }\n                    dst[key] = p;\n                } break;\n\n                default:\n                    dst[key] = value;\n                    break;\n                }\n            } catch (e) {\n                // Skip, just in case\n            }\n        }\n        return dst;\n    }\n\n    // Retroactively create the appropriate spans and logs\n    _addTimingSpans(parentImp, timing) {\n        // NOTE: this currently relies on LightStep-specific APIs\n        if (!parentImp) {\n            return;\n        }\n\n        parentImp.setTag('user_agent', navigator.userAgent);\n\n        _each(timing, (value, key) => {\n            // e.g. secureConnectionStart is not always set\n            if (typeof value !== 'number' || value === 0) {\n                return;\n            }\n\n            let payload = undefined;\n\n            if (key === 'navigationStart' && typeof navigator === 'object') {\n                payload = {\n                    navigator : this._copyNavigatorProperties(navigator),\n                };\n            }\n            parentImp.log({\n                message : `document ${key}`,\n                payload : payload,\n            }, value);\n        });\n\n        if (window.chrome && window.chrome.loadTimes) {\n            let chromeTimes = window.chrome.loadTimes();\n            if (chromeTimes) {\n                parentImp.log({\n                    message : 'window.chrome.loadTimes()',\n                    payload : chromeTimes,\n                }, timing.domComplete);\n            }\n        }\n\n        parentImp.setBeginMicros(timing.navigationStart * 1000.0);\n\n        parentImp.tracer().startSpan('document/time_to_first_byte', { childOf : parentImp })\n            .setBeginMicros(timing.requestStart * 1000.0)\n            .setEndMicros(timing.responseStart * 1000.0)\n            .finish();\n        parentImp.tracer()\n            .startSpan('document/response_transfer', { childOf : parentImp })\n            .setBeginMicros(timing.responseStart * 1000.0)\n            .setEndMicros(timing.responseEnd * 1000.0)\n            .finish();\n        parentImp.tracer().startSpan('document/dom_load', { childOf : parentImp })\n            .setBeginMicros(timing.domLoading * 1000.0)\n            .setEndMicros(timing.domInteractive * 1000.0)\n            .finish();\n    }\n}\n\nmodule.exports = new InstrumentPageLoad();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/plugins/instrument_document_load.js\n **/","export default class TransportBrowser {\n\n    constructor() {\n        this._host = '';\n        this._port = 0;\n        this._encryption = '';\n    }\n\n    ensureConnection(opts) {\n        this._host = opts.collector_host;\n        this._port = opts.collector_port;\n        this._encryption = opts.collector_encryption;\n    }\n\n    report(detached, auth, report, done) {\n        try {\n            if (!detached) {\n                this._reportAJAX(auth, report, done);\n            } else {\n                this._reportAsyncScript(auth, report, done);\n            }\n        } catch (e) {\n            return done(e, null);\n        }\n    }\n\n    _reportAJAX(auth, report, done) {\n        let payload = JSON.stringify(report);\n        let protocol = (this._encryption === 'none') ? 'http' : 'https';\n        let url = `${protocol}://${this._host}:${this._port}/api/v0/reports`;\n        let xhr = new XMLHttpRequest();\n        xhr.open('POST', url);\n        // Note: the browser automatically sets 'Connection' and 'Content-Length'\n        // and *does not* allow they to be set manually\n        xhr.setRequestHeader('LightStep-Access-Token', auth.access_token);\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        //req.setRequestHeader('Content-Encoding', 'gzip');\n        xhr.onreadystatechange = function () {\n            if (this.readyState === 4) {\n                let err = null;\n                let resp = null;\n                if (this.status !== 200) {\n                    err = new Error(`status code = ${this.status}`);\n                } else if (!this.responseText) {\n                    err = new Error('unexpected empty response');\n                } else {\n                    try {\n                        resp = JSON.parse(this.responseText);\n                    } catch (exception) {\n                        err = exception;\n                    }\n                }\n                return done(err, resp);\n            }\n        };\n        xhr.send(payload);\n    }\n\n    // Do a \"tail flush\" using an async browser script load.  This does not get\n    // interrupted as a normal Thirft RPC would when navigating away from\n    // the page.\n    _reportAsyncScript(auth, report, done) {\n        let authJSON   = JSON.stringify(auth);\n        let reportJSON = JSON.stringify(report);\n        let protocol = (this._encryption === 'none') ? 'http' : 'https';\n        let url = `${protocol}://${this._host}:${this._port}/_rpc/v1/reports/uri_encoded` +\n            `?auth=${encodeURIComponent(authJSON)}` +\n            `&report=${encodeURIComponent(reportJSON)}`;\n\n        let elem = document.createElement('script');\n        elem.async = true;\n        elem.defer = true;\n        elem.src = url;\n        elem.type = 'text/javascript';\n\n        let hostElem = document.getElementsByTagName('head')[0];\n        if (hostElem) {\n            hostElem.appendChild(elem);\n        }\n        return done(null, null);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/platform/browser/transport_httpjson.js\n **/","module.exports = require('./generated/thrift_all.js').Thrift;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/platform/browser/thrift.js\n **/","//\n// GENERATED FILE - DO NOT EDIT DIRECTLY\n//\n// See scripts/build_browser_thrift_lib.js\n//\n//\n(function() {\nvar Thrift = {};\nvar crouton_thrift = {};\n//\n// Autogenerated by Thrift Compiler (0.9.2)\n//\n// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n//\n\n\nif (typeof crouton_thrift === 'undefined') {\n  crouton_thrift = {};\n}\ncrouton_thrift.KeyValue = function(args) {\n  this.Key = null;\n  this.Value = null;\n  if (args) {\n    if (args.Key !== undefined) {\n      this.Key = args.Key;\n    } else {\n      throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN, 'Required field Key is unset!');\n    }\n    if (args.Value !== undefined) {\n      this.Value = args.Value;\n    } else {\n      throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN, 'Required field Value is unset!');\n    }\n  }\n};\ncrouton_thrift.KeyValue.prototype = {};\ncrouton_thrift.KeyValue.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.Key = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.Value = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.KeyValue.prototype.write = false && function(output) {\n  output.writeStructBegin('KeyValue');\n  if (this.Key !== null && this.Key !== undefined) {\n    output.writeFieldBegin('Key', Thrift.Type.STRING, 1);\n    output.writeString(this.Key);\n    output.writeFieldEnd();\n  }\n  if (this.Value !== null && this.Value !== undefined) {\n    output.writeFieldBegin('Value', Thrift.Type.STRING, 2);\n    output.writeString(this.Value);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.NamedCounter = function(args) {\n  this.Name = null;\n  this.Value = null;\n  if (args) {\n    if (args.Name !== undefined) {\n      this.Name = args.Name;\n    } else {\n      throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN, 'Required field Name is unset!');\n    }\n    if (args.Value !== undefined) {\n      this.Value = args.Value;\n    } else {\n      throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN, 'Required field Value is unset!');\n    }\n  }\n};\ncrouton_thrift.NamedCounter.prototype = {};\ncrouton_thrift.NamedCounter.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.Name = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.I64) {\n        this.Value = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.NamedCounter.prototype.write = false && function(output) {\n  output.writeStructBegin('NamedCounter');\n  if (this.Name !== null && this.Name !== undefined) {\n    output.writeFieldBegin('Name', Thrift.Type.STRING, 1);\n    output.writeString(this.Name);\n    output.writeFieldEnd();\n  }\n  if (this.Value !== null && this.Value !== undefined) {\n    output.writeFieldBegin('Value', Thrift.Type.I64, 2);\n    output.writeI64(this.Value);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.Runtime = function(args) {\n  this.guid = null;\n  this.start_micros = null;\n  this.group_name = null;\n  this.attrs = null;\n  if (args) {\n    if (args.guid !== undefined) {\n      this.guid = args.guid;\n    }\n    if (args.start_micros !== undefined) {\n      this.start_micros = args.start_micros;\n    }\n    if (args.group_name !== undefined) {\n      this.group_name = args.group_name;\n    }\n    if (args.attrs !== undefined) {\n      this.attrs = args.attrs;\n    }\n  }\n};\ncrouton_thrift.Runtime.prototype = {};\ncrouton_thrift.Runtime.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.guid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.I64) {\n        this.start_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.group_name = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.LIST) {\n        var _size0 = 0;\n        var _rtmp34;\n        this.attrs = [];\n        var _etype3 = 0;\n        _rtmp34 = input.readListBegin();\n        _etype3 = _rtmp34.etype;\n        _size0 = _rtmp34.size;\n        for (var _i5 = 0; _i5 < _size0; ++_i5)\n        {\n          var elem6 = null;\n          elem6 = new crouton_thrift.KeyValue();\n          elem6.read(input);\n          this.attrs.push(elem6);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.Runtime.prototype.write = false && function(output) {\n  output.writeStructBegin('Runtime');\n  if (this.guid !== null && this.guid !== undefined) {\n    output.writeFieldBegin('guid', Thrift.Type.STRING, 1);\n    output.writeString(this.guid);\n    output.writeFieldEnd();\n  }\n  if (this.start_micros !== null && this.start_micros !== undefined) {\n    output.writeFieldBegin('start_micros', Thrift.Type.I64, 2);\n    output.writeI64(this.start_micros);\n    output.writeFieldEnd();\n  }\n  if (this.group_name !== null && this.group_name !== undefined) {\n    output.writeFieldBegin('group_name', Thrift.Type.STRING, 3);\n    output.writeString(this.group_name);\n    output.writeFieldEnd();\n  }\n  if (this.attrs !== null && this.attrs !== undefined) {\n    output.writeFieldBegin('attrs', Thrift.Type.LIST, 4);\n    output.writeListBegin(Thrift.Type.STRUCT, this.attrs.length);\n    for (var iter7 in this.attrs)\n    {\n      if (this.attrs.hasOwnProperty(iter7))\n      {\n        iter7 = this.attrs[iter7];\n        iter7.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.LogRecord = function(args) {\n  this.timestamp_micros = null;\n  this.fields = null;\n  this.runtime_guid = null;\n  this.span_guid = null;\n  this.stable_name = null;\n  this.message = null;\n  this.level = null;\n  this.thread_id = null;\n  this.filename = null;\n  this.line_number = null;\n  this.stack_frames = null;\n  this.payload_json = null;\n  this.error_flag = null;\n  if (args) {\n    if (args.timestamp_micros !== undefined) {\n      this.timestamp_micros = args.timestamp_micros;\n    }\n    if (args.fields !== undefined) {\n      this.fields = args.fields;\n    }\n    if (args.runtime_guid !== undefined) {\n      this.runtime_guid = args.runtime_guid;\n    }\n    if (args.span_guid !== undefined) {\n      this.span_guid = args.span_guid;\n    }\n    if (args.stable_name !== undefined) {\n      this.stable_name = args.stable_name;\n    }\n    if (args.message !== undefined) {\n      this.message = args.message;\n    }\n    if (args.level !== undefined) {\n      this.level = args.level;\n    }\n    if (args.thread_id !== undefined) {\n      this.thread_id = args.thread_id;\n    }\n    if (args.filename !== undefined) {\n      this.filename = args.filename;\n    }\n    if (args.line_number !== undefined) {\n      this.line_number = args.line_number;\n    }\n    if (args.stack_frames !== undefined) {\n      this.stack_frames = args.stack_frames;\n    }\n    if (args.payload_json !== undefined) {\n      this.payload_json = args.payload_json;\n    }\n    if (args.error_flag !== undefined) {\n      this.error_flag = args.error_flag;\n    }\n  }\n};\ncrouton_thrift.LogRecord.prototype = {};\ncrouton_thrift.LogRecord.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.I64) {\n        this.timestamp_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 13:\n      if (ftype == Thrift.Type.LIST) {\n        var _size8 = 0;\n        var _rtmp312;\n        this.fields = [];\n        var _etype11 = 0;\n        _rtmp312 = input.readListBegin();\n        _etype11 = _rtmp312.etype;\n        _size8 = _rtmp312.size;\n        for (var _i13 = 0; _i13 < _size8; ++_i13)\n        {\n          var elem14 = null;\n          elem14 = new crouton_thrift.KeyValue();\n          elem14.read(input);\n          this.fields.push(elem14);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.runtime_guid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.span_guid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.stable_name = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.STRING) {\n        this.message = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 6:\n      if (ftype == Thrift.Type.STRING) {\n        this.level = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 7:\n      if (ftype == Thrift.Type.I64) {\n        this.thread_id = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8:\n      if (ftype == Thrift.Type.STRING) {\n        this.filename = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 9:\n      if (ftype == Thrift.Type.I64) {\n        this.line_number = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 10:\n      if (ftype == Thrift.Type.LIST) {\n        var _size15 = 0;\n        var _rtmp319;\n        this.stack_frames = [];\n        var _etype18 = 0;\n        _rtmp319 = input.readListBegin();\n        _etype18 = _rtmp319.etype;\n        _size15 = _rtmp319.size;\n        for (var _i20 = 0; _i20 < _size15; ++_i20)\n        {\n          var elem21 = null;\n          elem21 = input.readString().value;\n          this.stack_frames.push(elem21);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 11:\n      if (ftype == Thrift.Type.STRING) {\n        this.payload_json = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 12:\n      if (ftype == Thrift.Type.BOOL) {\n        this.error_flag = input.readBool().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.LogRecord.prototype.write = false && function(output) {\n  output.writeStructBegin('LogRecord');\n  if (this.timestamp_micros !== null && this.timestamp_micros !== undefined) {\n    output.writeFieldBegin('timestamp_micros', Thrift.Type.I64, 1);\n    output.writeI64(this.timestamp_micros);\n    output.writeFieldEnd();\n  }\n  if (this.fields !== null && this.fields !== undefined) {\n    output.writeFieldBegin('fields', Thrift.Type.LIST, 13);\n    output.writeListBegin(Thrift.Type.STRUCT, this.fields.length);\n    for (var iter22 in this.fields)\n    {\n      if (this.fields.hasOwnProperty(iter22))\n      {\n        iter22 = this.fields[iter22];\n        iter22.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.runtime_guid !== null && this.runtime_guid !== undefined) {\n    output.writeFieldBegin('runtime_guid', Thrift.Type.STRING, 2);\n    output.writeString(this.runtime_guid);\n    output.writeFieldEnd();\n  }\n  if (this.span_guid !== null && this.span_guid !== undefined) {\n    output.writeFieldBegin('span_guid', Thrift.Type.STRING, 3);\n    output.writeString(this.span_guid);\n    output.writeFieldEnd();\n  }\n  if (this.stable_name !== null && this.stable_name !== undefined) {\n    output.writeFieldBegin('stable_name', Thrift.Type.STRING, 4);\n    output.writeString(this.stable_name);\n    output.writeFieldEnd();\n  }\n  if (this.message !== null && this.message !== undefined) {\n    output.writeFieldBegin('message', Thrift.Type.STRING, 5);\n    output.writeString(this.message);\n    output.writeFieldEnd();\n  }\n  if (this.level !== null && this.level !== undefined) {\n    output.writeFieldBegin('level', Thrift.Type.STRING, 6);\n    output.writeString(this.level);\n    output.writeFieldEnd();\n  }\n  if (this.thread_id !== null && this.thread_id !== undefined) {\n    output.writeFieldBegin('thread_id', Thrift.Type.I64, 7);\n    output.writeI64(this.thread_id);\n    output.writeFieldEnd();\n  }\n  if (this.filename !== null && this.filename !== undefined) {\n    output.writeFieldBegin('filename', Thrift.Type.STRING, 8);\n    output.writeString(this.filename);\n    output.writeFieldEnd();\n  }\n  if (this.line_number !== null && this.line_number !== undefined) {\n    output.writeFieldBegin('line_number', Thrift.Type.I64, 9);\n    output.writeI64(this.line_number);\n    output.writeFieldEnd();\n  }\n  if (this.stack_frames !== null && this.stack_frames !== undefined) {\n    output.writeFieldBegin('stack_frames', Thrift.Type.LIST, 10);\n    output.writeListBegin(Thrift.Type.STRING, this.stack_frames.length);\n    for (var iter23 in this.stack_frames)\n    {\n      if (this.stack_frames.hasOwnProperty(iter23))\n      {\n        iter23 = this.stack_frames[iter23];\n        output.writeString(iter23);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.payload_json !== null && this.payload_json !== undefined) {\n    output.writeFieldBegin('payload_json', Thrift.Type.STRING, 11);\n    output.writeString(this.payload_json);\n    output.writeFieldEnd();\n  }\n  if (this.error_flag !== null && this.error_flag !== undefined) {\n    output.writeFieldBegin('error_flag', Thrift.Type.BOOL, 12);\n    output.writeBool(this.error_flag);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.TraceJoinId = function(args) {\n  this.TraceKey = null;\n  this.Value = null;\n  if (args) {\n    if (args.TraceKey !== undefined) {\n      this.TraceKey = args.TraceKey;\n    } else {\n      throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN, 'Required field TraceKey is unset!');\n    }\n    if (args.Value !== undefined) {\n      this.Value = args.Value;\n    } else {\n      throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN, 'Required field Value is unset!');\n    }\n  }\n};\ncrouton_thrift.TraceJoinId.prototype = {};\ncrouton_thrift.TraceJoinId.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.TraceKey = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.Value = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.TraceJoinId.prototype.write = false && function(output) {\n  output.writeStructBegin('TraceJoinId');\n  if (this.TraceKey !== null && this.TraceKey !== undefined) {\n    output.writeFieldBegin('TraceKey', Thrift.Type.STRING, 1);\n    output.writeString(this.TraceKey);\n    output.writeFieldEnd();\n  }\n  if (this.Value !== null && this.Value !== undefined) {\n    output.writeFieldBegin('Value', Thrift.Type.STRING, 2);\n    output.writeString(this.Value);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.SpanRecord = function(args) {\n  this.span_guid = null;\n  this.trace_guid = null;\n  this.runtime_guid = null;\n  this.span_name = null;\n  this.join_ids = null;\n  this.oldest_micros = null;\n  this.youngest_micros = null;\n  this.attributes = null;\n  this.error_flag = null;\n  this.log_records = null;\n  if (args) {\n    if (args.span_guid !== undefined) {\n      this.span_guid = args.span_guid;\n    }\n    if (args.trace_guid !== undefined) {\n      this.trace_guid = args.trace_guid;\n    }\n    if (args.runtime_guid !== undefined) {\n      this.runtime_guid = args.runtime_guid;\n    }\n    if (args.span_name !== undefined) {\n      this.span_name = args.span_name;\n    }\n    if (args.join_ids !== undefined) {\n      this.join_ids = args.join_ids;\n    }\n    if (args.oldest_micros !== undefined) {\n      this.oldest_micros = args.oldest_micros;\n    }\n    if (args.youngest_micros !== undefined) {\n      this.youngest_micros = args.youngest_micros;\n    }\n    if (args.attributes !== undefined) {\n      this.attributes = args.attributes;\n    }\n    if (args.error_flag !== undefined) {\n      this.error_flag = args.error_flag;\n    }\n    if (args.log_records !== undefined) {\n      this.log_records = args.log_records;\n    }\n  }\n};\ncrouton_thrift.SpanRecord.prototype = {};\ncrouton_thrift.SpanRecord.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.span_guid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 11:\n      if (ftype == Thrift.Type.STRING) {\n        this.trace_guid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.runtime_guid = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.span_name = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.LIST) {\n        var _size24 = 0;\n        var _rtmp328;\n        this.join_ids = [];\n        var _etype27 = 0;\n        _rtmp328 = input.readListBegin();\n        _etype27 = _rtmp328.etype;\n        _size24 = _rtmp328.size;\n        for (var _i29 = 0; _i29 < _size24; ++_i29)\n        {\n          var elem30 = null;\n          elem30 = new crouton_thrift.TraceJoinId();\n          elem30.read(input);\n          this.join_ids.push(elem30);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.I64) {\n        this.oldest_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 6:\n      if (ftype == Thrift.Type.I64) {\n        this.youngest_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8:\n      if (ftype == Thrift.Type.LIST) {\n        var _size31 = 0;\n        var _rtmp335;\n        this.attributes = [];\n        var _etype34 = 0;\n        _rtmp335 = input.readListBegin();\n        _etype34 = _rtmp335.etype;\n        _size31 = _rtmp335.size;\n        for (var _i36 = 0; _i36 < _size31; ++_i36)\n        {\n          var elem37 = null;\n          elem37 = new crouton_thrift.KeyValue();\n          elem37.read(input);\n          this.attributes.push(elem37);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 9:\n      if (ftype == Thrift.Type.BOOL) {\n        this.error_flag = input.readBool().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 10:\n      if (ftype == Thrift.Type.LIST) {\n        var _size38 = 0;\n        var _rtmp342;\n        this.log_records = [];\n        var _etype41 = 0;\n        _rtmp342 = input.readListBegin();\n        _etype41 = _rtmp342.etype;\n        _size38 = _rtmp342.size;\n        for (var _i43 = 0; _i43 < _size38; ++_i43)\n        {\n          var elem44 = null;\n          elem44 = new crouton_thrift.LogRecord();\n          elem44.read(input);\n          this.log_records.push(elem44);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.SpanRecord.prototype.write = false && function(output) {\n  output.writeStructBegin('SpanRecord');\n  if (this.span_guid !== null && this.span_guid !== undefined) {\n    output.writeFieldBegin('span_guid', Thrift.Type.STRING, 1);\n    output.writeString(this.span_guid);\n    output.writeFieldEnd();\n  }\n  if (this.trace_guid !== null && this.trace_guid !== undefined) {\n    output.writeFieldBegin('trace_guid', Thrift.Type.STRING, 11);\n    output.writeString(this.trace_guid);\n    output.writeFieldEnd();\n  }\n  if (this.runtime_guid !== null && this.runtime_guid !== undefined) {\n    output.writeFieldBegin('runtime_guid', Thrift.Type.STRING, 2);\n    output.writeString(this.runtime_guid);\n    output.writeFieldEnd();\n  }\n  if (this.span_name !== null && this.span_name !== undefined) {\n    output.writeFieldBegin('span_name', Thrift.Type.STRING, 3);\n    output.writeString(this.span_name);\n    output.writeFieldEnd();\n  }\n  if (this.join_ids !== null && this.join_ids !== undefined) {\n    output.writeFieldBegin('join_ids', Thrift.Type.LIST, 4);\n    output.writeListBegin(Thrift.Type.STRUCT, this.join_ids.length);\n    for (var iter45 in this.join_ids)\n    {\n      if (this.join_ids.hasOwnProperty(iter45))\n      {\n        iter45 = this.join_ids[iter45];\n        iter45.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.oldest_micros !== null && this.oldest_micros !== undefined) {\n    output.writeFieldBegin('oldest_micros', Thrift.Type.I64, 5);\n    output.writeI64(this.oldest_micros);\n    output.writeFieldEnd();\n  }\n  if (this.youngest_micros !== null && this.youngest_micros !== undefined) {\n    output.writeFieldBegin('youngest_micros', Thrift.Type.I64, 6);\n    output.writeI64(this.youngest_micros);\n    output.writeFieldEnd();\n  }\n  if (this.attributes !== null && this.attributes !== undefined) {\n    output.writeFieldBegin('attributes', Thrift.Type.LIST, 8);\n    output.writeListBegin(Thrift.Type.STRUCT, this.attributes.length);\n    for (var iter46 in this.attributes)\n    {\n      if (this.attributes.hasOwnProperty(iter46))\n      {\n        iter46 = this.attributes[iter46];\n        iter46.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.error_flag !== null && this.error_flag !== undefined) {\n    output.writeFieldBegin('error_flag', Thrift.Type.BOOL, 9);\n    output.writeBool(this.error_flag);\n    output.writeFieldEnd();\n  }\n  if (this.log_records !== null && this.log_records !== undefined) {\n    output.writeFieldBegin('log_records', Thrift.Type.LIST, 10);\n    output.writeListBegin(Thrift.Type.STRUCT, this.log_records.length);\n    for (var iter47 in this.log_records)\n    {\n      if (this.log_records.hasOwnProperty(iter47))\n      {\n        iter47 = this.log_records[iter47];\n        iter47.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.Auth = function(args) {\n  this.access_token = null;\n  if (args) {\n    if (args.access_token !== undefined) {\n      this.access_token = args.access_token;\n    }\n  }\n};\ncrouton_thrift.Auth.prototype = {};\ncrouton_thrift.Auth.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.access_token = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 0:\n        input.skip(ftype);\n        break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.Auth.prototype.write = false && function(output) {\n  output.writeStructBegin('Auth');\n  if (this.access_token !== null && this.access_token !== undefined) {\n    output.writeFieldBegin('access_token', Thrift.Type.STRING, 1);\n    output.writeString(this.access_token);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.Timing = function(args) {\n  this.receive_micros = null;\n  this.transmit_micros = null;\n  if (args) {\n    if (args.receive_micros !== undefined) {\n      this.receive_micros = args.receive_micros;\n    }\n    if (args.transmit_micros !== undefined) {\n      this.transmit_micros = args.transmit_micros;\n    }\n  }\n};\ncrouton_thrift.Timing.prototype = {};\ncrouton_thrift.Timing.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.I64) {\n        this.receive_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.I64) {\n        this.transmit_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.Timing.prototype.write = false && function(output) {\n  output.writeStructBegin('Timing');\n  if (this.receive_micros !== null && this.receive_micros !== undefined) {\n    output.writeFieldBegin('receive_micros', Thrift.Type.I64, 1);\n    output.writeI64(this.receive_micros);\n    output.writeFieldEnd();\n  }\n  if (this.transmit_micros !== null && this.transmit_micros !== undefined) {\n    output.writeFieldBegin('transmit_micros', Thrift.Type.I64, 2);\n    output.writeI64(this.transmit_micros);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.SampleCount = function(args) {\n  this.oldest_micros = null;\n  this.youngest_micros = null;\n  this.count = null;\n  if (args) {\n    if (args.oldest_micros !== undefined) {\n      this.oldest_micros = args.oldest_micros;\n    }\n    if (args.youngest_micros !== undefined) {\n      this.youngest_micros = args.youngest_micros;\n    }\n    if (args.count !== undefined) {\n      this.count = args.count;\n    }\n  }\n};\ncrouton_thrift.SampleCount.prototype = {};\ncrouton_thrift.SampleCount.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.I64) {\n        this.oldest_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.I64) {\n        this.youngest_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.I64) {\n        this.count = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.SampleCount.prototype.write = false && function(output) {\n  output.writeStructBegin('SampleCount');\n  if (this.oldest_micros !== null && this.oldest_micros !== undefined) {\n    output.writeFieldBegin('oldest_micros', Thrift.Type.I64, 1);\n    output.writeI64(this.oldest_micros);\n    output.writeFieldEnd();\n  }\n  if (this.youngest_micros !== null && this.youngest_micros !== undefined) {\n    output.writeFieldBegin('youngest_micros', Thrift.Type.I64, 2);\n    output.writeI64(this.youngest_micros);\n    output.writeFieldEnd();\n  }\n  if (this.count !== null && this.count !== undefined) {\n    output.writeFieldBegin('count', Thrift.Type.I64, 3);\n    output.writeI64(this.count);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.MetricsSample = function(args) {\n  this.name = null;\n  this.int64_value = null;\n  this.double_value = null;\n  if (args) {\n    if (args.name !== undefined) {\n      this.name = args.name;\n    } else {\n      throw new Thrift.TProtocolException(Thrift.TProtocolExceptionType.UNKNOWN, 'Required field name is unset!');\n    }\n    if (args.int64_value !== undefined) {\n      this.int64_value = args.int64_value;\n    }\n    if (args.double_value !== undefined) {\n      this.double_value = args.double_value;\n    }\n  }\n};\ncrouton_thrift.MetricsSample.prototype = {};\ncrouton_thrift.MetricsSample.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.name = input.readString().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.I64) {\n        this.int64_value = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.DOUBLE) {\n        this.double_value = input.readDouble().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.MetricsSample.prototype.write = false && function(output) {\n  output.writeStructBegin('MetricsSample');\n  if (this.name !== null && this.name !== undefined) {\n    output.writeFieldBegin('name', Thrift.Type.STRING, 1);\n    output.writeString(this.name);\n    output.writeFieldEnd();\n  }\n  if (this.int64_value !== null && this.int64_value !== undefined) {\n    output.writeFieldBegin('int64_value', Thrift.Type.I64, 2);\n    output.writeI64(this.int64_value);\n    output.writeFieldEnd();\n  }\n  if (this.double_value !== null && this.double_value !== undefined) {\n    output.writeFieldBegin('double_value', Thrift.Type.DOUBLE, 3);\n    output.writeDouble(this.double_value);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.Metrics = function(args) {\n  this.counts = null;\n  this.gauges = null;\n  if (args) {\n    if (args.counts !== undefined) {\n      this.counts = args.counts;\n    }\n    if (args.gauges !== undefined) {\n      this.gauges = args.gauges;\n    }\n  }\n};\ncrouton_thrift.Metrics.prototype = {};\ncrouton_thrift.Metrics.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.LIST) {\n        var _size48 = 0;\n        var _rtmp352;\n        this.counts = [];\n        var _etype51 = 0;\n        _rtmp352 = input.readListBegin();\n        _etype51 = _rtmp352.etype;\n        _size48 = _rtmp352.size;\n        for (var _i53 = 0; _i53 < _size48; ++_i53)\n        {\n          var elem54 = null;\n          elem54 = new crouton_thrift.MetricsSample();\n          elem54.read(input);\n          this.counts.push(elem54);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.LIST) {\n        var _size55 = 0;\n        var _rtmp359;\n        this.gauges = [];\n        var _etype58 = 0;\n        _rtmp359 = input.readListBegin();\n        _etype58 = _rtmp359.etype;\n        _size55 = _rtmp359.size;\n        for (var _i60 = 0; _i60 < _size55; ++_i60)\n        {\n          var elem61 = null;\n          elem61 = new crouton_thrift.MetricsSample();\n          elem61.read(input);\n          this.gauges.push(elem61);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.Metrics.prototype.write = false && function(output) {\n  output.writeStructBegin('Metrics');\n  if (this.counts !== null && this.counts !== undefined) {\n    output.writeFieldBegin('counts', Thrift.Type.LIST, 1);\n    output.writeListBegin(Thrift.Type.STRUCT, this.counts.length);\n    for (var iter62 in this.counts)\n    {\n      if (this.counts.hasOwnProperty(iter62))\n      {\n        iter62 = this.counts[iter62];\n        iter62.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.gauges !== null && this.gauges !== undefined) {\n    output.writeFieldBegin('gauges', Thrift.Type.LIST, 2);\n    output.writeListBegin(Thrift.Type.STRUCT, this.gauges.length);\n    for (var iter63 in this.gauges)\n    {\n      if (this.gauges.hasOwnProperty(iter63))\n      {\n        iter63 = this.gauges[iter63];\n        iter63.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.ReportRequest = function(args) {\n  this.runtime = null;\n  this.span_records = null;\n  this.log_records = null;\n  this.timestamp_offset_micros = null;\n  this.oldest_micros = null;\n  this.youngest_micros = null;\n  this.counters = null;\n  this.internal_logs = null;\n  this.internal_metrics = null;\n  if (args) {\n    if (args.runtime !== undefined) {\n      this.runtime = args.runtime;\n    }\n    if (args.span_records !== undefined) {\n      this.span_records = args.span_records;\n    }\n    if (args.log_records !== undefined) {\n      this.log_records = args.log_records;\n    }\n    if (args.timestamp_offset_micros !== undefined) {\n      this.timestamp_offset_micros = args.timestamp_offset_micros;\n    }\n    if (args.oldest_micros !== undefined) {\n      this.oldest_micros = args.oldest_micros;\n    }\n    if (args.youngest_micros !== undefined) {\n      this.youngest_micros = args.youngest_micros;\n    }\n    if (args.counters !== undefined) {\n      this.counters = args.counters;\n    }\n    if (args.internal_logs !== undefined) {\n      this.internal_logs = args.internal_logs;\n    }\n    if (args.internal_metrics !== undefined) {\n      this.internal_metrics = args.internal_metrics;\n    }\n  }\n};\ncrouton_thrift.ReportRequest.prototype = {};\ncrouton_thrift.ReportRequest.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.runtime = new crouton_thrift.Runtime();\n        this.runtime.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.LIST) {\n        var _size64 = 0;\n        var _rtmp368;\n        this.span_records = [];\n        var _etype67 = 0;\n        _rtmp368 = input.readListBegin();\n        _etype67 = _rtmp368.etype;\n        _size64 = _rtmp368.size;\n        for (var _i69 = 0; _i69 < _size64; ++_i69)\n        {\n          var elem70 = null;\n          elem70 = new crouton_thrift.SpanRecord();\n          elem70.read(input);\n          this.span_records.push(elem70);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.LIST) {\n        var _size71 = 0;\n        var _rtmp375;\n        this.log_records = [];\n        var _etype74 = 0;\n        _rtmp375 = input.readListBegin();\n        _etype74 = _rtmp375.etype;\n        _size71 = _rtmp375.size;\n        for (var _i76 = 0; _i76 < _size71; ++_i76)\n        {\n          var elem77 = null;\n          elem77 = new crouton_thrift.LogRecord();\n          elem77.read(input);\n          this.log_records.push(elem77);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 5:\n      if (ftype == Thrift.Type.I64) {\n        this.timestamp_offset_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 7:\n      if (ftype == Thrift.Type.I64) {\n        this.oldest_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 8:\n      if (ftype == Thrift.Type.I64) {\n        this.youngest_micros = input.readI64().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 9:\n      if (ftype == Thrift.Type.LIST) {\n        var _size78 = 0;\n        var _rtmp382;\n        this.counters = [];\n        var _etype81 = 0;\n        _rtmp382 = input.readListBegin();\n        _etype81 = _rtmp382.etype;\n        _size78 = _rtmp382.size;\n        for (var _i83 = 0; _i83 < _size78; ++_i83)\n        {\n          var elem84 = null;\n          elem84 = new crouton_thrift.NamedCounter();\n          elem84.read(input);\n          this.counters.push(elem84);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 10:\n      if (ftype == Thrift.Type.LIST) {\n        var _size85 = 0;\n        var _rtmp389;\n        this.internal_logs = [];\n        var _etype88 = 0;\n        _rtmp389 = input.readListBegin();\n        _etype88 = _rtmp389.etype;\n        _size85 = _rtmp389.size;\n        for (var _i90 = 0; _i90 < _size85; ++_i90)\n        {\n          var elem91 = null;\n          elem91 = new crouton_thrift.LogRecord();\n          elem91.read(input);\n          this.internal_logs.push(elem91);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 11:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.internal_metrics = new crouton_thrift.Metrics();\n        this.internal_metrics.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.ReportRequest.prototype.write = false && function(output) {\n  output.writeStructBegin('ReportRequest');\n  if (this.runtime !== null && this.runtime !== undefined) {\n    output.writeFieldBegin('runtime', Thrift.Type.STRUCT, 1);\n    this.runtime.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.span_records !== null && this.span_records !== undefined) {\n    output.writeFieldBegin('span_records', Thrift.Type.LIST, 3);\n    output.writeListBegin(Thrift.Type.STRUCT, this.span_records.length);\n    for (var iter92 in this.span_records)\n    {\n      if (this.span_records.hasOwnProperty(iter92))\n      {\n        iter92 = this.span_records[iter92];\n        iter92.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.log_records !== null && this.log_records !== undefined) {\n    output.writeFieldBegin('log_records', Thrift.Type.LIST, 4);\n    output.writeListBegin(Thrift.Type.STRUCT, this.log_records.length);\n    for (var iter93 in this.log_records)\n    {\n      if (this.log_records.hasOwnProperty(iter93))\n      {\n        iter93 = this.log_records[iter93];\n        iter93.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.timestamp_offset_micros !== null && this.timestamp_offset_micros !== undefined) {\n    output.writeFieldBegin('timestamp_offset_micros', Thrift.Type.I64, 5);\n    output.writeI64(this.timestamp_offset_micros);\n    output.writeFieldEnd();\n  }\n  if (this.oldest_micros !== null && this.oldest_micros !== undefined) {\n    output.writeFieldBegin('oldest_micros', Thrift.Type.I64, 7);\n    output.writeI64(this.oldest_micros);\n    output.writeFieldEnd();\n  }\n  if (this.youngest_micros !== null && this.youngest_micros !== undefined) {\n    output.writeFieldBegin('youngest_micros', Thrift.Type.I64, 8);\n    output.writeI64(this.youngest_micros);\n    output.writeFieldEnd();\n  }\n  if (this.counters !== null && this.counters !== undefined) {\n    output.writeFieldBegin('counters', Thrift.Type.LIST, 9);\n    output.writeListBegin(Thrift.Type.STRUCT, this.counters.length);\n    for (var iter94 in this.counters)\n    {\n      if (this.counters.hasOwnProperty(iter94))\n      {\n        iter94 = this.counters[iter94];\n        iter94.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.internal_logs !== null && this.internal_logs !== undefined) {\n    output.writeFieldBegin('internal_logs', Thrift.Type.LIST, 10);\n    output.writeListBegin(Thrift.Type.STRUCT, this.internal_logs.length);\n    for (var iter95 in this.internal_logs)\n    {\n      if (this.internal_logs.hasOwnProperty(iter95))\n      {\n        iter95 = this.internal_logs[iter95];\n        iter95.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.internal_metrics !== null && this.internal_metrics !== undefined) {\n    output.writeFieldBegin('internal_metrics', Thrift.Type.STRUCT, 11);\n    this.internal_metrics.write(output);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.Command = function(args) {\n  this.disable = null;\n  if (args) {\n    if (args.disable !== undefined) {\n      this.disable = args.disable;\n    }\n  }\n};\ncrouton_thrift.Command.prototype = {};\ncrouton_thrift.Command.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.BOOL) {\n        this.disable = input.readBool().value;\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 0:\n        input.skip(ftype);\n        break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.Command.prototype.write = false && function(output) {\n  output.writeStructBegin('Command');\n  if (this.disable !== null && this.disable !== undefined) {\n    output.writeFieldBegin('disable', Thrift.Type.BOOL, 1);\n    output.writeBool(this.disable);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\ncrouton_thrift.ReportResponse = function(args) {\n  this.commands = null;\n  this.timing = null;\n  this.errors = null;\n  if (args) {\n    if (args.commands !== undefined) {\n      this.commands = args.commands;\n    }\n    if (args.timing !== undefined) {\n      this.timing = args.timing;\n    }\n    if (args.errors !== undefined) {\n      this.errors = args.errors;\n    }\n  }\n};\ncrouton_thrift.ReportResponse.prototype = {};\ncrouton_thrift.ReportResponse.prototype.read = false && function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.LIST) {\n        var _size96 = 0;\n        var _rtmp3100;\n        this.commands = [];\n        var _etype99 = 0;\n        _rtmp3100 = input.readListBegin();\n        _etype99 = _rtmp3100.etype;\n        _size96 = _rtmp3100.size;\n        for (var _i101 = 0; _i101 < _size96; ++_i101)\n        {\n          var elem102 = null;\n          elem102 = new crouton_thrift.Command();\n          elem102.read(input);\n          this.commands.push(elem102);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRUCT) {\n        this.timing = new crouton_thrift.Timing();\n        this.timing.read(input);\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.LIST) {\n        var _size103 = 0;\n        var _rtmp3107;\n        this.errors = [];\n        var _etype106 = 0;\n        _rtmp3107 = input.readListBegin();\n        _etype106 = _rtmp3107.etype;\n        _size103 = _rtmp3107.size;\n        for (var _i108 = 0; _i108 < _size103; ++_i108)\n        {\n          var elem109 = null;\n          elem109 = input.readString().value;\n          this.errors.push(elem109);\n        }\n        input.readListEnd();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\ncrouton_thrift.ReportResponse.prototype.write = false && function(output) {\n  output.writeStructBegin('ReportResponse');\n  if (this.commands !== null && this.commands !== undefined) {\n    output.writeFieldBegin('commands', Thrift.Type.LIST, 1);\n    output.writeListBegin(Thrift.Type.STRUCT, this.commands.length);\n    for (var iter110 in this.commands)\n    {\n      if (this.commands.hasOwnProperty(iter110))\n      {\n        iter110 = this.commands[iter110];\n        iter110.write(output);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  if (this.timing !== null && this.timing !== undefined) {\n    output.writeFieldBegin('timing', Thrift.Type.STRUCT, 2);\n    this.timing.write(output);\n    output.writeFieldEnd();\n  }\n  if (this.errors !== null && this.errors !== undefined) {\n    output.writeFieldBegin('errors', Thrift.Type.LIST, 3);\n    output.writeListBegin(Thrift.Type.STRING, this.errors.length);\n    for (var iter111 in this.errors)\n    {\n      if (this.errors.hasOwnProperty(iter111))\n      {\n        iter111 = this.errors[iter111];\n        output.writeString(iter111);\n      }\n    }\n    output.writeListEnd();\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\n\nmodule.exports.crouton_thrift = crouton_thrift;\nmodule.exports.Thrift = {}\n})();\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/platform/browser/generated/thrift_all.js\n **/","module.exports = require('./generated/thrift_all.js').crouton_thrift;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/platform/browser/crouton_thrift.js\n **/","import _each from '../../_each';\n\n// How many updates before a sample is considered old. This happens to\n// be one less than the number of samples in our buffer but that's\n// somewhat arbitrary.\nconst kMaxOffsetAge = 7;\n\nconst kStoredSamplesTTLMicros = 60 * 60 * 1000 * 1000; // 1 hour\n\nclass ClockState {\n\n    constructor(opts) {\n        this._nowMicros     = opts.nowMicros;\n        this._localStoreGet = opts.localStoreGet;\n        this._localStoreSet = opts.localStoreSet;\n\n        // The last eight samples, computed from timing information in\n        // RPCs.\n        this._samples = [];\n        this._currentOffsetMicros = 0;\n\n        // How many updates since we've updated currentOffsetMicros.\n        this._currentOffsetAge = kMaxOffsetAge + 1;\n\n        // Try to load samples from the local store.\n        // Only use the data if it's recent.\n        let storedData = this._localStoreGet();\n        if (storedData &&\n            storedData.timestamp_micros &&\n            storedData.timestamp_micros > this._nowMicros() - kStoredSamplesTTLMicros) {\n            // Make sure there are no more than (kMaxOffsetAge+1) elements\n            this._samples = storedData.samples.slice(-(kMaxOffsetAge + 1));\n        }\n        // Update the current offset based on these data.\n        this.update();\n    }\n\n    // Add a new timing sample and update the offset.\n    addSample(originMicros,\n              receiveMicros,\n              transmitMicros,\n              destinationMicros\n    ) {\n        let latestDelayMicros = Number.MAX_VALUE;\n        let latestOffsetMicros = 0;\n        // Ensure that all of the data are valid before using them. If\n        // not, we'll push a {0, MAX} record into the queue.\n        if (originMicros > 0 && receiveMicros > 0 &&\n            transmitMicros > 0 && destinationMicros > 0) {\n            latestDelayMicros = (destinationMicros - originMicros) -\n                (transmitMicros - receiveMicros);\n            latestOffsetMicros = ((receiveMicros - originMicros) +\n                           (transmitMicros - destinationMicros)) / 2;\n        }\n\n        // Discard the oldest sample and push the new one.\n        if (this._samples.length === kMaxOffsetAge + 1) {\n            this._samples.shift();\n        }\n        this._samples.push({\n            delayMicros  : latestDelayMicros,\n            offsetMicros : latestOffsetMicros,\n        });\n        this._currentOffsetAge++;\n\n        // Update the local store with this new sample.\n        this._localStoreSet({\n            timestamp_micros : this._nowMicros(),\n            samples          : this._samples,\n        });\n        this.update();\n    }\n\n    // Update the time offset based on the current samples.\n    update() {\n        // This is simplified version of the clock filtering in Simple\n        // NTP. It ignores precision and dispersion (frequency error). In\n        // brief, it keeps the 8 (kMaxOffsetAge+1) most recent\n        // delay-offset pairs, and considers the offset with the smallest\n        // delay to be the best one. However, it only uses this new offset\n        // if the change (relative to the last offset) is small compared\n        // to the estimated error.\n        //\n        // See:\n        // https://tools.ietf.org/html/rfc5905#appendix-A.5.2\n        // http://books.google.com/books?id=pdTcJBfnbq8C\n        //   esp. section 3.5\n        // http://www.eecis.udel.edu/~mills/ntp/html/filter.html\n        // http://www.eecis.udel.edu/~mills/database/brief/algor/algor.pdf\n        // http://www.eecis.udel.edu/~mills/ntp/html/stats.html\n\n        // TODO: Consider huff-n'-puff if the delays are highly asymmetric.\n        // http://www.eecis.udel.edu/~mills/ntp/html/huffpuff.html\n\n        // Find the sample with the smallest delay; the corresponding\n        // offset is the \"best\" one.\n        let minDelayMicros = Number.MAX_VALUE;\n        let bestOffsetMicros = 0;\n        _each(this._samples, (sample) => {\n            if (sample.delayMicros < minDelayMicros) {\n                minDelayMicros = sample.delayMicros;\n                bestOffsetMicros = sample.offsetMicros;\n            }\n        });\n\n        // No update.\n        if (bestOffsetMicros === this._currentOffsetMicros) {\n            return;\n        }\n\n        // Now compute the jitter, i.e. the error relative to the new\n        // offset were we to use it.\n        let jitter = 0;\n        _each(this._samples, (sample) => {\n            jitter += Math.pow(bestOffsetMicros - sample.offsetMicros, 2);\n        });\n        jitter = Math.sqrt(jitter / this._samples.length);\n\n        // Ignore spikes: only use the new offset if the change is not too\n        // large... unless the current offset is too old. The \"too old\"\n        // condition is also triggered when update() is called from the\n        // constructor.\n        const kSGATE = 3; // See RFC 5905\n        if (this._currentOffsetAge > kMaxOffsetAge ||\n            Math.abs(this._currentOffsetMicros - bestOffsetMicros) < kSGATE * jitter) {\n            this._currentOffsetMicros = bestOffsetMicros;\n            this._currentOffsetAge = 0;\n        }\n    }\n\n    // Returns the difference in microseconds between the server's clock\n    // and our clock. This should be added to any local timestamps before\n    // sending them to the server. Note that a negative offset means that\n    // the local clock is ahead of the server's.\n    offsetMicros() {\n        return Math.floor(this._currentOffsetMicros);\n    }\n\n    // Returns true if we've performed enough measurements to be confident\n    // in the current offset.\n    isReady() {\n        return this._samples.length > 3;\n    }\n\n    activeSampleCount() {\n        return this._samples.length;\n    }\n}\n\nmodule.exports = ClockState;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/util/clock_state.js\n **/","import { crouton_thrift } from '../platform_abstraction_layer'; // eslint-disable-line camelcase\nconst constants = require('../constants');\nconst coerce    = require('./coerce');\n\n// Facade on the thrift log data structure to make constructing log records more\n// convenient.\nclass LogBuilder {\n\n    constructor(runtime) {\n        this._runtime = runtime;\n        this._record = new crouton_thrift.LogRecord({\n            timestamp_micros : runtime._platform.nowMicros(),\n            runtime_guid     : null,\n            span_guid        : null,\n            stable_name      : null,\n            message          : null,\n            level            : null,\n            thread_id        : null,\n            filename         : null,\n            line_number      : null,\n            stack_frames     : null,\n            payload_json     : null,\n            error_flag       : null,\n        });\n    }\n\n    record() {\n        return this._record;\n    }\n\n    end() {\n        this._runtime._addLogRecord(this._record);\n    }\n\n    timestamp(micros) {\n        this._record.timestamp_micros = coerce.toNumber(micros);\n        return this;\n    }\n\n    message(msg) {\n        this._record.message = coerce.toString(msg);\n        return this;\n    }\n\n    level(num) {\n        this._record.level = constants.LOG_LEVEL_TO_STRING[num] || null;\n        if (num >= constants.LOG_ERROR) {\n            this.error(true);\n        }\n        return this;\n    }\n\n    span(guid) {\n        if (guid !== undefined) {\n            this._record.span_guid = coerce.toString(guid);\n        }\n        return this;\n    }\n\n    name(stableName) {\n        this._record.stable_name = coerce.toString(stableName);\n        return this;\n    }\n\n    error(flag) {\n        this._record.error_flag = coerce.toBoolean(flag);\n        return this;\n    }\n\n    payload(data) {\n        if (data !== undefined) {\n            this._record.payload_json = this._encodePayload(data);\n        }\n        return this;\n    }\n\n    _encodePayload(data) {\n        let payloadJSON = null;\n        try {\n            payloadJSON = JSON.stringify(data);\n        } catch (_ignored) {\n            // TODO: this should log an internal warning that a payload could\n            // not be encoded as JSON.\n            return undefined;\n        }\n        return payloadJSON;\n    }\n}\n\nmodule.exports = LogBuilder;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/log_builder.js\n **/","import _each from '../_each';\n\nclass PackageGlobals {\n    constructor() {\n        this.options = {};\n    }\n\n    setOptions(opts) {\n        _each(opts, (val, key) => {\n            this.options[key] = val;\n        });\n    }\n}\n\nmodule.exports = new PackageGlobals();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/globals.js\n **/","module.exports = {\n\t\"name\": \"lightstep-tracer\",\n\t\"version\": \"0.20.2\",\n\t\"main\": \"index.js\",\n\t\"engines\": {\n\t\t\"node\": \">=0.12.0\"\n\t},\n\t\"scripts\": {\n\t\t\"test\": \"rm -f test/results/*.json && node node_modules/mocha/bin/mocha -c test/unittest_node.js\"\n\t},\n\t\"license\": \"MIT\",\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"http://github.com/lightstep/lightstep-tracer-javascript.git\"\n\t},\n\t\"dependencies\": {\n\t\t\"async\": \"1.5.0\",\n\t\t\"eventemitter3\": \"1.1.1\",\n\t\t\"source-map-support\": \"0.3.3\",\n\t\t\"thrift\": \"0.9.2\"\n\t},\n\t\"devDependencies\": {\n\t\t\"babel-cli\": \"6.14.0\",\n\t\t\"babel-core\": \"6.3.26\",\n\t\t\"babel-loader\": \"6.2.0\",\n\t\t\"babel-plugin-add-module-exports\": \"0.1.2\",\n\t\t\"babel-plugin-check-es2015-constants\": \"6.7.2\",\n\t\t\"babel-plugin-transform-es2015-arrow-functions\": \"6.5.2\",\n\t\t\"babel-plugin-transform-es2015-block-scoped-functions\": \"6.6.5\",\n\t\t\"babel-plugin-transform-es2015-block-scoping\": \"6.7.1\",\n\t\t\"babel-plugin-transform-es2015-classes\": \"6.6.5\",\n\t\t\"babel-plugin-transform-es2015-computed-properties\": \"6.6.5\",\n\t\t\"babel-plugin-transform-es2015-destructuring\": \"6.6.5\",\n\t\t\"babel-plugin-transform-es2015-duplicate-keys\": \"6.6.4\",\n\t\t\"babel-plugin-transform-es2015-literals\": \"6.5.0\",\n\t\t\"babel-plugin-transform-es2015-modules-commonjs\": \"6.7.4\",\n\t\t\"babel-plugin-transform-es2015-object-super\": \"6.6.5\",\n\t\t\"babel-plugin-transform-es2015-parameters\": \"6.7.0\",\n\t\t\"babel-plugin-transform-es2015-spread\": \"6.6.5\",\n\t\t\"babel-plugin-transform-es2015-sticky-regex\": \"6.5.0\",\n\t\t\"babel-plugin-transform-es2015-template-literals\": \"6.6.5\",\n\t\t\"babel-plugin-transform-es2015-unicode-regex\": \"6.5.0\",\n\t\t\"babel-polyfill\": \"6.3.14\",\n\t\t\"babel-preset-es2015\": \"6.3.13\",\n\t\t\"chai\": \"3.4.1\",\n\t\t\"clone\": \"1.0.2\",\n\t\t\"colors\": \"1.1.2\",\n\t\t\"eslint\": \"2.4.0\",\n\t\t\"eslint-config-airbnb\": \"6.2.0\",\n\t\t\"eslint-plugin-react\": \"4.2.3\",\n\t\t\"istanbul\": \"0.4.4\",\n\t\t\"json-loader\": \"0.5.4\",\n\t\t\"mocha\": \"2.3.4\",\n\t\t\"opentracing\": \"0.13.0\",\n\t\t\"shelljs\": \"0.5.3\",\n\t\t\"sprintf-js\": \"1.0.3\",\n\t\t\"underscore\": \"1.8.3\",\n\t\t\"watch-trigger\": \"0.0.5\",\n\t\t\"webpack\": \"1.12.9\"\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./package.json\n ** module id = 32\n ** module chunks = 0\n **/","class Util {\n\n    // Similar to a regular setTimeout() call, but dereferences the timer so the\n    // program execution will not be held up by this timer.\n    detachedTimeout(callback, delay) {\n        let timer = setTimeout(callback, delay);\n        if (timer.unref) {\n            timer.unref();\n        }\n        return timer;\n    }\n}\n\nexport default new Util();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/imp/util/util.js\n **/","const constants = require('../constants');\n\nclass LogToConsole {\n    constructor() {\n        this._enabled = false;\n        this._tracer = null;\n        this._optionsCb = this._handleOptions.bind(this);\n        this._logAddedCb = this._handleLogAdded.bind(this);\n    }\n\n    name() {\n        return 'log_to_console';\n    }\n\n    addOptions(tracerImp) {\n        tracerImp.addOption('log_to_console', {\n            type         : 'bool',\n            defaultValue : false,\n        });\n        tracerImp.on('options', this._optionsCb);\n    }\n\n    start(tracer, tracerImp) {\n        this._tracer = tracer;\n    }\n\n    stop() {\n        this._tracer.removeListener('options', this._optionsCb);\n    }\n\n    _handleOptions(modified, current, tracerImp) {\n        let enabled = current.log_to_console;\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            tracerImp.on('log_added', this._logAddedCb);\n        } else {\n            tracerImp.removeListener('log_added', this._logAddedCb);\n        }\n    }\n\n    _handleLogAdded(record) {\n        let level = constants.LOG_STRING_TO_LEVEL[record.level];\n        let message = record.message;\n\n        // Ignore records without a message (e.g. a stable_name log record)\n        if (!message) {\n            return;\n        }\n\n        let payload = record.payload_json;\n        if (payload) {\n            try {\n                payload = JSON.parse(payload);\n            } catch (_ignored) { /* ignored */ }\n        }\n\n        switch (level) {\n        case constants.LOG_ERROR:\n        case constants.LOG_FATAL:\n            if (payload !== undefined) {\n                console.error(message, payload); // eslint-disable-line no-console\n            } else {\n                console.error(message); // eslint-disable-line no-console\n            }\n            break;\n        case constants.LOG_WARN:\n            if (payload !== undefined) {\n                console.warn(message, payload); // eslint-disable-line no-console\n            } else {\n                console.warn(message); // eslint-disable-line no-console\n            }\n            break;\n        case constants.LOG_INFO:\n        default:\n            if (payload !== undefined) {\n                console.log(message, payload); // eslint-disable-line no-console\n            } else {\n                console.log(message); // eslint-disable-line no-console\n            }\n            break;\n        }\n    }\n}\n\nmodule.exports = new LogToConsole();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/plugins/log_to_console.js\n **/"],"sourceRoot":""}